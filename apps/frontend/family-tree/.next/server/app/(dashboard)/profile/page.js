(()=>{var e={};e.id=688,e.ids=[688],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},42810:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>d}),s(58852),s(63901),s(12523);var t=s(23191),r=s(88716),i=s(37922),l=s.n(i),n=s(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(a,o);let d=["",{children:["(dashboard)",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,58852)),"/mnt/win3/work/family_tree/apps/frontend/family-tree/src/app/(dashboard)/profile/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,63901)),"/mnt/win3/work/family_tree/apps/frontend/family-tree/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,12523)),"/mnt/win3/work/family_tree/apps/frontend/family-tree/src/app/not-found.tsx"]}],c=["/mnt/win3/work/family_tree/apps/frontend/family-tree/src/app/(dashboard)/profile/page.tsx"],m="/(dashboard)/profile/page",u={require:s,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},72868:(e,a,s)=>{Promise.resolve().then(s.bind(s,6988))},47546:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(76557).Z)("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]])},67427:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(76557).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},18019:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(76557).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},6988:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>Z});var t=s(10326),r=s(17577),i=s(29752),l=s(44794),n=s(41190),o=s(91664),d=s(72427),c=s(99744),m=s(82015),u=s(29280),h=s(28180),x=s(32887),p=s(32082),f=s(84097);function j(e,a){if(e){let a=e.trim().split(/\s+/);return a.length>=2?`${a[0][0]}${a[a.length-1][0]}`.toUpperCase():e.slice(0,2).toUpperCase()}return a?a.slice(0,2).toUpperCase():"??"}var g=s(75290),y=s(79635),v=s(18019),b=s(67427),N=s(37358);let w=(0,s(76557).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var _=s(47546);function Z(){let{user:e,setUser:a}=(0,p.a)(),{toast:s}=(0,f.pm)(),[Z,C]=(0,r.useState)(!1),[S,k]=(0,r.useState)([]),[P,F]=(0,r.useState)(!1),[E,I]=(0,r.useState)(""),[z,A]=(0,r.useState)(""),[D,R]=(0,r.useState)(""),[M,T]=(0,r.useState)(""),[U,V]=(0,r.useState)(""),[L,$]=(0,r.useState)(""),[Y,B]=(0,r.useState)(""),q=async e=>{e.preventDefault(),C(!0);try{let e=await fetch("http://localhost:8050/api/users/me",{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({display_name:E||null,dob:z||null,gender:D||null,pronouns:M||null,bio:U||null,phone:L||null,location:Y||null})});if(!e.ok){let a=await e.json();throw Error(a.detail||"Failed to update profile")}let t=await e.json();console.log("Profile update successful:",t),a(t),s({title:"Success",description:"Profile updated successfully"})}catch(e){console.error("Error updating profile:",e),s({title:"Error",description:e instanceof Error?e.message:"Failed to update profile",variant:"destructive"})}finally{C(!1)}};return e?t.jsx(h.c,{children:(0,t.jsxs)("div",{className:"space-y-6 max-w-4xl",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"My Profile"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage your personal information and account settings"})]}),t.jsx(d.Z,{}),(0,t.jsxs)(c.mQ,{defaultValue:"profile",className:"space-y-6",children:[(0,t.jsxs)(c.dr,{className:"grid w-full max-w-lg grid-cols-3",children:[(0,t.jsxs)(c.SP,{value:"profile",children:[t.jsx(y.Z,{className:"w-4 h-4 mr-2"}),"Profile Settings"]}),(0,t.jsxs)(c.SP,{value:"info",children:[t.jsx(v.Z,{className:"w-4 h-4 mr-2"}),"Public Information"]}),(0,t.jsxs)(c.SP,{value:"trees",children:[t.jsx(b.Z,{className:"w-4 h-4 mr-2"}),"Family Trees"]})]}),(0,t.jsxs)(c.nU,{value:"profile",className:"space-y-6",children:[(0,t.jsxs)(i.Zb,{children:[(0,t.jsxs)(i.Ol,{children:[t.jsx(i.ll,{children:"Avatar & Basic Info"}),t.jsx(i.SZ,{children:"Update your avatar and display name"})]}),(0,t.jsxs)(i.aY,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(l._,{children:"Avatar"}),t.jsx(x.G,{currentAvatarUrl:e.avatar_url,userInitials:j(e.display_name,e.email),onAvatarChange:s=>{e&&a({...e,avatar_url:s})}})]}),(0,t.jsxs)("form",{onSubmit:q,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(l._,{htmlFor:"email",children:"Email"}),t.jsx(n.I,{id:"email",type:"email",value:e.email,disabled:!0,className:"bg-muted"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Email cannot be changed"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(l._,{htmlFor:"displayName",children:"Display Name *"}),t.jsx(n.I,{id:"displayName",type:"text",value:E,onChange:e=>I(e.target.value),placeholder:"Enter your display name"})]})]}),t.jsx(d.Z,{}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(l._,{htmlFor:"dob",children:[t.jsx(N.Z,{className:"w-4 h-4 inline mr-1"}),"Date of Birth"]}),t.jsx(n.I,{id:"dob",type:"date",value:z,onChange:e=>A(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(l._,{htmlFor:"gender",children:"Gender"}),(0,t.jsxs)(u.Ph,{value:D,onValueChange:R,children:[t.jsx(u.i4,{id:"gender",children:t.jsx(u.ki,{placeholder:"Select gender"})}),(0,t.jsxs)(u.Bw,{children:[t.jsx(u.Ql,{value:"male",children:"Male"}),t.jsx(u.Ql,{value:"female",children:"Female"}),t.jsx(u.Ql,{value:"non-binary",children:"Non-binary"}),t.jsx(u.Ql,{value:"other",children:"Other"}),t.jsx(u.Ql,{value:"prefer-not-to-say",children:"Prefer not to say"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(l._,{htmlFor:"pronouns",children:[t.jsx(b.Z,{className:"w-4 h-4 inline mr-1"}),"Pronouns"]}),t.jsx(n.I,{id:"pronouns",type:"text",value:M,onChange:e=>T(e.target.value),placeholder:"e.g., he/him, she/her, they/them"})]}),t.jsx(d.Z,{}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(l._,{htmlFor:"phone",children:"Phone Number"}),t.jsx(n.I,{id:"phone",type:"tel",value:L,onChange:e=>$(e.target.value),placeholder:"+1 (555) 123-4567"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(l._,{htmlFor:"location",children:[t.jsx(w,{className:"w-4 h-4 inline mr-1"}),"Location"]}),t.jsx(n.I,{id:"location",type:"text",value:Y,onChange:e=>B(e.target.value),placeholder:"City, Country"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(l._,{htmlFor:"bio",children:[t.jsx(_.Z,{className:"w-4 h-4 inline mr-1"}),"Bio"]}),t.jsx(m.g,{id:"bio",value:U,onChange:e=>V(e.target.value),placeholder:"Tell us about yourself...",rows:4}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"This information will be visible to other members in your family trees"})]}),t.jsx(o.z,{type:"submit",disabled:Z,children:Z?(0,t.jsxs)(t.Fragment,{children:[t.jsx(g.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Profile"})]})]})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsxs)(i.Ol,{children:[t.jsx(i.ll,{children:"Account Information"}),t.jsx(i.SZ,{children:"View your account details"})]}),(0,t.jsxs)(i.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(l._,{children:"Account ID"}),t.jsx(n.I,{value:e.id,disabled:!0,className:"bg-muted font-mono text-sm"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(l._,{children:"Member Since"}),t.jsx(n.I,{value:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),disabled:!0,className:"bg-muted"})]})]})]})]}),(0,t.jsxs)(c.nU,{value:"info",className:"space-y-6",children:[(0,t.jsxs)(i.Zb,{children:[(0,t.jsxs)(i.Ol,{children:[t.jsx(i.ll,{children:"Public Profile Preview"}),t.jsx(i.SZ,{children:"This is how other family tree members see your information"})]}),(0,t.jsxs)(i.aY,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"relative",children:t.jsx("div",{className:"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center text-2xl font-semibold",children:e.avatar_url?t.jsx("img",{src:`http://localhost:8050/api${e.avatar_url}`,alt:e.display_name||e.email,className:"w-20 h-20 rounded-full object-cover"}):j(e.display_name,e.email)})}),(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-2xl font-bold",children:e.display_name||"No display name set"}),M&&(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["(",M,")"]})]})]}),t.jsx(d.Z,{}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[z&&(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx(l._,{className:"text-muted-foreground",children:"Date of Birth"}),t.jsx("p",{className:"font-medium",children:new Date(z).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),D&&(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx(l._,{className:"text-muted-foreground",children:"Gender"}),t.jsx("p",{className:"font-medium capitalize",children:D.replace("-"," ")})]}),L&&(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx(l._,{className:"text-muted-foreground",children:"Phone"}),t.jsx("p",{className:"font-medium",children:L})]}),Y&&(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)(l._,{className:"text-muted-foreground",children:[t.jsx(w,{className:"w-4 h-4 inline mr-1"}),"Location"]}),t.jsx("p",{className:"font-medium",children:Y})]})]}),U&&(0,t.jsxs)(t.Fragment,{children:[t.jsx(d.Z,{}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(l._,{className:"text-muted-foreground",children:"Bio"}),t.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:U})]})]}),!z&&!D&&!L&&!Y&&!U&&(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(v.Z,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),t.jsx("p",{children:"No public information available"}),t.jsx("p",{className:"text-sm",children:"Fill out your profile in the settings tab to display information here"})]})]})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsxs)(i.Ol,{children:[t.jsx(i.ll,{children:"Privacy Notice"}),t.jsx(i.SZ,{children:"Understanding your information visibility"})]}),(0,t.jsxs)(i.aY,{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex gap-3",children:[t.jsx(v.Z,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:"Visible to Family Tree Members"}),t.jsx("p",{className:"text-muted-foreground",children:"Your profile information is visible to members of family trees you belong to"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[t.jsx(v.Z,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:"Private by Default"}),t.jsx("p",{className:"text-muted-foreground",children:"Your email and account ID are always private and never shared with other users"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[t.jsx(v.Z,{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:"Control Your Information"}),t.jsx("p",{className:"text-muted-foreground",children:"You can edit or remove any personal information at any time from your profile settings"})]})]})]})]})]}),(0,t.jsxs)(c.nU,{value:"trees",className:"space-y-6",children:[(0,t.jsxs)(i.Zb,{children:[(0,t.jsxs)(i.Ol,{children:[t.jsx(i.ll,{children:"My Family Trees"}),t.jsx(i.SZ,{children:"Family trees you belong to and your role in each"})]}),t.jsx(i.aY,{children:P?(0,t.jsxs)("div",{className:"flex items-center justify-center py-8",children:[t.jsx(g.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"}),t.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading trees..."})]}):S.length>0?t.jsx("div",{className:"space-y-4",children:S.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("h3",{className:"font-medium",children:e.name}),e.description&&t.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,t.jsxs)("span",{children:["Role:"," ",t.jsx("span",{className:"capitalize font-medium",children:e.role})]}),(0,t.jsxs)("span",{children:["Members: ",e.member_count||0]}),(0,t.jsxs)("span",{children:["Joined:"," ",new Date(e.joined_at).toLocaleDateString()]})]})]}),t.jsx(o.z,{variant:"outline",size:"sm",asChild:!0,children:t.jsx("a",{href:`/trees/${e.id}`,children:"View Tree"})})]},e.id))}):(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(b.Z,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),t.jsx("p",{children:"You haven't joined any family trees yet"}),t.jsx("p",{className:"text-sm",children:"Create a new tree or accept an invitation to get started"})]})})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsxs)(i.Ol,{children:[t.jsx(i.ll,{children:"Unified Identity System"}),t.jsx(i.SZ,{children:"How your identity is managed across the platform"})]}),t.jsx(i.aY,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex gap-3",children:[t.jsx(y.Z,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:"Your Unique ID"}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Your account has a unique identifier (",e?.id,") that represents you across all family trees. This ensures consistent identity and prevents duplicate records."]})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[t.jsx(v.Z,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:"Automatic Synchronization"}),t.jsx("p",{className:"text-muted-foreground",children:"When you update your profile information here, it automatically syncs to your member records in all family trees. Your avatar, name, demographics, and bio stay consistent everywhere."})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[t.jsx(v.Z,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:"Invite Acceptance"}),t.jsx("p",{className:"text-muted-foreground",children:"Whether you signed up first or were added as a member first, the system automatically unifies your identity when you accept invitations or verify your email."})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[t.jsx(v.Z,{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:"Tree-Specific Information"}),t.jsx("p",{className:"text-muted-foreground",children:"While your core identity is unified, relationships, private notes, and tree-specific details remain unique to each family tree and are managed by tree custodians."})]})]})]})})]})]})]})]})}):t.jsx(h.c,{children:t.jsx("div",{className:"flex items-center justify-center h-full py-12",children:t.jsx(g.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})})})}},32887:(e,a,s)=>{"use strict";s.d(a,{G:()=>j});var t=s(10326),r=s(17577),i=s(12591),l=s(91664),n=s(24118),o=s(3594),d=s(51896),c=s(75290),m=s(94019),u=s(84097);async function h(e,a){let s=await new Promise((a,s)=>{let t=new Image;t.addEventListener("load",()=>a(t)),t.addEventListener("error",e=>s(e)),t.src=e}),t=document.createElement("canvas"),r=t.getContext("2d");if(!r)throw Error("No 2d context");return t.width=a.width,t.height=a.height,r.drawImage(s,a.x,a.y,a.width,a.height,0,0,a.width,a.height),new Promise((e,a)=>{t.toBlob(s=>{s?e(s):a(Error("Canvas is empty"))},"image/jpeg",.85)})}let x={sm:"h-16 w-16",md:"h-20 w-20",lg:"h-24 w-24"},p={sm:"h-6 w-6",md:"h-7 w-7",lg:"h-8 w-8"},f={sm:"h-3 w-3",md:"h-4 w-4",lg:"h-4 w-4"};function j({currentAvatarUrl:e,userInitials:a,onAvatarChange:s,uploadEndpoint:j,deleteEndpoint:g,size:y="lg"}){let{toast:v}=(0,u.pm)(),[b,N]=(0,r.useState)(!1),[w,_]=(0,r.useState)(null),[Z,C]=(0,r.useState)({x:0,y:0}),[S,k]=(0,r.useState)(1),[P,F]=(0,r.useState)(null),[E,I]=(0,r.useState)(!1),[z,A]=(0,r.useState)(!1),D=(0,r.useCallback)((e,a)=>{F(a)},[]),R=async()=>{if(w&&P){I(!0);try{let e=await h(w,P),a=new FormData;a.append("file",e,"avatar.jpg");let t=await fetch(j||"http://localhost:8050/api/users/me/avatar",{method:"POST",body:a,credentials:"include"});if(!t.ok){let e=await t.json();throw Error(e.detail||"Failed to upload avatar")}let r=await t.json();v({title:"Success",description:"Avatar uploaded successfully"}),s&&r.avatar_url&&s(r.avatar_url),N(!1),_(null),C({x:0,y:0}),k(1)}catch(e){console.error("Error uploading avatar:",e),v({title:"Error",description:e instanceof Error?e.message:"Failed to upload avatar",variant:"destructive"})}finally{I(!1)}}},M=async()=>{if(e){A(!0);try{let e=await fetch(g||"http://localhost:8050/api/users/me/avatar",{method:"DELETE",credentials:"include"});if(!e.ok){let a=await e.json();throw Error(a.detail||"Failed to delete avatar")}v({title:"Success",description:"Avatar deleted successfully"}),s&&s(null)}catch(e){console.error("Error deleting avatar:",e),v({title:"Error",description:e instanceof Error?e.message:"Failed to delete avatar",variant:"destructive"})}finally{A(!1)}}},T=e?e.startsWith("/uploads")?`${process.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:8050"}${e}`:(e.startsWith("http"),e):void 0;return(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(o.qE,{className:x[y],children:[t.jsx(o.F$,{src:T,alt:"Avatar"}),t.jsx(o.Q5,{className:`${"sm"===y?"text-sm":"md"===y?"text-lg":"text-2xl"} bg-primary/10`,children:a})]}),(0,t.jsxs)("label",{htmlFor:"avatar-upload",className:`absolute bottom-0 right-0 ${p[y]} rounded-full bg-primary text-primary-foreground flex items-center justify-center cursor-pointer hover:bg-primary/90 transition-colors`,children:[t.jsx(d.Z,{className:f[y]}),t.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",className:"hidden",onChange:e=>{if(e.target.files&&e.target.files.length>0){let a=e.target.files[0];if(a.size>5242880){v({title:"File too large",description:"Please select an image smaller than 5MB",variant:"destructive"});return}if(!a.type.startsWith("image/")){v({title:"Invalid file type",description:"Please select an image file",variant:"destructive"});return}let s=new FileReader;s.addEventListener("load",()=>{_(s.result),N(!0)}),s.readAsDataURL(a)}}})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[t.jsx("label",{htmlFor:"avatar-upload",className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 cursor-pointer",children:"Change Avatar"}),e&&t.jsx(l.z,{variant:"outline",size:"sm",onClick:M,disabled:z,children:z?(0,t.jsxs)(t.Fragment,{children:[t.jsx(c.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(m.Z,{className:"mr-2 h-4 w-4"}),"Remove Avatar"]})})]}),t.jsx(n.Vq,{open:b,onOpenChange:N,children:(0,t.jsxs)(n.cZ,{className:"sm:max-w-[600px]",children:[(0,t.jsxs)(n.fK,{children:[t.jsx(n.$N,{children:"Crop your avatar"}),t.jsx(n.Be,{children:"Adjust the image to fit within the circle"})]}),t.jsx("div",{className:"relative h-[400px] bg-muted rounded-lg overflow-hidden",children:w&&t.jsx(i.ZP,{image:w,crop:Z,zoom:S,aspect:1,cropShape:"round",showGrid:!1,onCropChange:C,onCropComplete:D,onZoomChange:k})}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"zoom",className:"text-sm font-medium",children:"Zoom"}),t.jsx("input",{id:"zoom",type:"range",min:1,max:3,step:.1,value:S,onChange:e=>k(Number(e.target.value)),className:"w-full"})]}),(0,t.jsxs)(n.cN,{children:[t.jsx(l.z,{variant:"outline",onClick:()=>{N(!1),_(null)},disabled:E,children:"Cancel"}),t.jsx(l.z,{onClick:R,disabled:E,children:E?(0,t.jsxs)(t.Fragment,{children:[t.jsx(c.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):"Upload"})]})]})})]})}},41190:(e,a,s)=>{"use strict";s.d(a,{I:()=>l});var t=s(10326),r=s(17577),i=s(51223);let l=r.forwardRef(({className:e,type:a,...s},r)=>t.jsx("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...s}));l.displayName="Input"},44794:(e,a,s)=>{"use strict";s.d(a,{_:()=>d});var t=s(10326),r=s(17577),i=s(34478),l=s(79360),n=s(51223);let o=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef(({className:e,...a},s)=>t.jsx(i.f,{ref:s,className:(0,n.cn)(o(),e),...a}));d.displayName=i.f.displayName},43870:(e,a,s)=>{"use strict";s.d(a,{V:()=>l});var t=s(10326),r=s(17577),i=s(29280);function l({value:e,onValueChange:a,placeholder:s="Select an option...",searchPlaceholder:l="Search options...",options:n,className:o,disabled:d,id:c}){let[m,u]=r.useState(""),[h,x]=r.useState(!1),p=r.useMemo(()=>{let e=n;return m&&(e=n.filter(e=>e.label.toLowerCase().includes(m.toLowerCase())||e.value.toLowerCase().includes(m.toLowerCase()))),e.sort((e,a)=>e.label.localeCompare(a.label))},[n,m]);return(0,t.jsxs)(i.Ph,{value:e,onValueChange:e=>{console.log(`SearchableSelect ${c||"unknown"} value changed to:`,e),u(""),x(!1),a?.(e)},disabled:d,open:h,onOpenChange:e=>{x(e),e||u("")},children:[t.jsx(i.i4,{className:o,children:t.jsx(i.ki,{placeholder:s})}),t.jsx(i.Bw,{searchable:!0,searchPlaceholder:l,onSearchChange:e=>{u(e)},children:0===p.length?t.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"No options found."}):p.map(e=>t.jsx(i.Ql,{value:e.value,disabled:e.disabled,children:e.label},e.value))})]})}},29280:(e,a,s)=>{"use strict";s.d(a,{Bw:()=>f,Ph:()=>m,Ql:()=>j,i4:()=>h,ki:()=>u});var t=s(10326),r=s(17577),i=s(18792),l=s(941),n=s(96633),o=s(88307),d=s(32933),c=s(51223);s(43870);let m=i.fC;i.ZA;let u=i.B4,h=r.forwardRef(({className:e,children:a,...s},r)=>(0,t.jsxs)(i.xz,{ref:r,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[a,t.jsx(i.JO,{asChild:!0,children:t.jsx(l.Z,{className:"h-4 w-4 opacity-50"})})]}));h.displayName=i.xz.displayName;let x=r.forwardRef(({className:e,...a},s)=>t.jsx(i.u_,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:t.jsx(n.Z,{className:"h-4 w-4"})}));x.displayName=i.u_.displayName;let p=r.forwardRef(({className:e,...a},s)=>t.jsx(i.$G,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:t.jsx(l.Z,{className:"h-4 w-4"})}));p.displayName=i.$G.displayName;let f=r.forwardRef(({className:e,children:a,position:s="popper",searchable:l=!1,searchPlaceholder:n="Search...",onSearchChange:d,...m},u)=>{let[h,f]=r.useState("");return t.jsx(i.h_,{children:(0,t.jsxs)(i.VY,{ref:u,className:(0,c.cn)("relative z-[999999] max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...m,children:[t.jsx(x,{}),l&&(0,t.jsxs)("div",{className:"flex items-center border-b px-3 py-2",children:[t.jsx(o.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),t.jsx("input",{className:"flex h-8 w-full rounded-md bg-transparent py-1 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",placeholder:n,value:h,onChange:e=>{let a=e.target.value;f(a),d?.(a)},onClick:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation()})]}),t.jsx(i.l_,{className:(0,c.cn)("p-1",l&&"overflow-y-auto max-h-[200px]","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),t.jsx(p,{})]})})});f.displayName=i.VY.displayName,r.forwardRef(({className:e,...a},s)=>t.jsx(i.__,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a})).displayName=i.__.displayName;let j=r.forwardRef(({className:e,children:a,...s},r)=>(0,t.jsxs)(i.ck,{ref:r,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(i.wU,{children:t.jsx(d.Z,{className:"h-4 w-4"})})}),t.jsx(i.eT,{children:a})]}));j.displayName=i.ck.displayName,r.forwardRef(({className:e,...a},s)=>t.jsx(i.Z0,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",e),...a})).displayName=i.Z0.displayName},72427:(e,a,s)=>{"use strict";s.d(a,{Z:()=>c});var t=s(10326),r=s(17577),i=s(45226),l="horizontal",n=["horizontal","vertical"],o=r.forwardRef((e,a)=>{let{decorative:s,orientation:r=l,...o}=e,d=n.includes(r)?r:l;return(0,t.jsx)(i.WV.div,{"data-orientation":d,...s?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...o,ref:a})});o.displayName="Separator";var d=s(51223);let c=r.forwardRef(({className:e,orientation:a="horizontal",decorative:s=!0,...r},i)=>t.jsx(o,{ref:i,decorative:s,orientation:a,className:(0,d.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",e),...r}));c.displayName=o.displayName},99744:(e,a,s)=>{"use strict";s.d(a,{mQ:()=>P,nU:()=>I,dr:()=>F,SP:()=>E});var t=s(10326),r=s(17577),i=s(82561),l=s(93095),n=s(15594),o=s(9815),d=s(45226),c=s(17124),m=s(52067),u=s(88957),h="Tabs",[x,p]=(0,l.b)(h,[n.Pc]),f=(0,n.Pc)(),[j,g]=x(h),y=r.forwardRef((e,a)=>{let{__scopeTabs:s,value:r,onValueChange:i,defaultValue:l,orientation:n="horizontal",dir:o,activationMode:x="automatic",...p}=e,f=(0,c.gm)(o),[g,y]=(0,m.T)({prop:r,onChange:i,defaultProp:l??"",caller:h});return(0,t.jsx)(j,{scope:s,baseId:(0,u.M)(),value:g,onValueChange:y,orientation:n,dir:f,activationMode:x,children:(0,t.jsx)(d.WV.div,{dir:f,"data-orientation":n,...p,ref:a})})});y.displayName=h;var v="TabsList",b=r.forwardRef((e,a)=>{let{__scopeTabs:s,loop:r=!0,...i}=e,l=g(v,s),o=f(s);return(0,t.jsx)(n.fC,{asChild:!0,...o,orientation:l.orientation,dir:l.dir,loop:r,children:(0,t.jsx)(d.WV.div,{role:"tablist","aria-orientation":l.orientation,...i,ref:a})})});b.displayName=v;var N="TabsTrigger",w=r.forwardRef((e,a)=>{let{__scopeTabs:s,value:r,disabled:l=!1,...o}=e,c=g(N,s),m=f(s),u=C(c.baseId,r),h=S(c.baseId,r),x=r===c.value;return(0,t.jsx)(n.ck,{asChild:!0,...m,focusable:!l,active:x,children:(0,t.jsx)(d.WV.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":h,"data-state":x?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:u,...o,ref:a,onMouseDown:(0,i.Mj)(e.onMouseDown,e=>{l||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(r)}),onKeyDown:(0,i.Mj)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(r)}),onFocus:(0,i.Mj)(e.onFocus,()=>{let e="manual"!==c.activationMode;x||l||!e||c.onValueChange(r)})})})});w.displayName=N;var _="TabsContent",Z=r.forwardRef((e,a)=>{let{__scopeTabs:s,value:i,forceMount:l,children:n,...c}=e,m=g(_,s),u=C(m.baseId,i),h=S(m.baseId,i),x=i===m.value,p=r.useRef(x);return r.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(o.z,{present:l||x,children:({present:s})=>(0,t.jsx)(d.WV.div,{"data-state":x?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":u,hidden:!s,id:h,tabIndex:0,...c,ref:a,style:{...e.style,animationDuration:p.current?"0s":void 0},children:s&&n})})});function C(e,a){return`${e}-trigger-${a}`}function S(e,a){return`${e}-content-${a}`}Z.displayName=_;var k=s(51223);let P=y,F=r.forwardRef(({className:e,...a},s)=>t.jsx(b,{ref:s,className:(0,k.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...a}));F.displayName=b.displayName;let E=r.forwardRef(({className:e,...a},s)=>t.jsx(w,{ref:s,className:(0,k.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...a}));E.displayName=w.displayName;let I=r.forwardRef(({className:e,...a},s)=>t.jsx(Z,{ref:s,className:(0,k.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...a}));I.displayName=Z.displayName},82015:(e,a,s)=>{"use strict";s.d(a,{g:()=>l});var t=s(10326),r=s(17577),i=s(51223);let l=r.forwardRef(({className:e,...a},s)=>t.jsx("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...a}));l.displayName="Textarea"},58852:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(68570).createProxy)(String.raw`/mnt/win3/work/family_tree/apps/frontend/family-tree/src/app/(dashboard)/profile/page.tsx#default`)}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[990,153,882,806,752,711],()=>s(42810));module.exports=t})();