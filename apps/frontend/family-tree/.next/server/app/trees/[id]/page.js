(()=>{var e={};e.id=803,e.ids=[803],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},85807:e=>{"use strict";e.exports=require("module")},19604:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,originalPathname:()=>h,pages:()=>c,routeModule:()=>m,tree:()=>d}),r(35820),r(63901),r(12523);var s=r(23191),i=r(88716),n=r(37922),a=r.n(n),l=r(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["trees",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,35820)),"/mnt/win3/work/family_tree/apps/frontend/family-tree/src/app/trees/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,63901)),"/mnt/win3/work/family_tree/apps/frontend/family-tree/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"/mnt/win3/work/family_tree/apps/frontend/family-tree/src/app/not-found.tsx"]}],c=["/mnt/win3/work/family_tree/apps/frontend/family-tree/src/app/trees/[id]/page.tsx"],h="/trees/[id]/page",u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/trees/[id]/page",pathname:"/trees/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7410:(e,t,r)=>{Promise.resolve().then(r.bind(r,91059))},37202:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},31540:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},91059:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ih});var s=r(10326),i=r(17577),n=r(35047),a=r(91664),l=r(29752),o=r(38443),d=r(99744),c=r(3594),h=r(28180),u=r(84097),m=r(67427),p=r(41135);let f=e=>e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2),x=e=>{if(!e)return"bg-gray-400";let t=e.toLowerCase();return"male"===t?"bg-blue-400":"female"===t?"bg-pink-400":"bg-purple-400"};function g({member:e,isSelected:t,isHighlighted:r,onClick:n}){let a=(0,i.useRef)(null);return s.jsx("div",{className:"relative inline-block",style:{zIndex:10},children:s.jsx(l.Zb,{ref:a,className:(0,p.Z)("min-w-[100px] cursor-pointer transition-all hover:shadow-lg bg-white dark:bg-slate-800",t&&"ring-2 ring-blue-500 ring-offset-2",r&&"ring-2 ring-yellow-400 ring-offset-2",e.deceased&&"opacity-75"),onClick:e=>n?.(e),children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 p-3",children:[(0,s.jsxs)(c.qE,{className:"h-14 w-14",children:[s.jsx(c.F$,{src:e.avatar_url?`${process.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:8050"}${e.avatar_url}`:void 0,alt:e.name}),s.jsx(c.Q5,{className:x(e.gender),children:f(e.name)})]}),(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("p",{className:(0,p.Z)("text-sm font-medium leading-tight",e.deceased&&"line-through"),children:e.name}),e.dob&&(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["b. ",new Date(e.dob).getFullYear()]}),e.deceased&&e.dod&&(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["d. ",new Date(e.dod).getFullYear()]})]})]})})})}function v({member:e,spouses:t,isSelected:r,isHighlighted:n,onClick:a,onMemberClick:o,selectedMemberId:d}){let h=(0,i.useRef)(null),u=(0,i.useRef)([]);return 0===t.length?s.jsx(g,{member:e,isSelected:r,isHighlighted:n,onClick:a}):s.jsx(l.Zb,{ref:h,className:"inline-block border-2 p-2 bg-white dark:bg-slate-800",style:{zIndex:10},children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:(0,p.Z)("cursor-pointer rounded-lg p-2 transition-all hover:bg-accent",r&&"ring-2 ring-blue-500",n&&"ring-2 ring-yellow-400"),onClick:e=>a?.(e),children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,s.jsxs)(c.qE,{className:"h-14 w-14",children:[s.jsx(c.F$,{src:e.avatar_url?`${process.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:8050"}${e.avatar_url}`:void 0,alt:e.name}),s.jsx(c.Q5,{className:x(e.gender),children:f(e.name)})]}),(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("p",{className:(0,p.Z)("text-sm font-medium leading-tight",e.deceased&&"line-through"),children:e.name}),e.dob&&(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["b. ",new Date(e.dob).getFullYear()]})]})]})}),t.length>0&&s.jsx("div",{ref:e=>{u.current[0]=e},children:s.jsx(m.Z,{className:"h-4 w-4 flex-shrink-0 fill-red-400 text-red-400"})}),t.map((e,r)=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:(0,p.Z)("cursor-pointer rounded-lg p-2 transition-all hover:bg-accent",d===e.id&&"ring-2 ring-blue-500",n&&"ring-2 ring-yellow-400"),onClick:t=>{t.stopPropagation(),o?o(e):a&&a(t)},children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,s.jsxs)(c.qE,{className:"h-14 w-14",children:[s.jsx(c.F$,{src:e.avatar_url?`${process.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:8050"}${e.avatar_url}`:void 0,alt:e.name}),s.jsx(c.Q5,{className:x(e.gender),children:f(e.name)})]}),(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("p",{className:(0,p.Z)("text-sm font-medium leading-tight",e.deceased&&"line-through"),children:e.name}),e.dob&&(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["b. ",new Date(e.dob).getFullYear()]})]})]})}),r<t.length-1&&s.jsx("div",{ref:e=>{u.current[r+1]=e},children:s.jsx(m.Z,{className:"h-4 w-4 flex-shrink-0 fill-red-400 text-red-400"})})]},e.id))]})})}function _({parentNode:e,childNode:t,isHighlighted:r,isSelected:n,onRelationshipAnalyze:a,onConnectionHighlight:l}){let[o,d]=(0,i.useState)(0),[c,h]=(0,i.useState)(null),u="#00c71b",m=2.5,p=!1;n?(u="#3b82f6",m=3.5,p=!0):r&&(u="#f59e0b",m=4,p=!0);let f=(0,i.useCallback)(r=>{r.stopPropagation(),c&&clearTimeout(c);let s=o+1;d(s);let i=`${e.member.id}-${t.member.id}`;2===s?(console.log(`[TreeEdges] ðŸ”† Double-clicked connector: ${e.member.name} -> ${t.member.name}`),l?.(i),h(setTimeout(()=>d(0),1e3))):3===s?(console.log(`[TreeEdges] ðŸ” Triple-clicked connector: ${e.member.name} -> ${t.member.name}`),a?.(e.member.id,t.member.id),d(0),c&&(clearTimeout(c),h(null))):1===s?h(setTimeout(()=>d(0),400)):(d(0),c&&(clearTimeout(c),h(null)))},[o,c,e.member.id,t.member.id,e.member.name,t.member.name,a,l]),x=e.x,g=e.y+60-8,v=t.x,_=t.y-60+8;if(g>=_)return console.error("[BezierConnector] Invalid parent-child positioning:",{parent:{name:e.member.name,y:e.y,bottomY:g},child:{name:t.member.name,y:t.y,topY:_}}),null;let y=Math.abs(v-x),b=Math.max(.4*(_-g),50),j=Math.min(.2*y,80),w=x+(y>100?v>x?j:-j:0),N=g+b,C=v-(y>100?v>x?j:-j:0),k=_-b,T=`M ${x} ${g} C ${w} ${N}, ${C} ${k}, ${v} ${_}`,S=Math.min(x,v,w,C)-20,M=Math.max(x,v,w,C)+20,E=Math.min(g,_,N,k)-20,P=Math.max(g,_,N,k)+20;return(0,s.jsxs)("svg",{className:"absolute cursor-pointer",style:{left:`${S}px`,top:`${E}px`,width:`${M-S}px`,height:`${P-E}px`,zIndex:1},onClick:f,children:[s.jsx("path",{d:T,stroke:"transparent",strokeWidth:m+8,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",transform:`translate(${-S}, ${-E})`,style:{pointerEvents:"all"}}),p&&s.jsx("path",{d:T,stroke:u,strokeWidth:m+2,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",transform:`translate(${-S}, ${-E})`,style:{pointerEvents:"none",opacity:.3,filter:"blur(2px)"}}),s.jsx("path",{d:T,stroke:u,strokeWidth:m,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",transform:`translate(${-S}, ${-E})`,style:{pointerEvents:"none",transition:"stroke 0.2s ease, stroke-width 0.2s ease",filter:p?"drop-shadow(0 0 4px rgba(245, 158, 11, 0.5))":"none"}})]})}function y({parentNodes:e,childNodes:t,isHighlighted:r,selectedConnections:i,highlightedConnection:n,onRelationshipAnalyze:a,onConnectionHighlight:l}){if(0===e.length||0===t.length)return null;let o=[];return e.forEach(e=>{t.forEach(t=>{let d=`${e.member.id}-${t.member.id}`,c=i?.has(d)||!1,h=n===d;o.push(s.jsx(_,{parentNode:e,childNode:t,isHighlighted:r||h,isSelected:c,onRelationshipAnalyze:a,onConnectionHighlight:l},d))})}),s.jsx(s.Fragment,{children:o})}function b({nodes:e,highlightPath:t=[],onRelationshipAnalyze:r,onConnectionHighlight:n}){let[a]=(0,i.useState)(new Set),[l,o]=(0,i.useState)(null),d=[],c=(0,i.useCallback)((e,t)=>{r?.(e,t)},[r]),h=(0,i.useCallback)(e=>{o(t=>t===e?null:e),console.log(`[TreeEdges] ðŸ”† Highlighted connection: ${e}`),n?.(e)},[n]),u=new Map;return e.forEach(e=>{let t=e.member;if(t.parentIds.length>0){let e=[...t.parentIds].sort().join("|");u.has(e)||u.set(e,[]),u.get(e).push(t.id)}e.spouses.forEach(e=>{if(e.parentIds.length>0){let t=[...e.parentIds].sort().join("|");u.has(t)||u.set(t,[]),u.get(t).push(e.id)}})}),console.log("[TreeEdges] Parent-child groupings with generations:",{nodeCount:e.length,parentGroups:Array.from(u.entries()).map(([t,r])=>{let s=t.split("|").map(t=>e.find(e=>e.member.id===t)),i=r.map(t=>e.find(e=>e.member.id===t));return{parentKey:t,parents:s.map(e=>({name:e?.member.name||"unknown",gen:e?.generation,y:e?.y})),children:i.map(e=>({name:e?.member.name||"unknown",gen:e?.generation,y:e?.y})),childCount:r.length}})}),u.forEach((r,i)=>{let n=i.split("|"),o=n.map(t=>e.find(e=>e.member.id===t)).filter(e=>void 0!==e),u=r.map(t=>{let r=e.find(e=>e.member.id===t);if(r)return r;let s=e.find(e=>e.spouses.some(e=>e.id===t));if(s)return{member:s.spouses.find(e=>e.id===t),x:s.x,y:s.y,generation:s.generation,spouses:[],familyUnitId:s.familyUnitId}}).filter(e=>void 0!==e);if(0===o.length||0===u.length)return;let m=o.reduce((e,t)=>e+t.y,0)/o.length,p=u.reduce((e,t)=>e+t.y,0)/u.length;m>p&&console.warn("[TreeEdges] Inverted relationship detected:",{parents:o.map(e=>({name:e.member.name,y:e.y,gen:e.generation})),children:u.map(e=>({name:e.member.name,y:e.y,gen:e.generation})),avgParentY:m,avgChildY:p});let f=n.some(e=>t.includes(e))&&r.some(e=>t.includes(e));d.push(s.jsx(y,{parentNodes:o,childNodes:u,isHighlighted:f,selectedConnections:a,highlightedConnection:l,onRelationshipAnalyze:c,onConnectionHighlight:h},`connector-group-${i}`))}),console.log("[TreeEdges] Generated edges:",{edgeCount:d.length,edgeGroups:u.size}),s.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{zIndex:1},children:d})}function j({opacity:e=.15,scale:t=1}){let r=(0,i.useRef)(null);return s.jsx("div",{ref:r,className:"absolute inset-0 overflow-hidden pointer-events-none",style:{opacity:e,transform:`scale(${t})`,transformOrigin:"center center"}})}function w({opacity:e=.08,density:t=1}){let r=(0,i.useRef)(null);return s.jsx("svg",{ref:r,className:"absolute inset-0 w-full h-full pointer-events-none text-slate-400 dark:text-slate-600",style:{opacity:e},preserveAspectRatio:"none",viewBox:"0 0 100 100"})}var N=r(24118),C=r(76557);let k=(0,C.Z)("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function T(){let[e,t]=(0,i.useState)(!1);return s.jsx(N.Vq,{open:e,onOpenChange:t,children:(0,s.jsxs)(N.cZ,{className:"max-w-2xl max-h-[85vh] flex flex-col z-[9999]",children:[(0,s.jsxs)(N.fK,{className:"flex-shrink-0",children:[(0,s.jsxs)(N.$N,{className:"flex items-center gap-2",children:[s.jsx(k,{className:"h-5 w-5"}),"Family Tree Help & Shortcuts"]}),s.jsx(N.Be,{children:"Learn how to navigate and interact with your family tree using mouse, touch, and keyboard controls"})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-4 py-4 pr-2",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium text-sm flex items-center gap-2",children:"\uD83D\uDDB1ï¸ Mouse Controls"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-muted-foreground pl-2",children:[(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Click & Drag:"})," Pan around the tree"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Mouse Wheel:"})," Zoom in and out"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Click Member:"})," View member details"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Shift+Click Member:"})," Trace lineage to root(s)"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Double-Click Connector:"})," Trace ancestry path"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Triple-Click Connector:"})," Analyze relationship"]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium text-sm flex items-center gap-2",children:"\uD83D\uDCF1 Touch Controls"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-muted-foreground pl-2",children:[(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Touch & Drag:"})," Pan around the tree"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Pinch:"})," Zoom in and out"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Tap Member:"})," View member details"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Tap Again (after 1s):"})," Deselect member"]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium text-sm flex items-center gap-2",children:"\uD83C\uDF9Bï¸ Canvas Controls"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-muted-foreground pl-2",children:[(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Shift + +:"})," Zoom in"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Shift + _:"})," Zoom out"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Shift + 0:"})," Reset zoom and center view"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Shift + Alt + C:"})," Center view"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Shift + F:"})," Toggle fullscreen mode"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Shift + H:"})," Show this help dialog"]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium text-sm flex items-center gap-2",children:"\uD83E\uDDED Navigation Shortcuts"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-muted-foreground pl-2",children:[(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Shift + Alt + H:"})," Go to Home"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Shift + Alt + T:"})," Go to Trees"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Shift + Alt + E:"})," Go to Events"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Shift + Alt + G:"})," Go to Gallery"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Shift + Alt + R:"})," Go to Relationships"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Shift + Alt + M:"})," Go to Members"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Shift + Alt + I:"})," Go to Invites"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Shift + /:"})," Focus search bar"]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium text-sm flex items-center gap-2",children:"\uD83D\uDD0D Traceability Features"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-muted-foreground pl-2",children:[(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Shift+Click Member Card:"})," Highlights complete ancestry path to root (amber)"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Double-Click Connector:"})," Traces lineage from child to root (10s highlight)"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Triple-Click Connector:"})," Opens relationship analyzer dialog"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Tap-to-Deselect:"})," Click selected member after 1s to close drawer"]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium text-sm flex items-center gap-2",children:"\uD83D\uDC65 Family Connections"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-muted-foreground pl-2",children:[(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Green Lines:"})," Show parent-child relationships"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Amber Lines:"})," Highlighted ancestry paths"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Blue Lines:"})," Selected relationships"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Heart Icons:"})," Indicate married couples"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Generations:"})," Arranged top to bottom"]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium text-sm flex items-center gap-2",children:"\uD83C\uDFA8 Visual Elements"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-muted-foreground pl-2",children:[(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Background Animation:"})," Phylogenetic branches and DNA helixes"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Member Highlights:"})," Blue ring (selected), Amber ring (traced ancestry)"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Color Coding:"})," Blue (male), Pink (female), Purple (other)"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Deceased Members:"})," Slightly transparent with strikethrough name"]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium text-sm flex items-center gap-2",children:"\uD83D\uDCA1 Tips"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-muted-foreground pl-2",children:[s.jsx("li",{children:"â€¢ Use fullscreen mode (Shift+F) for large families"}),s.jsx("li",{children:"â€¢ Shift+Click any member to see their complete ancestry path"}),s.jsx("li",{children:"â€¢ Double-click connectors to trace lineage from that point"}),s.jsx("li",{children:"â€¢ Follow the curved lines to trace relationships"}),s.jsx("li",{children:"â€¢ The tree automatically centers on first load"}),s.jsx("li",{children:"â€¢ Zoom out to see the full family structure"}),s.jsx("li",{children:"â€¢ Search bar supports member names and emails"}),s.jsx("li",{children:"â€¢ Press Shift+? to see all keyboard shortcuts in detail"}),s.jsx("li",{children:"â€¢ Keyboard shortcuts disabled while typing in input fields"})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium text-sm flex items-center gap-2",children:"\uD83D\uDD27 General"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-muted-foreground pl-2",children:[(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Esc:"})," Close dialogs and exit fullscreen"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Shift + ?:"})," Show complete keyboard shortcuts reference"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Shift + Alt + N:"})," Go to Notifications"]}),(0,s.jsxs)("li",{children:["â€¢ ",s.jsx("strong",{children:"Shift + Alt + P:"})," Go to Profile"]})]})]})]}),s.jsx("div",{className:"flex justify-end pt-4 border-t flex-shrink-0",children:s.jsx("button",{className:"rounded-md bg-slate-900 px-4 py-2 text-sm text-white hover:bg-slate-800 dark:bg-slate-50 dark:text-slate-900 dark:hover:bg-slate-200 transition-colors",onClick:()=>t(!1),children:"Got it!"})})]})})}function S(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var E,P,A,D,O,F,I,z,$,R,B,L={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Z={duration:.5,overwrite:!1,delay:0},Y=2*Math.PI,X=Y/4,U=0,q=Math.sqrt,V=Math.cos,G=Math.sin,Q=function(e){return"string"==typeof e},H=function(e){return"function"==typeof e},W=function(e){return"number"==typeof e},K=function(e){return void 0===e},J=function(e){return"object"==typeof e},ee=function(e){return!1!==e},et=function(){return"undefined"!=typeof window},er=function(e){return H(e)||Q(e)},es="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},ei=Array.isArray,en=/(?:-?\.?\d|\.)+/gi,ea=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,el=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,eo=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,ed=/[+-]=-?[.\d]+/,ec=/[^,'"\[\]\s]+/gi,eh=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,eu={},em={},ep=function(e){return(em=eX(e,eu))&&rA},ef=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},ex=function(e,t){return!t&&console.warn(e)},eg=function(e,t){return e&&(eu[e]=t)&&em&&(em[e]=t)||eu},ev=function(){return 0},e_={suppressEvents:!0,isStart:!0,kill:!1},ey={suppressEvents:!0,kill:!1},eb={suppressEvents:!0},ej={},ew=[],eN={},eC={},ek={},eT=30,eS=[],eM="",eE=function(e){var t,r,s=e[0];if(J(s)||H(s)||(e=[e]),!(t=(s._gsap||{}).harness)){for(r=eS.length;r--&&!eS[r].targetTest(s););t=eS[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new tK(e[r],t)))||e.splice(r,1);return e},eP=function(e){return e._gsap||eE(tp(e))[0]._gsap},eA=function(e,t,r){return(r=e[t])&&H(r)?e[t]():K(r)&&e.getAttribute&&e.getAttribute(t)||r},eD=function(e,t){return(e=e.split(",")).forEach(t)||e},eO=function(e){return Math.round(1e5*e)/1e5||0},eF=function(e){return Math.round(1e7*e)/1e7||0},eI=function(e,t){var r=t.charAt(0),s=parseFloat(t.substr(2));return e=parseFloat(e),"+"===r?e+s:"-"===r?e-s:"*"===r?e*s:e/s},ez=function(e,t){for(var r=t.length,s=0;0>e.indexOf(t[s])&&++s<r;);return s<r},e$=function(){var e,t,r=ew.length,s=ew.slice(0);for(e=0,eN={},ew.length=0;e<r;e++)(t=s[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},eR=function(e){return!!(e._initted||e._startAt||e.add)},eB=function(e,t,r,s){ew.length&&!P&&e$(),e.render(t,r,s||!!(P&&t<0&&eR(e))),ew.length&&!P&&e$()},eL=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(ec).length<2?t:Q(e)?e.trim():e},eZ=function(e){return e},eY=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},eX=function(e,t){for(var r in t)e[r]=t[r];return e},eU=function e(t,r){for(var s in r)"__proto__"!==s&&"constructor"!==s&&"prototype"!==s&&(t[s]=J(r[s])?e(t[s]||(t[s]={}),r[s]):r[s]);return t},eq=function(e,t){var r,s={};for(r in e)r in t||(s[r]=e[r]);return s},eV=function(e){var t,r=e.parent||D,s=e.keyframes?(t=ei(e.keyframes),function(e,r){for(var s in r)s in e||"duration"===s&&t||"ease"===s||(e[s]=r[s])}):eY;if(ee(e.inherit))for(;r;)s(e,r.vars.defaults),r=r.parent||r._dp;return e},eG=function(e,t){for(var r=e.length,s=r===t.length;s&&r--&&e[r]===t[r];);return r<0},eQ=function(e,t,r,s,i){void 0===r&&(r="_first"),void 0===s&&(s="_last");var n,a=e[s];if(i)for(n=t[i];a&&a[i]>n;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[s]=t,t._prev=a,t.parent=t._dp=e,t},eH=function(e,t,r,s){void 0===r&&(r="_first"),void 0===s&&(s="_last");var i=t._prev,n=t._next;i?i._next=n:e[r]===t&&(e[r]=n),n?n._prev=i:e[s]===t&&(e[s]=i),t._next=t._prev=t.parent=null},eW=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},eK=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},eJ=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},e0=function(e,t,r,s){return e._startAt&&(P?e._startAt.revert(ey):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,s))},e1=function(e){return e._repeat?e2(e._tTime,e=e.duration()+e._rDelay)*e:0},e2=function(e,t){var r=Math.floor(e=eF(e/t));return e&&r===e?r-1:r},e5=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},e4=function(e){return e._end=eF(e._start+(e._tDur/Math.abs(e._ts||e._rts||1e-8)||0))},e3=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=eF(r._time-(e._ts>0?t/e._ts:-(((e._dirty?e.totalDuration():e._tDur)-t)/e._ts))),e4(e),r._dirty||eK(r,e)),e},e8=function(e,t){var r;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(r=e5(e.rawTime(),t),(!t._dur||tc(0,t.totalDuration(),r)-t._tTime>1e-8)&&t.render(r,!0)),eK(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-.00000001}},e9=function(e,t,r,s){return t.parent&&eW(t),t._start=eF((W(r)?r:r||e!==D?tl(e,r,t):e._time)+t._delay),t._end=eF(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),eQ(e,t,"_first","_last",e._sort?"_start":0),tt(t)||(e._recent=t),s||e8(e,t),e._ts<0&&e3(e,e._tTime),e},e6=function(e,t){return(eu.ScrollTrigger||ef("scrollTrigger",t))&&eu.ScrollTrigger.create(t,e)},e7=function(e,t,r,s,i){return(t9(e,t,i),e._initted)?!r&&e._pt&&!P&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&$!==tz.frame?(ew.push(e),e._lazy=[i,s],1):void 0:1},te=function e(t){var r=t.parent;return r&&r._ts&&r._initted&&!r._lock&&(0>r.rawTime()||e(r))},tt=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},tr=function(e,t,r,s){var i,n,a,l=e.ratio,o=t<0||!t&&(!e._start&&te(e)&&!(!e._initted&&tt(e))||(e._ts<0||e._dp._ts<0)&&!tt(e))?0:1,d=e._rDelay,c=0;if(d&&e._repeat&&(n=e2(c=tc(0,e._tDur,t),d),e._yoyo&&1&n&&(o=1-o),n!==e2(e._tTime,d)&&(l=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==l||P||s||1e-8===e._zTime||!t&&e._zTime){if(!e._initted&&e7(e,t,s,r,c))return;for(a=e._zTime,e._zTime=t||(r?1e-8:0),r||(r=t&&!a),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=c,i=e._pt;i;)i.r(o,i.d),i=i._next;t<0&&e0(e,t,r,!0),e._onUpdate&&!r&&tC(e,"onUpdate"),c&&e._repeat&&!r&&e.parent&&tC(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&eW(e,1),r||P||(tC(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},ts=function(e,t,r){var s;if(r>t)for(s=e._first;s&&s._start<=r;){if("isPause"===s.data&&s._start>t)return s;s=s._next}else for(s=e._last;s&&s._start>=r;){if("isPause"===s.data&&s._start<t)return s;s=s._prev}},ti=function(e,t,r,s){var i=e._repeat,n=eF(t)||0,a=e._tTime/e._tDur;return a&&!s&&(e._time*=n/e._dur),e._dur=n,e._tDur=i?i<0?1e10:eF(n*(i+1)+e._rDelay*i):n,a>0&&!s&&e3(e,e._tTime=e._tDur*a),e.parent&&e4(e),r||eK(e.parent,e),e},tn=function(e){return e instanceof t0?eK(e):ti(e,e._dur)},ta={_start:0,endTime:ev,totalDuration:ev},tl=function e(t,r,s){var i,n,a,l=t.labels,o=t._recent||ta,d=t.duration()>=1e8?o.endTime(!1):t._dur;return Q(r)&&(isNaN(r)||r in l)?(n=r.charAt(0),a="%"===r.substr(-1),i=r.indexOf("="),"<"===n||">"===n)?(i>=0&&(r=r.replace(/=/,"")),("<"===n?o._start:o.endTime(o._repeat>=0))+(parseFloat(r.substr(1))||0)*(a?(i<0?o:s).totalDuration()/100:1)):i<0?(r in l||(l[r]=d),l[r]):(n=parseFloat(r.charAt(i-1)+r.substr(i+1)),a&&s&&(n=n/100*(ei(s)?s[0]:s).totalDuration()),i>1?e(t,r.substr(0,i-1),s)+n:d+n):null==r?d:+r},to=function(e,t,r){var s,i,n=W(t[1]),a=(n?2:1)+(e<2?0:1),l=t[a];if(n&&(l.duration=t[1]),l.parent=r,e){for(s=l,i=r;i&&!("immediateRender"in s);)s=i.vars.defaults||{},i=ee(i.vars.inherit)&&i.parent;l.immediateRender=ee(s.immediateRender),e<2?l.runBackwards=1:l.startAt=t[a-1]}return new ri(t[0],l,t[a+1])},td=function(e,t){return e||0===e?t(e):t},tc=function(e,t,r){return r<e?e:r>t?t:r},th=function(e,t){return Q(e)&&(t=eh.exec(e))?t[1]:""},tu=[].slice,tm=function(e,t){return e&&J(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&J(e[0]))&&!e.nodeType&&e!==O},tp=function(e,t,r){var s;return A&&!t&&A.selector?A.selector(e):Q(e)&&!r&&(F||!t$())?tu.call((t||I).querySelectorAll(e),0):ei(e)?(void 0===s&&(s=[]),e.forEach(function(e){var t;return Q(e)&&!r||tm(e,1)?(t=s).push.apply(t,tp(e)):s.push(e)})||s):tm(e)?tu.call(e,0):e?[e]:[]},tf=function(e){return e=tp(e)[0]||ex("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return tp(t,r.querySelectorAll?r:r===e?ex("Invalid scope")||I.createElement("div"):e)}},tx=function(e){return e.sort(function(){return .5-Math.random()})},tg=function(e){if(H(e))return e;var t=J(e)?e:{each:e},r=tV(t.ease),s=t.from||0,i=parseFloat(t.base)||0,n={},a=s>0&&s<1,l=isNaN(s)||a,o=t.axis,d=s,c=s;return Q(s)?d=c=({center:.5,edges:.5,end:1})[s]||0:!a&&l&&(d=s[0],c=s[1]),function(e,a,h){var u,m,p,f,x,g,v,_,y,b=(h||t).length,j=n[b];if(!j){if(!(y="auto"===t.grid?0:(t.grid||[1,1e8])[1])){for(v=-1e8;v<(v=h[y++].getBoundingClientRect().left)&&y<b;);y<b&&y--}for(g=0,j=n[b]=[],u=l?Math.min(y,b)*d-.5:s%y,m=1e8===y?0:l?b*c/y-.5:s/y|0,v=0,_=1e8;g<b;g++)p=g%y-u,f=m-(g/y|0),j[g]=x=o?Math.abs("y"===o?f:p):q(p*p+f*f),x>v&&(v=x),x<_&&(_=x);"random"===s&&tx(j),j.max=v-_,j.min=_,j.v=b=(parseFloat(t.amount)||parseFloat(t.each)*(y>b?b-1:o?"y"===o?b/y:y:Math.max(y,b/y))||0)*("edges"===s?-1:1),j.b=b<0?i-b:i,j.u=th(t.amount||t.each)||0,r=r&&b<0?tU(r):r}return b=(j[e]-j.min)/j.max||0,eF(j.b+(r?r(b):b)*j.v)+j.u}},tv=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var s=eF(Math.round(parseFloat(r)/e)*e*t);return(s-s%1)/t+(W(r)?0:th(r))}},t_=function(e,t){var r,s,i=ei(e);return!i&&J(e)&&(r=i=e.radius||1e8,e.values?(s=!W((e=tp(e.values))[0]))&&(r*=r):e=tv(e.increment)),td(t,i?H(e)?function(t){return Math.abs((s=e(t))-t)<=r?s:t}:function(t){for(var i,n,a=parseFloat(s?t.x:t),l=parseFloat(s?t.y:0),o=1e8,d=0,c=e.length;c--;)(i=s?(i=e[c].x-a)*i+(n=e[c].y-l)*n:Math.abs(e[c]-a))<o&&(o=i,d=c);return d=!r||o<=r?e[d]:t,s||d===t||W(t)?d:d+th(t)}:tv(e))},ty=function(e,t,r,s){return td(ei(e)?!t:!0===r?(r=0,!1):!s,function(){return ei(e)?e[~~(Math.random()*e.length)]:(s=(r=r||1e-5)<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+.99*r))/r)*r*s)/s})},tb=function(e,t,r){return td(r,function(r){return e[~~t(r)]})},tj=function(e){for(var t,r,s,i,n=0,a="";~(t=e.indexOf("random(",n));)s=e.indexOf(")",t),i="["===e.charAt(t+7),r=e.substr(t+7,s-t-7).match(i?ec:en),a+=e.substr(n,t-n)+ty(i?r:+r[0],i?0:+r[1],+r[2]||1e-5),n=s+1;return a+e.substr(n,e.length-n)},tw=function(e,t,r,s,i){var n=t-e,a=s-r;return td(i,function(t){return r+((t-e)/n*a||0)})},tN=function(e,t,r){var s,i,n,a=e.labels,l=1e8;for(s in a)(i=a[s]-t)<0==!!r&&i&&l>(i=Math.abs(i))&&(n=s,l=i);return n},tC=function(e,t,r){var s,i,n,a=e.vars,l=a[t],o=A,d=e._ctx;if(l)return s=a[t+"Params"],i=a.callbackScope||e,r&&ew.length&&e$(),d&&(A=d),n=s?l.apply(i,s):l.call(i),A=o,n},tk=function(e){return eW(e),e.scrollTrigger&&e.scrollTrigger.kill(!!P),1>e.progress()&&tC(e,"onInterrupt"),e},tT=[],tS=function(e){if(e){if(e=!e.name&&e.default||e,et()||e.headless){var t=e.name,r=H(e),s=t&&!r&&e.init?function(){this._props=[]}:e,i={init:ev,render:rm,add:t4,kill:rf,modifier:rp,rawVars:0},n={targetTest:0,get:0,getSetter:rd,aliases:{},register:0};if(t$(),e!==s){if(eC[t])return;eY(s,eY(eq(e,i),n)),eX(s.prototype,eX(i,eq(e,n))),eC[s.prop=t]=s,e.targetTest&&(eS.push(s),ej[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}eg(t,s),e.register&&e.register(rA,s,rv)}else tT.push(e)}},tM={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},tE=function(e,t,r){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(r-t)*e*6:e<.5?r:3*e<2?t+(r-t)*(2/3-e)*6:t)*255+.5|0},tP=function(e,t,r){var s,i,n,a,l,o,d,c,h,u,m=e?W(e)?[e>>16,e>>8&255,255&e]:0:tM.black;if(!m){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),tM[e])m=tM[e];else if("#"===e.charAt(0)){if(e.length<6&&(e="#"+(s=e.charAt(1))+s+(i=e.charAt(2))+i+(n=e.charAt(3))+n+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(m=parseInt(e.substr(1,6),16))>>16,m>>8&255,255&m,parseInt(e.substr(7),16)/255];m=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]}else if("hsl"===e.substr(0,3)){if(m=u=e.match(en),t){if(~e.indexOf("="))return m=e.match(ea),r&&m.length<4&&(m[3]=1),m}else a=+m[0]%360/360,l=+m[1]/100,i=(o=+m[2]/100)<=.5?o*(l+1):o+l-o*l,s=2*o-i,m.length>3&&(m[3]*=1),m[0]=tE(a+1/3,s,i),m[1]=tE(a,s,i),m[2]=tE(a-1/3,s,i)}else m=e.match(en)||tM.transparent;m=m.map(Number)}return t&&!u&&(o=((d=Math.max(s=m[0]/255,i=m[1]/255,n=m[2]/255))+(c=Math.min(s,i,n)))/2,d===c?a=l=0:(h=d-c,l=o>.5?h/(2-d-c):h/(d+c),a=(d===s?(i-n)/h+(i<n?6:0):d===i?(n-s)/h+2:(s-i)/h+4)*60),m[0]=~~(a+.5),m[1]=~~(100*l+.5),m[2]=~~(100*o+.5)),r&&m.length<4&&(m[3]=1),m},tA=function(e){var t=[],r=[],s=-1;return e.split(tO).forEach(function(e){var i=e.match(el)||[];t.push.apply(t,i),r.push(s+=i.length+1)}),t.c=r,t},tD=function(e,t,r){var s,i,n,a,l="",o=(e+l).match(tO),d=t?"hsla(":"rgba(",c=0;if(!o)return e;if(o=o.map(function(e){return(e=tP(e,t,1))&&d+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"}),r&&(n=tA(e),(s=r.c).join(l)!==n.c.join(l)))for(a=(i=e.replace(tO,"1").split(el)).length-1;c<a;c++)l+=i[c]+(~s.indexOf(c)?o.shift()||d+"0,0,0,0)":(n.length?n:o.length?o:r).shift());if(!i)for(a=(i=e.split(tO)).length-1;c<a;c++)l+=i[c]+o[c];return l+i[a]},tO=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in tM)t+="|"+e+"\\b";return RegExp(t+")","gi")}(),tF=/hsl[a]?\(/,tI=function(e){var t,r=e.join(" ");if(tO.lastIndex=0,tO.test(r))return t=tF.test(r),e[1]=tD(e[1],t),e[0]=tD(e[0],t,tA(e[1])),!0},tz=function(){var e,t,r,s,i,n,a=Date.now,l=500,o=33,d=a(),c=d,h=1e3/240,u=1e3/240,m=[],p=function r(p){var f,x,g,v,_=a()-c,y=!0===p;if((_>l||_<0)&&(d+=_-o),c+=_,((f=(g=c-d)-u)>0||y)&&(v=++s.frame,i=g-1e3*s.time,s.time=g/=1e3,u+=f+(f>=h?4:h-f),x=1),y||(e=t(r)),x)for(n=0;n<m.length;n++)m[n](g,i,v,p)};return s={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(e){return i/(1e3/(e||60))},wake:function(){z&&(!F&&et()&&(I=(O=F=window).document||{},eu.gsap=rA,(O.gsapVersions||(O.gsapVersions=[])).push(rA.version),ep(em||O.GreenSockGlobals||!O.gsap&&O||{}),tT.forEach(tS)),r="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,e&&s.sleep(),t=r||function(e){return setTimeout(e,u-1e3*s.time+1|0)},B=1,p(2))},sleep:function(){(r?cancelAnimationFrame:clearTimeout)(e),B=0,t=ev},lagSmoothing:function(e,t){o=Math.min(t||33,l=e||1/0)},fps:function(e){h=1e3/(e||240),u=1e3*s.time+h},add:function(e,t,r){var i=t?function(t,r,n,a){e(t,r,n,a),s.remove(i)}:e;return s.remove(e),m[r?"unshift":"push"](i),t$(),i},remove:function(e,t){~(t=m.indexOf(e))&&m.splice(t,1)&&n>=t&&n--},_listeners:m}}(),t$=function(){return!B&&tz.wake()},tR={},tB=/^[\d.\-M][\d.\-,\s]/,tL=/["']/g,tZ=function(e){for(var t,r,s,i={},n=e.substr(1,e.length-3).split(":"),a=n[0],l=1,o=n.length;l<o;l++)r=n[l],t=l!==o-1?r.lastIndexOf(","):r.length,s=r.substr(0,t),i[a]=isNaN(s)?s.replace(tL,"").trim():+s,a=r.substr(t+1).trim();return i},tY=function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),s=e.indexOf("(",t);return e.substring(t,~s&&s<r?e.indexOf(")",r+1):r)},tX=function(e){var t=(e+"").split("("),r=tR[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[tZ(t[1])]:tY(e).split(",").map(eL)):tR._CE&&tB.test(e)?tR._CE("",e):r},tU=function(e){return function(t){return 1-e(1-t)}},tq=function e(t,r){for(var s,i=t._first;i;)i instanceof t0?e(i,r):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===r||(i.timeline?e(i.timeline,r):(s=i._ease,i._ease=i._yEase,i._yEase=s,i._yoyo=r)),i=i._next},tV=function(e,t){return e&&(H(e)?e:tR[e]||tX(e))||t},tG=function(e,t,r,s){void 0===r&&(r=function(e){return 1-t(1-e)}),void 0===s&&(s=function(e){return e<.5?t(2*e)/2:1-t((1-e)*2)/2});var i,n={easeIn:t,easeOut:r,easeInOut:s};return eD(e,function(e){for(var t in tR[e]=eu[e]=n,tR[i=e.toLowerCase()]=r,n)tR[i+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=tR[e+"."+t]=n[t]}),n},tQ=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e((t-.5)*2)/2}},tH=function e(t,r,s){var i=r>=1?r:1,n=(s||(t?.3:.45))/(r<1?r:1),a=n/Y*(Math.asin(1/i)||0),l=function(e){return 1===e?1:i*Math.pow(2,-10*e)*G((e-a)*n)+1},o="out"===t?l:"in"===t?function(e){return 1-l(1-e)}:tQ(l);return n=Y/n,o.config=function(r,s){return e(t,r,s)},o},tW=function e(t,r){void 0===r&&(r=1.70158);var s=function(e){return e?--e*e*((r+1)*e+r)+1:0},i="out"===t?s:"in"===t?function(e){return 1-s(1-e)}:tQ(s);return i.config=function(r){return e(t,r)},i};eD("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var r=t<5?t+1:t;tG(e+",Power"+(r-1),t?function(e){return Math.pow(e,r)}:function(e){return e},function(e){return 1-Math.pow(1-e,r)},function(e){return e<.5?Math.pow(2*e,r)/2:1-Math.pow((1-e)*2,r)/2})}),tR.Linear.easeNone=tR.none=tR.Linear.easeIn,tG("Elastic",tH("in"),tH("out"),tH()),function(e,t){var r=1/2.75,s=1/2.75*2,i=1/2.75*2.5,n=function(n){return n<r?7.5625*n*n:n<s?7.5625*Math.pow(n-1.5/2.75,2)+.75:n<i?7.5625*(n-=2.25/2.75)*n+.9375:e*Math.pow(n-2.625/t,2)+.984375};tG("Bounce",function(e){return 1-n(1-e)},n)}(7.5625,2.75),tG("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)}),tG("Circ",function(e){return-(q(1-e*e)-1)}),tG("Sine",function(e){return 1===e?1:-V(e*X)+1}),tG("Back",tW("in"),tW("out"),tW()),tR.SteppedEase=tR.steps=eu.SteppedEase={config:function(e,t){void 0===e&&(e=1);var r=1/e,s=e+(t?0:1),i=t?1:0;return function(e){return((s*tc(0,.99999999,e)|0)+i)*r}}},Z.ease=tR["quad.out"],eD("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return eM+=e+","+e+"Params,"});var tK=function(e,t){this.id=U++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:eA,this.set=t?t.getSetter:rd},tJ=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,ti(this,+e.duration,1,1),this.data=e.data,A&&(this._ctx=A,A.data.push(this)),B||tz.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,ti(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(t$(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(e3(this,e),!r._dp||r.parent||e8(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:-((r.totalDuration()-r._tTime)/r._ts))&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&e9(this._dp,this,this._start-this._delay)}return this._tTime===e&&(this._dur||t)&&(!this._initted||1e-8!==Math.abs(this._zTime))&&(e||this._initted||!this.add&&!this._ptLookup)||(this._ts||(this._pTime=e),eB(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+e1(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(1&this.iteration())?1-e:e)+e1(this),t):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(e,t){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*r,t):this._repeat?e2(this._tTime,r)+1:1},t.timeScale=function(e,t){if(!arguments.length)return -.00000001===this._rts?0:this._rts;if(this._rts===e)return this;var r=this.parent&&this._ts?e5(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-.00000001===e?0:this._rts,this.totalTime(tc(-Math.abs(this._delay),this.totalDuration(),r),!1!==t),e4(this),eJ(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(t$(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&1e-8!==Math.abs(this._zTime)&&(this._tTime-=1e-8)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&e9(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(ee(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&1>this.totalProgress())?this._tTime%(this._dur+this._rDelay):this._ts?e5(t.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){void 0===e&&(e=eb);var t=P;return P=e,eR(this)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),"nested"!==this.data&&!1!==e.kill&&this.kill(),P=t,this},t.globalTime=function(e){for(var t=this,r=arguments.length?e:t.rawTime();t;)r=t._start+r/(Math.abs(t._ts)||1),t=t._dp;return!this.parent&&this._sat?this._sat.globalTime(e):r},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,tn(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,tn(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(tl(this,e),ee(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,ee(t)),this._dur||(this._zTime=-.00000001),this},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-.00000001:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-.00000001,this},t.isActive=function(){var e,t=this.parent||this._dp,r=this._start;return!!(!t||this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=r&&e<this.endTime(!0)-1e-8)},t.eventCallback=function(e,t,r){var s=this.vars;return arguments.length>1?(t?(s[e]=t,r&&(s[e+"Params"]=r),"onUpdate"===e&&(this._onUpdate=t)):delete s[e],this):s[e]},t.then=function(e){var t=this;return new Promise(function(r){var s=H(e)?e:eZ,i=function(){var e=t.then;t.then=null,H(s)&&(s=s(t))&&(s.then||s===t)&&(t.then=e),r(s),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?i():t._prom=i})},t.kill=function(){tk(this)},e}();eY(tJ.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-.00000001,_prom:0,_ps:!1,_rts:1});var t0=function(e){function t(t,r){var s;return void 0===t&&(t={}),(s=e.call(this,t)||this).labels={},s.smoothChildTiming=!!t.smoothChildTiming,s.autoRemoveChildren=!!t.autoRemoveChildren,s._sort=ee(t.sortChildren),D&&e9(t.parent||D,S(s),r),t.reversed&&s.reverse(),t.paused&&s.paused(!0),t.scrollTrigger&&e6(S(s),t.scrollTrigger),s}M(t,e);var r=t.prototype;return r.to=function(e,t,r){return to(0,arguments,this),this},r.from=function(e,t,r){return to(1,arguments,this),this},r.fromTo=function(e,t,r,s){return to(2,arguments,this),this},r.set=function(e,t,r){return t.duration=0,t.parent=this,eV(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new ri(e,t,tl(this,r),1),this},r.call=function(e,t,r){return e9(this,ri.delayedCall(0,e,t),r)},r.staggerTo=function(e,t,r,s,i,n,a){return r.duration=t,r.stagger=r.stagger||s,r.onComplete=n,r.onCompleteParams=a,r.parent=this,new ri(e,r,tl(this,i)),this},r.staggerFrom=function(e,t,r,s,i,n,a){return r.runBackwards=1,eV(r).immediateRender=ee(r.immediateRender),this.staggerTo(e,t,r,s,i,n,a)},r.staggerFromTo=function(e,t,r,s,i,n,a,l){return s.startAt=r,eV(s).immediateRender=ee(s.immediateRender),this.staggerTo(e,t,s,i,n,a,l)},r.render=function(e,t,r){var s,i,n,a,l,o,d,c,h,u,m,p,f=this._time,x=this._dirty?this.totalDuration():this._tDur,g=this._dur,v=e<=0?0:eF(e),_=this._zTime<0!=e<0&&(this._initted||!g);if(this!==D&&v>x&&e>=0&&(v=x),v!==this._tTime||r||_){if(f!==this._time&&g&&(v+=this._time-f,e+=this._time-f),s=v,h=this._start,o=!(c=this._ts),_&&(g||(f=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(m=this._yoyo,l=g+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*l+e,t,r);if(s=eF(v%l),v===x?(a=this._repeat,s=g):((a=~~(u=eF(v/l)))&&a===u&&(s=g,a--),s>g&&(s=g)),u=e2(this._tTime,l),!f&&this._tTime&&u!==a&&this._tTime-u*l-this._dur<=0&&(u=a),m&&1&a&&(s=g-s,p=1),a!==u&&!this._lock){var y=m&&1&u,b=y===(m&&1&a);if(a<u&&(y=!y),f=y?0:v%g?g:v,this._lock=1,this.render(f||(p?0:eF(a*l)),t,!g)._lock=0,this._tTime=v,!t&&this.parent&&tC(this,"onRepeat"),this.vars.repeatRefresh&&!p&&(this.invalidate()._lock=1),f&&f!==this._time||!this._ts!==o||this.vars.onRepeat&&!this.parent&&!this._act||(g=this._dur,x=this._tDur,b&&(this._lock=2,f=y?g:-.0001,this.render(f,!0),this.vars.repeatRefresh&&!p&&this.invalidate()),this._lock=0,!this._ts&&!o))return this;tq(this,p)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(d=ts(this,eF(f),eF(s)))&&(v-=s-(s=d._start)),this._tTime=v,this._time=s,this._act=!c,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,f=0),!f&&v&&!t&&!u&&(tC(this,"onStart"),this._tTime!==v))return this;if(s>=f&&e>=0)for(i=this._first;i;){if(n=i._next,(i._act||s>=i._start)&&i._ts&&d!==i){if(i.parent!==this)return this.render(e,t,r);if(i.render(i._ts>0?(s-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(s-i._start)*i._ts,t,r),s!==this._time||!this._ts&&!o){d=0,n&&(v+=this._zTime=-.00000001);break}}i=n}else{i=this._last;for(var j=e<0?e:s;i;){if(n=i._prev,(i._act||j<=i._end)&&i._ts&&d!==i){if(i.parent!==this)return this.render(e,t,r);if(i.render(i._ts>0?(j-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(j-i._start)*i._ts,t,r||P&&eR(i)),s!==this._time||!this._ts&&!o){d=0,n&&(v+=this._zTime=j?-.00000001:1e-8);break}}i=n}}if(d&&!t&&(this.pause(),d.render(s>=f?0:-.00000001)._zTime=s>=f?1:-1,this._ts))return this._start=h,e4(this),this.render(e,t,r);this._onUpdate&&!t&&tC(this,"onUpdate",!0),(v===x&&this._tTime>=this.totalDuration()||!v&&f)&&(h===this._start||Math.abs(c)!==Math.abs(this._ts))&&!this._lock&&((e||!g)&&(v===x&&this._ts>0||!v&&this._ts<0)&&eW(this,1),t||e<0&&!f||!v&&!f&&x||(tC(this,v===x&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(v<x&&this.timeScale()>0)&&this._prom()))}return this},r.add=function(e,t){var r=this;if(W(t)||(t=tl(this,t,e)),!(e instanceof tJ)){if(ei(e))return e.forEach(function(e){return r.add(e,t)}),this;if(Q(e))return this.addLabel(e,t);if(!H(e))return this;e=ri.delayedCall(0,e)}return this!==e?e9(this,e,t):this},r.getChildren=function(e,t,r,s){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===r&&(r=!0),void 0===s&&(s=-1e8);for(var i=[],n=this._first;n;)n._start>=s&&(n instanceof ri?t&&i.push(n):(r&&i.push(n),e&&i.push.apply(i,n.getChildren(!0,t,r)))),n=n._next;return i},r.getById=function(e){for(var t=this.getChildren(1,1,1),r=t.length;r--;)if(t[r].vars.id===e)return t[r]},r.remove=function(e){return Q(e)?this.removeLabel(e):H(e)?this.killTweensOf(e):(e.parent===this&&eH(this,e),e===this._recent&&(this._recent=this._last),eK(this))},r.totalTime=function(t,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=eF(tz.time-(this._ts>0?t/this._ts:-((this.totalDuration()-t)/this._ts)))),e.prototype.totalTime.call(this,t,r),this._forcing=0,this):this._tTime},r.addLabel=function(e,t){return this.labels[e]=tl(this,t),this},r.removeLabel=function(e){return delete this.labels[e],this},r.addPause=function(e,t,r){var s=ri.delayedCall(0,t||ev,r);return s.data="isPause",this._hasPause=1,e9(this,s,tl(this,e))},r.removePause=function(e){var t=this._first;for(e=tl(this,e);t;)t._start===e&&"isPause"===t.data&&eW(t),t=t._next},r.killTweensOf=function(e,t,r){for(var s=this.getTweensOf(e,r),i=s.length;i--;)t1!==s[i]&&s[i].kill(e,t);return this},r.getTweensOf=function(e,t){for(var r,s=[],i=tp(e),n=this._first,a=W(t);n;)n instanceof ri?ez(n._targets,i)&&(a?(!t1||n._initted&&n._ts)&&n.globalTime(0)<=t&&n.globalTime(n.totalDuration())>t:!t||n.isActive())&&s.push(n):(r=n.getTweensOf(i,t)).length&&s.push.apply(s,r),n=n._next;return s},r.tweenTo=function(e,t){t=t||{};var r,s=this,i=tl(s,e),n=t,a=n.startAt,l=n.onStart,o=n.onStartParams,d=n.immediateRender,c=ri.to(s,eY({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:t.duration||Math.abs((i-(a&&"time"in a?a.time:s._time))/s.timeScale())||1e-8,onStart:function(){if(s.pause(),!r){var e=t.duration||Math.abs((i-(a&&"time"in a?a.time:s._time))/s.timeScale());c._dur!==e&&ti(c,e,0,1).render(c._time,!0,!0),r=1}l&&l.apply(c,o||[])}},t));return d?c.render(0):c},r.tweenFromTo=function(e,t,r){return this.tweenTo(t,eY({startAt:{time:tl(this,e)}},r))},r.recent=function(){return this._recent},r.nextLabel=function(e){return void 0===e&&(e=this._time),tN(this,tl(this,e))},r.previousLabel=function(e){return void 0===e&&(e=this._time),tN(this,tl(this,e),1)},r.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+1e-8)},r.shiftChildren=function(e,t,r){void 0===r&&(r=0);for(var s,i=this._first,n=this.labels;i;)i._start>=r&&(i._start+=e,i._end+=e),i=i._next;if(t)for(s in n)n[s]>=r&&(n[s]+=e);return eK(this)},r.invalidate=function(t){var r=this._first;for(this._lock=0;r;)r.invalidate(t),r=r._next;return e.prototype.invalidate.call(this,t)},r.clear=function(e){void 0===e&&(e=!0);for(var t,r=this._first;r;)t=r._next,this.remove(r),r=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),eK(this)},r.totalDuration=function(e){var t,r,s,i=0,n=this._last,a=1e8;if(arguments.length)return this.timeScale((this._repeat<0?this.duration():this.totalDuration())/(this.reversed()?-e:e));if(this._dirty){for(s=this.parent;n;)t=n._prev,n._dirty&&n.totalDuration(),(r=n._start)>a&&this._sort&&n._ts&&!this._lock?(this._lock=1,e9(this,n,r-n._delay,1)._lock=0):a=r,r<0&&n._ts&&(i-=r,(!s&&!this._dp||s&&s.smoothChildTiming)&&(this._start+=r/this._ts,this._time-=r,this._tTime-=r),this.shiftChildren(-r,!1,-Infinity),a=0),n._end>i&&n._ts&&(i=n._end),n=t;ti(this,this===D&&this._time>i?this._time:i,1,1),this._dirty=0}return this._tDur},t.updateRoot=function(e){if(D._ts&&(eB(D,e5(e,D)),$=tz.frame),tz.frame>=eT){eT+=L.autoSleep||120;var t=D._first;if((!t||!t._ts)&&L.autoSleep&&tz._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||tz.sleep()}}},t}(tJ);eY(t0.prototype,{_lock:0,_hasPause:0,_forcing:0});var t1,t2,t5=function(e,t,r,s,i,n,a){var l,o,d,c,h,u,m,p,f=new rv(this._pt,e,t,0,1,ru,null,i),x=0,g=0;for(f.b=r,f.e=s,r+="",s+="",(m=~s.indexOf("random("))&&(s=tj(s)),n&&(n(p=[r,s],e,t),r=p[0],s=p[1]),o=r.match(eo)||[];l=eo.exec(s);)c=l[0],h=s.substring(x,l.index),d?d=(d+1)%5:"rgba("===h.substr(-5)&&(d=1),c!==o[g++]&&(u=parseFloat(o[g-1])||0,f._pt={_next:f._pt,p:h||1===g?h:",",s:u,c:"="===c.charAt(1)?eI(u,c)-u:parseFloat(c)-u,m:d&&d<4?Math.round:0},x=eo.lastIndex);return f.c=x<s.length?s.substring(x,s.length):"",f.fp=a,(ed.test(s)||m)&&(f.e=0),this._pt=f,f},t4=function(e,t,r,s,i,n,a,l,o,d){H(s)&&(s=s(i||0,e,n));var c,h=e[t],u="get"!==r?r:H(h)?o?e[t.indexOf("set")||!H(e["get"+t.substr(3)])?t:"get"+t.substr(3)](o):e[t]():h,m=H(h)?o?rl:ra:rn;if(Q(s)&&(~s.indexOf("random(")&&(s=tj(s)),"="===s.charAt(1)&&((c=eI(u,s)+(th(u)||0))||0===c)&&(s=c)),!d||u!==s||t2)return isNaN(u*s)||""===s?(h||t in e||ef(t,s),t5.call(this,e,t,u,s,m,l||L.stringFilter,o)):(c=new rv(this._pt,e,t,+u||0,s-(u||0),"boolean"==typeof h?rh:rc,0,m),o&&(c.fp=o),a&&c.modifier(a,this,e),this._pt=c)},t3=function(e,t,r,s,i){if(H(e)&&(e=rt(e,i,t,r,s)),!J(e)||e.style&&e.nodeType||ei(e)||es(e))return Q(e)?rt(e,i,t,r,s):e;var n,a={};for(n in e)a[n]=rt(e[n],i,t,r,s);return a},t8=function(e,t,r,s,i,n){var a,l,o,d;if(eC[e]&&!1!==(a=new eC[e]).init(i,a.rawVars?t[e]:t3(t[e],s,i,n,r),r,s,n)&&(r._pt=l=new rv(r._pt,i,e,0,1,a.render,a,0,a.priority),r!==R))for(o=r._ptLookup[r._targets.indexOf(i)],d=a._props.length;d--;)o[a._props[d]]=l;return a},t9=function e(t,r,s){var i,n,a,l,o,d,c,h,u,m,p,f,x,g=t.vars,v=g.ease,_=g.startAt,y=g.immediateRender,b=g.lazy,j=g.onUpdate,w=g.runBackwards,N=g.yoyoEase,C=g.keyframes,k=g.autoRevert,T=t._dur,S=t._startAt,M=t._targets,A=t.parent,O=A&&"nested"===A.data?A.vars.targets:M,F="auto"===t._overwrite&&!E,I=t.timeline;if(!I||C&&v||(v="none"),t._ease=tV(v,Z.ease),t._yEase=N?tU(tV(!0===N?v:N,Z.ease)):0,N&&t._yoyo&&!t._repeat&&(N=t._yEase,t._yEase=t._ease,t._ease=N),t._from=!I&&!!g.runBackwards,!I||C&&!g.stagger){if(f=(h=M[0]?eP(M[0]).harness:0)&&g[h.prop],i=eq(g,ej),S&&(S._zTime<0&&S.progress(1),r<0&&w&&y&&!k?S.render(-1,!0):S.revert(w&&T?ey:e_),S._lazy=0),_){if(eW(t._startAt=ri.set(M,eY({data:"isStart",overwrite:!1,parent:A,immediateRender:!0,lazy:!S&&ee(b),startAt:null,delay:0,onUpdate:j&&function(){return tC(t,"onUpdate")},stagger:0},_))),t._startAt._dp=0,t._startAt._sat=t,r<0&&(P||!y&&!k)&&t._startAt.revert(ey),y&&T&&r<=0&&s<=0){r&&(t._zTime=r);return}}else if(w&&T&&!S){if(r&&(y=!1),a=eY({overwrite:!1,data:"isFromStart",lazy:y&&!S&&ee(b),immediateRender:y,stagger:0,parent:A},i),f&&(a[h.prop]=f),eW(t._startAt=ri.set(M,a)),t._startAt._dp=0,t._startAt._sat=t,r<0&&(P?t._startAt.revert(ey):t._startAt.render(-1,!0)),t._zTime=r,y){if(!r)return}else e(t._startAt,1e-8,1e-8)}for(n=0,t._pt=t._ptCache=0,b=T&&ee(b)||b&&!T;n<M.length;n++){if(c=(o=M[n])._gsap||eE(M)[n]._gsap,t._ptLookup[n]=m={},eN[c.id]&&ew.length&&e$(),p=O===M?n:O.indexOf(o),h&&!1!==(u=new h).init(o,f||i,t,p,O)&&(t._pt=l=new rv(t._pt,o,u.name,0,1,u.render,u,0,u.priority),u._props.forEach(function(e){m[e]=l}),u.priority&&(d=1)),!h||f)for(a in i)eC[a]&&(u=t8(a,i,t,p,o,O))?u.priority&&(d=1):m[a]=l=t4.call(t,o,a,"get",i[a],p,O,0,g.stringFilter);t._op&&t._op[n]&&t.kill(o,t._op[n]),F&&t._pt&&(t1=t,D.killTweensOf(o,m,t.globalTime(r)),x=!t.parent,t1=0),t._pt&&b&&(eN[c.id]=1)}d&&rg(t),t._onInit&&t._onInit(t)}t._onUpdate=j,t._initted=(!t._op||t._pt)&&!x,C&&r<=0&&I.render(1e8,!0,!0)},t6=function(e,t,r,s,i,n,a,l){var o,d,c,h,u=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!u)for(u=e._ptCache[t]=[],c=e._ptLookup,h=e._targets.length;h--;){if((o=c[h][t])&&o.d&&o.d._pt)for(o=o.d._pt;o&&o.p!==t&&o.fp!==t;)o=o._next;if(!o)return t2=1,e.vars[t]="+=0",t9(e,a),t2=0,l?ex(t+" not eligible for reset"):1;u.push(o)}for(h=u.length;h--;)(o=(d=u[h])._pt||d).s=(s||0===s)&&!i?s:o.s+(s||0)+n*o.c,o.c=r-o.s,d.e&&(d.e=eO(r)+th(d.e)),d.b&&(d.b=o.s+th(d.b))},t7=function(e,t){var r,s,i,n,a=e[0]?eP(e[0]).harness:0,l=a&&a.aliases;if(!l)return t;for(s in r=eX({},t),l)if(s in r)for(i=(n=l[s].split(",")).length;i--;)r[n[i]]=r[s];return r},re=function(e,t,r,s){var i,n,a=t.ease||s||"power1.inOut";if(ei(t))n=r[e]||(r[e]=[]),t.forEach(function(e,r){return n.push({t:r/(t.length-1)*100,v:e,e:a})});else for(i in t)n=r[i]||(r[i]=[]),"ease"===i||n.push({t:parseFloat(e),v:t[i],e:a})},rt=function(e,t,r,s,i){return H(e)?e.call(t,r,s,i):Q(e)&&~e.indexOf("random(")?tj(e):e},rr=eM+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",rs={};eD(rr+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return rs[e]=1});var ri=function(e){function t(t,r,s,i){"number"==typeof r&&(s.duration=r,r=s,s=null);var n,a,l,o,d,c,h,u,m,p=(n=e.call(this,i?r:eV(r))||this).vars,f=p.duration,x=p.delay,g=p.immediateRender,v=p.stagger,_=p.overwrite,y=p.keyframes,b=p.defaults,j=p.scrollTrigger,w=p.yoyoEase,N=r.parent||D,C=(ei(t)||es(t)?W(t[0]):"length"in r)?[t]:tp(t);if(n._targets=C.length?eE(C):ex("GSAP target "+t+" not found. https://gsap.com",!L.nullTargetWarn)||[],n._ptLookup=[],n._overwrite=_,y||v||er(f)||er(x)){if(r=n.vars,(a=n.timeline=new t0({data:"nested",defaults:b||{},targets:N&&"nested"===N.data?N.vars.targets:C})).kill(),a.parent=a._dp=S(n),a._start=0,v||er(f)||er(x)){if(d=C.length,u=v&&tg(v),J(v))for(c in v)~rr.indexOf(c)&&(m||(m={}),m[c]=v[c]);for(l=0;l<d;l++)(o=eq(r,rs)).stagger=0,w&&(o.yoyoEase=w),m&&eX(o,m),h=C[l],o.duration=+rt(f,S(n),l,h,C),o.delay=(+rt(x,S(n),l,h,C)||0)-n._delay,!v&&1===d&&o.delay&&(n._delay=x=o.delay,n._start+=x,o.delay=0),a.to(h,o,u?u(l,h,C):0),a._ease=tR.none;a.duration()?f=x=0:n.timeline=0}else if(y){eV(eY(a.vars.defaults,{ease:"none"})),a._ease=tV(y.ease||r.ease||"none");var k,T,M,P=0;if(ei(y))y.forEach(function(e){return a.to(C,e,">")}),a.duration();else{for(c in o={},y)"ease"===c||"easeEach"===c||re(c,y[c],o,y.easeEach);for(c in o)for(l=0,k=o[c].sort(function(e,t){return e.t-t.t}),P=0;l<k.length;l++)(M={ease:(T=k[l]).e,duration:(T.t-(l?k[l-1].t:0))/100*f})[c]=T.v,a.to(C,M,P),P+=M.duration;a.duration()<f&&a.to({},{duration:f-a.duration()})}}f||n.duration(f=a.duration())}else n.timeline=0;return!0!==_||E||(t1=S(n),D.killTweensOf(C),t1=0),e9(N,S(n),s),r.reversed&&n.reverse(),r.paused&&n.paused(!0),(g||!f&&!y&&n._start===eF(N._time)&&ee(g)&&function e(t){return!t||t._ts&&e(t.parent)}(S(n))&&"nested"!==N.data)&&(n._tTime=-.00000001,n.render(Math.max(0,-x)||0)),j&&e6(S(n),j),n}M(t,e);var r=t.prototype;return r.render=function(e,t,r){var s,i,n,a,l,o,d,c,h,u=this._time,m=this._tDur,p=this._dur,f=e<0,x=e>m-1e-8&&!f?m:e<1e-8?0:e;if(p){if(x!==this._tTime||!e||r||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==f||this._lazy){if(s=x,c=this.timeline,this._repeat){if(a=p+this._rDelay,this._repeat<-1&&f)return this.totalTime(100*a+e,t,r);if(s=eF(x%a),x===m?(n=this._repeat,s=p):(n=~~(l=eF(x/a)))&&n===l?(s=p,n--):s>p&&(s=p),(o=this._yoyo&&1&n)&&(h=this._yEase,s=p-s),l=e2(this._tTime,a),s===u&&!r&&this._initted&&n===l)return this._tTime=x,this;n!==l&&(c&&this._yEase&&tq(c,o),this.vars.repeatRefresh&&!o&&!this._lock&&s!==a&&this._initted&&(this._lock=r=1,this.render(eF(a*n),!0).invalidate()._lock=0))}if(!this._initted){if(e7(this,f?e:s,r,t,x))return this._tTime=0,this;if(u!==this._time&&!(r&&this.vars.repeatRefresh&&n!==l))return this;if(p!==this._dur)return this.render(e,t,r)}if(this._tTime=x,this._time=s,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=d=(h||this._ease)(s/p),this._from&&(this.ratio=d=1-d),!u&&x&&!t&&!l&&(tC(this,"onStart"),this._tTime!==x))return this;for(i=this._pt;i;)i.r(d,i.d),i=i._next;c&&c.render(e<0?e:c._dur*c._ease(s/this._dur),t,r)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(f&&e0(this,e,t,r),tC(this,"onUpdate")),this._repeat&&n!==l&&this.vars.onRepeat&&!t&&this.parent&&tC(this,"onRepeat"),(x===this._tDur||!x)&&this._tTime===x&&(f&&!this._onUpdate&&e0(this,e,!0,!0),(e||!p)&&(x===this._tDur&&this._ts>0||!x&&this._ts<0)&&eW(this,1),!t&&!(f&&!u)&&(x||u||o)&&(tC(this,x===m?"onComplete":"onReverseComplete",!0),this._prom&&!(x<m&&this.timeScale()>0)&&this._prom()))}}else tr(this,e,t,r);return this},r.targets=function(){return this._targets},r.invalidate=function(t){return t&&this.vars.runBackwards||(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(t),e.prototype.invalidate.call(this,t)},r.resetTo=function(e,t,r,s,i){B||tz.wake(),this._ts||this.play();var n=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return(this._initted||t9(this,n),t6(this,e,t,r,s,this._ease(n/this._dur),n,i))?this.resetTo(e,t,r,s,1):(e3(this,0),this.parent||eQ(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},r.kill=function(e,t){if(void 0===t&&(t="all"),!e&&(!t||"all"===t))return this._lazy=this._pt=0,this.parent?tk(this):this.scrollTrigger&&this.scrollTrigger.kill(!!P),this;if(this.timeline){var r=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,t1&&!0!==t1.vars.overwrite)._first||tk(this),this.parent&&r!==this.timeline.totalDuration()&&ti(this,this._dur*this.timeline._tDur/r,0,1),this}var s,i,n,a,l,o,d,c=this._targets,h=e?tp(e):c,u=this._ptLookup,m=this._pt;if((!t||"all"===t)&&eG(c,h))return"all"===t&&(this._pt=0),tk(this);for(s=this._op=this._op||[],"all"!==t&&(Q(t)&&(l={},eD(t,function(e){return l[e]=1}),t=l),t=t7(c,t)),d=c.length;d--;)if(~h.indexOf(c[d]))for(l in i=u[d],"all"===t?(s[d]=t,a=i,n={}):(n=s[d]=s[d]||{},a=t),a)(o=i&&i[l])&&("kill"in o.d&&!0!==o.d.kill(l)||eH(this,o,"_pt"),delete i[l]),"all"!==n&&(n[l]=1);return this._initted&&!this._pt&&m&&tk(this),this},t.to=function(e,r){return new t(e,r,arguments[2])},t.from=function(e,t){return to(1,arguments)},t.delayedCall=function(e,r,s,i){return new t(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:r,onReverseComplete:r,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:i})},t.fromTo=function(e,t,r){return to(2,arguments)},t.set=function(e,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new t(e,r)},t.killTweensOf=function(e,t,r){return D.killTweensOf(e,t,r)},t}(tJ);eY(ri.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),eD("staggerTo,staggerFrom,staggerFromTo",function(e){ri[e]=function(){var t=new t0,r=tu.call(arguments,0);return r.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,r)}});var rn=function(e,t,r){return e[t]=r},ra=function(e,t,r){return e[t](r)},rl=function(e,t,r,s){return e[t](s.fp,r)},ro=function(e,t,r){return e.setAttribute(t,r)},rd=function(e,t){return H(e[t])?ra:K(e[t])&&e.setAttribute?ro:rn},rc=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},rh=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},ru=function(e,t){var r=t._pt,s="";if(!e&&t.b)s=t.b;else if(1===e&&t.e)s=t.e;else{for(;r;)s=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+s,r=r._next;s+=t.c}t.set(t.t,t.p,s,t)},rm=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},rp=function(e,t,r,s){for(var i,n=this._pt;n;)i=n._next,n.p===s&&n.modifier(e,t,r),n=i},rf=function(e){for(var t,r,s=this._pt;s;)r=s._next,(s.p!==e||s.op)&&s.op!==e?s.dep||(t=1):eH(this,s,"_pt"),s=r;return!t},rx=function(e,t,r,s){s.mSet(e,t,s.m.call(s.tween,r,s.mt),s)},rg=function(e){for(var t,r,s,i,n=e._pt;n;){for(t=n._next,r=s;r&&r.pr>n.pr;)r=r._next;(n._prev=r?r._prev:i)?n._prev._next=n:s=n,(n._next=r)?r._prev=n:i=n,n=t}e._pt=s},rv=function(){function e(e,t,r,s,i,n,a,l,o){this.t=t,this.s=s,this.c=i,this.p=r,this.r=n||rc,this.d=a||this,this.set=l||rn,this.pr=o||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,r){this.mSet=this.mSet||this.set,this.set=rx,this.m=e,this.mt=r,this.tween=t},e}();eD(eM+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return ej[e]=1}),eu.TweenMax=eu.TweenLite=ri,eu.TimelineLite=eu.TimelineMax=t0,D=new t0({sortChildren:!1,defaults:Z,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),L.stringFilter=tI;var r_=[],ry={},rb=[],rj=0,rw=0,rN=function(e){return(ry[e]||rb).map(function(e){return e()})},rC=function(){var e=Date.now(),t=[];e-rj>2&&(rN("matchMediaInit"),r_.forEach(function(e){var r,s,i,n,a=e.queries,l=e.conditions;for(s in a)(r=O.matchMedia(a[s]).matches)&&(i=1),r!==l[s]&&(l[s]=r,n=1);n&&(e.revert(),i&&t.push(e))}),rN("matchMediaRevert"),t.forEach(function(e){return e.onMatch(e,function(t){return e.add(null,t)})}),rj=e,rN("matchMedia"))},rk=function(){function e(e,t){this.selector=t&&tf(t),this.data=[],this._r=[],this.isReverted=!1,this.id=rw++,e&&this.add(e)}var t=e.prototype;return t.add=function(e,t,r){H(e)&&(r=t,t=e,e=H);var s=this,i=function(){var e,i=A,n=s.selector;return i&&i!==s&&i.data.push(s),r&&(s.selector=tf(r)),A=s,e=t.apply(s,arguments),H(e)&&s._r.push(e),A=i,s.selector=n,s.isReverted=!1,e};return s.last=i,e===H?i(s,function(e){return s.add(null,e)}):e?s[e]=i:i},t.ignore=function(e){var t=A;A=null,e(this),A=t},t.getTweens=function(){var t=[];return this.data.forEach(function(r){return r instanceof e?t.push.apply(t,r.getTweens()):r instanceof ri&&!(r.parent&&"nested"===r.parent.data)&&t.push(r)}),t},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,t){var r=this;if(e?function(){for(var t,s=r.getTweens(),i=r.data.length;i--;)"isFlip"===(t=r.data[i]).data&&(t.revert(),t.getChildren(!0,!0,!1).forEach(function(e){return s.splice(s.indexOf(e),1)}));for(s.map(function(e){return{g:e._dur||e._delay||e._sat&&!e._sat.vars.immediateRender?e.globalTime(0):-1/0,t:e}}).sort(function(e,t){return t.g-e.g||-1/0}).forEach(function(t){return t.t.revert(e)}),i=r.data.length;i--;)(t=r.data[i])instanceof t0?"nested"!==t.data&&(t.scrollTrigger&&t.scrollTrigger.revert(),t.kill()):t instanceof ri||!t.revert||t.revert(e);r._r.forEach(function(t){return t(e,r)}),r.isReverted=!0}():this.data.forEach(function(e){return e.kill&&e.kill()}),this.clear(),t)for(var s=r_.length;s--;)r_[s].id===this.id&&r_.splice(s,1)},t.revert=function(e){this.kill(e||{})},e}(),rT=function(){function e(e){this.contexts=[],this.scope=e,A&&A.data.push(this)}var t=e.prototype;return t.add=function(e,t,r){J(e)||(e={matches:e});var s,i,n,a=new rk(0,r||this.scope),l=a.conditions={};for(i in A&&!a.selector&&(a.selector=A.selector),this.contexts.push(a),t=a.add("onMatch",t),a.queries=e,e)"all"===i?n=1:(s=O.matchMedia(e[i]))&&(0>r_.indexOf(a)&&r_.push(a),(l[i]=s.matches)&&(n=1),s.addListener?s.addListener(rC):s.addEventListener("change",rC));return n&&t(a,function(e){return a.add(null,e)}),this},t.revert=function(e){this.kill(e||{})},t.kill=function(e){this.contexts.forEach(function(t){return t.kill(e,!0)})},e}(),rS={registerPlugin:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(e){return tS(e)})},timeline:function(e){return new t0(e)},getTweensOf:function(e,t){return D.getTweensOf(e,t)},getProperty:function(e,t,r,s){Q(e)&&(e=tp(e)[0]);var i=eP(e||{}).get,n=r?eZ:eL;return"native"===r&&(r=""),e?t?n((eC[t]&&eC[t].get||i)(e,t,r,s)):function(t,r,s){return n((eC[t]&&eC[t].get||i)(e,t,r,s))}:e},quickSetter:function(e,t,r){if((e=tp(e)).length>1){var s=e.map(function(e){return rA.quickSetter(e,t,r)}),i=s.length;return function(e){for(var t=i;t--;)s[t](e)}}e=e[0]||{};var n=eC[t],a=eP(e),l=a.harness&&(a.harness.aliases||{})[t]||t,o=n?function(t){var s=new n;R._pt=0,s.init(e,r?t+r:t,R,0,[e]),s.render(1,s),R._pt&&rm(1,R)}:a.set(e,l);return n?o:function(t){return o(e,l,r?t+r:t,a,1)}},quickTo:function(e,t,r){var s,i=rA.to(e,eY(((s={})[t]="+=0.1",s.paused=!0,s.stagger=0,s),r||{})),n=function(e,r,s){return i.resetTo(t,e,r,s)};return n.tween=i,n},isTweening:function(e){return D.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=tV(e.ease,Z.ease)),eU(Z,e||{})},config:function(e){return eU(L,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,s=e.plugins,i=e.defaults,n=e.extendTimeline;(s||"").split(",").forEach(function(e){return e&&!eC[e]&&!eu[e]&&ex(t+" effect requires "+e+" plugin.")}),ek[t]=function(e,t,s){return r(tp(e),eY(t||{},i),s)},n&&(t0.prototype[t]=function(e,r,s){return this.add(ek[t](e,J(r)?r:(s=r)&&{},this),s)})},registerEase:function(e,t){tR[e]=tV(t)},parseEase:function(e,t){return arguments.length?tV(e,t):tR},getById:function(e){return D.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var r,s,i=new t0(e);for(i.smoothChildTiming=ee(e.smoothChildTiming),D.remove(i),i._dp=0,i._time=i._tTime=D._time,r=D._first;r;)s=r._next,(t||!(!r._dur&&r instanceof ri&&r.vars.onComplete===r._targets[0]))&&e9(i,r,r._start-r._delay),r=s;return e9(D,i,0),i},context:function(e,t){return e?new rk(e,t):A},matchMedia:function(e){return new rT(e)},matchMediaRefresh:function(){return r_.forEach(function(e){var t,r,s=e.conditions;for(r in s)s[r]&&(s[r]=!1,t=1);t&&e.revert()})||rC()},addEventListener:function(e,t){var r=ry[e]||(ry[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=ry[e],s=r&&r.indexOf(t);s>=0&&r.splice(s,1)},utils:{wrap:function e(t,r,s){var i=r-t;return ei(t)?tb(t,e(0,t.length),r):td(s,function(e){return(i+(e-t)%i)%i+t})},wrapYoyo:function e(t,r,s){var i=r-t,n=2*i;return ei(t)?tb(t,e(0,t.length-1),r):td(s,function(e){return e=(n+(e-t)%n)%n||0,t+(e>i?n-e:e)})},distribute:tg,random:ty,snap:t_,normalize:function(e,t,r){return tw(e,t,0,1,r)},getUnit:th,clamp:function(e,t,r){return td(r,function(r){return tc(e,t,r)})},splitColor:tP,toArray:tp,selector:tf,mapRange:tw,pipe:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduce(function(e,t){return t(e)},e)}},unitize:function(e,t){return function(r){return e(parseFloat(r))+(t||th(r))}},interpolate:function e(t,r,s,i){var n=isNaN(t+r)?0:function(e){return(1-e)*t+e*r};if(!n){var a,l,o,d,c,h=Q(t),u={};if(!0===s&&(i=1)&&(s=null),h)t={p:t},r={p:r};else if(ei(t)&&!ei(r)){for(l=1,o=[],c=(d=t.length)-2;l<d;l++)o.push(e(t[l-1],t[l]));d--,n=function(e){var t=Math.min(c,~~(e*=d));return o[t](e-t)},s=r}else i||(t=eX(ei(t)?[]:{},t));if(!o){for(a in r)t4.call(u,t,a,"get",r[a]);n=function(e){return rm(e,u)||(h?t.p:t)}}}return td(s,n)},shuffle:tx},install:ep,effects:ek,ticker:tz,updateRoot:t0.updateRoot,plugins:eC,globalTimeline:D,core:{PropTween:rv,globals:eg,Tween:ri,Timeline:t0,Animation:tJ,getCache:eP,_removeLinkedListItem:eH,reverting:function(){return P},context:function(e){return e&&A&&(A.data.push(e),e._ctx=A),A},suppressOverwrites:function(e){return E=e}}};eD("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return rS[e]=ri[e]}),tz.add(t0.updateRoot),R=rS.to({},{duration:0});var rM=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},rE=function(e,t){var r,s,i,n=e._targets;for(r in t)for(s=n.length;s--;)(i=e._ptLookup[s][r])&&(i=i.d)&&(i._pt&&(i=rM(i,r)),i&&i.modifier&&i.modifier(t[r],e,n[s],r))},rP=function(e,t){return{name:e,headless:1,rawVars:1,init:function(e,r,s){s._onInit=function(e){var s,i;if(Q(r)&&(s={},eD(r,function(e){return s[e]=1}),r=s),t){for(i in s={},r)s[i]=t(r[i]);r=s}rE(e,r)}}}},rA=rS.registerPlugin({name:"attr",init:function(e,t,r,s,i){var n,a,l;for(n in this.tween=r,t)l=e.getAttribute(n)||"",(a=this.add(e,"setAttribute",(l||0)+"",t[n],s,i,0,0,n)).op=n,a.b=l,this._props.push(n)},render:function(e,t){for(var r=t._pt;r;)P?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",headless:1,init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},rP("roundProps",tv),rP("modifiers"),rP("snap",t_))||rS;ri.version=t0.version=rA.version="3.13.0",z=1,et()&&t$(),tR.Power0,tR.Power1,tR.Power2,tR.Power3,tR.Power4,tR.Linear,tR.Quad,tR.Cubic,tR.Quart,tR.Quint,tR.Strong,tR.Elastic,tR.Back,tR.SteppedEase,tR.Bounce,tR.Sine,tR.Expo,tR.Circ;var rD,rO,rF,rI,rz,r$,rR,rB={},rL=180/Math.PI,rZ=Math.PI/180,rY=Math.atan2,rX=/([A-Z])/g,rU=/(left|right|width|margin|padding|x)/i,rq=/[\s,\(]\S/,rV={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},rG=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},rQ=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},rH=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},rW=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},rK=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},rJ=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},r0=function(e,t,r){return e.style[t]=r},r1=function(e,t,r){return e.style.setProperty(t,r)},r2=function(e,t,r){return e._gsap[t]=r},r5=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},r4=function(e,t,r,s,i){var n=e._gsap;n.scaleX=n.scaleY=r,n.renderTransform(i,n)},r3=function(e,t,r,s,i){var n=e._gsap;n[t]=r,n.renderTransform(i,n)},r8="transform",r9=r8+"Origin",r6=function e(t,r){var s=this,i=this.target,n=i.style,a=i._gsap;if(t in rB&&n){if(this.tfm=this.tfm||{},"transform"===t)return rV.transform.split(",").forEach(function(t){return e.call(s,t,r)});if(~(t=rV[t]||t).indexOf(",")?t.split(",").forEach(function(e){return s.tfm[e]=sx(i,e)}):this.tfm[t]=a.x?a[t]:sx(i,t),t===r9&&(this.tfm.zOrigin=a.zOrigin),this.props.indexOf(r8)>=0)return;a.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(r9,r,"")),t=r8}(n||r)&&this.props.push(t,r,n[t])},r7=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},se=function(){var e,t,r=this.props,s=this.target,i=s.style,n=s._gsap;for(e=0;e<r.length;e+=3)r[e+1]?2===r[e+1]?s[r[e]](r[e+2]):s[r[e]]=r[e+2]:r[e+2]?i[r[e]]=r[e+2]:i.removeProperty("--"===r[e].substr(0,2)?r[e]:r[e].replace(rX,"-$1").toLowerCase());if(this.tfm){for(t in this.tfm)n[t]=this.tfm[t];n.svg&&(n.renderTransform(),s.setAttribute("data-svg-origin",this.svgo||"")),(e=r$())&&e.isStart||i[r8]||(r7(i),n.zOrigin&&i[r9]&&(i[r9]+=" "+n.zOrigin+"px",n.zOrigin=0,n.renderTransform()),n.uncache=1)}},st=function(e,t){var r={target:e,props:[],revert:se,save:r6};return e._gsap||rA.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(e){return r.save(e)}),r},sr=function(e,t){var r=rD.createElementNS?rD.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):rD.createElement(e);return r&&r.style?r:rD.createElement(e)},ss=function e(t,r,s){var i=getComputedStyle(t);return i[r]||i.getPropertyValue(r.replace(rX,"-$1").toLowerCase())||i.getPropertyValue(r)||!s&&e(t,sn(r)||r,1)||""},si="O,Moz,ms,Ms,Webkit".split(","),sn=function(e,t,r){var s=(t||rI).style,i=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);i--&&!(si[i]+e in s););return i<0?null:(3===i?"ms":i>=0?si[i]:"")+e},sa=function(){"undefined"!=typeof window&&window.document&&(rO=(rD=window.document).documentElement,rI=sr("div")||{style:{}},sr("div"),r9=(r8=sn(r8))+"Origin",rI.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",rR=!!sn("perspective"),r$=rA.core.reverting,rF=1)},sl=function(e){var t,r=e.ownerSVGElement,s=sr("svg",r&&r.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0);i.style.display="block",s.appendChild(i),rO.appendChild(s);try{t=i.getBBox()}catch(e){}return s.removeChild(i),rO.removeChild(s),t},so=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},sd=function(e){var t,r;try{t=e.getBBox()}catch(s){t=sl(e),r=1}return t&&(t.width||t.height)||r||(t=sl(e)),!t||t.width||t.x||t.y?t:{x:+so(e,["x","cx","x1"])||0,y:+so(e,["y","cy","y1"])||0,width:0,height:0}},sc=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&sd(e))},sh=function(e,t){if(t){var r,s=e.style;t in rB&&t!==r9&&(t=r8),s.removeProperty?(("ms"===(r=t.substr(0,2))||"webkit"===t.substr(0,6))&&(t="-"+t),s.removeProperty("--"===r?t:t.replace(rX,"-$1").toLowerCase())):s.removeAttribute(t)}},su=function(e,t,r,s,i,n){var a=new rv(e._pt,t,r,0,1,n?rJ:rK);return e._pt=a,a.b=s,a.e=i,e._props.push(r),a},sm={deg:1,rad:1,turn:1},sp={grid:1,flex:1},sf=function e(t,r,s,i){var n,a,l,o,d=parseFloat(s)||0,c=(s+"").trim().substr((d+"").length)||"px",h=rI.style,u=rU.test(r),m="svg"===t.tagName.toLowerCase(),p=(m?"client":"offset")+(u?"Width":"Height"),f="px"===i,x="%"===i;if(i===c||!d||sm[i]||sm[c])return d;if("px"===c||f||(d=e(t,r,s,"px")),o=t.getCTM&&sc(t),(x||"%"===c)&&(rB[r]||~r.indexOf("adius")))return n=o?t.getBBox()[u?"width":"height"]:t[p],eO(x?d/n*100:d/100*n);if(h[u?"width":"height"]=100+(f?c:i),a="rem"!==i&&~r.indexOf("adius")||"em"===i&&t.appendChild&&!m?t:t.parentNode,o&&(a=(t.ownerSVGElement||{}).parentNode),a&&a!==rD&&a.appendChild||(a=rD.body),(l=a._gsap)&&x&&l.width&&u&&l.time===tz.time&&!l.uncache)return eO(d/l.width*100);if(x&&("height"===r||"width"===r)){var g=t.style[r];t.style[r]=100+i,n=t[p],g?t.style[r]=g:sh(t,r)}else(x||"%"===c)&&!sp[ss(a,"display")]&&(h.position=ss(t,"position")),a===t&&(h.position="static"),a.appendChild(rI),n=rI[p],a.removeChild(rI),h.position="absolute";return u&&x&&((l=eP(a)).time=tz.time,l.width=a[p]),eO(f?n*d/100:n&&d?100/n*d:0)},sx=function(e,t,r,s){var i;return rF||sa(),t in rV&&"transform"!==t&&~(t=rV[t]).indexOf(",")&&(t=t.split(",")[0]),rB[t]&&"transform"!==t?(i=sS(e,s),i="transformOrigin"!==t?i[t]:i.svg?i.origin:sM(ss(e,r9))+" "+i.zOrigin+"px"):(!(i=e.style[t])||"auto"===i||s||~(i+"").indexOf("calc("))&&(i=sb[t]&&sb[t](e,t,r)||ss(e,t)||eA(e,t)||("opacity"===t?1:0)),r&&!~(i+"").trim().indexOf(" ")?sf(e,t,i,r)+r:i},sg=function(e,t,r,s){if(!r||"none"===r){var i=sn(t,e,1),n=i&&ss(e,i,1);n&&n!==r?(t=i,r=n):"borderColor"===t&&(r=ss(e,"borderTopColor"))}var a,l,o,d,c,h,u,m,p,f,x,g=new rv(this._pt,e.style,t,0,1,ru),v=0,_=0;if(g.b=r,g.e=s,r+="","var(--"===(s+="").substring(0,6)&&(s=ss(e,s.substring(4,s.indexOf(")")))),"auto"===s&&(h=e.style[t],e.style[t]=s,s=ss(e,t)||s,h?e.style[t]=h:sh(e,t)),tI(a=[r,s]),r=a[0],s=a[1],o=r.match(el)||[],(s.match(el)||[]).length){for(;l=el.exec(s);)u=l[0],p=s.substring(v,l.index),c?c=(c+1)%5:("rgba("===p.substr(-5)||"hsla("===p.substr(-5))&&(c=1),u!==(h=o[_++]||"")&&(d=parseFloat(h)||0,x=h.substr((d+"").length),"="===u.charAt(1)&&(u=eI(d,u)+x),m=parseFloat(u),f=u.substr((m+"").length),v=el.lastIndex-f.length,f||(f=f||L.units[t]||x,v!==s.length||(s+=f,g.e+=f)),x!==f&&(d=sf(e,t,h,f)||0),g._pt={_next:g._pt,p:p||1===_?p:",",s:d,c:m-d,m:c&&c<4||"zIndex"===t?Math.round:0});g.c=v<s.length?s.substring(v,s.length):""}else g.r="display"===t&&"none"===s?rJ:rK;return ed.test(s)&&(g.e=0),this._pt=g,g},sv={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},s_=function(e){var t=e.split(" "),r=t[0],s=t[1]||"50%";return("top"===r||"bottom"===r||"left"===s||"right"===s)&&(e=r,r=s,s=e),t[0]=sv[r]||r,t[1]=sv[s]||s,t.join(" ")},sy=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r,s,i,n=t.t,a=n.style,l=t.u,o=n._gsap;if("all"===l||!0===l)a.cssText="",s=1;else for(i=(l=l.split(",")).length;--i>-1;)rB[r=l[i]]&&(s=1,r="transformOrigin"===r?r9:r8),sh(n,r);s&&(sh(n,r8),o&&(o.svg&&n.removeAttribute("transform"),a.scale=a.rotate=a.translate="none",sS(n,1),o.uncache=1,r7(a)))}},sb={clearProps:function(e,t,r,s,i){if("isFromStart"!==i.data){var n=e._pt=new rv(e._pt,t,r,0,0,sy);return n.u=s,n.pr=-10,n.tween=i,e._props.push(r),1}}},sj=[1,0,0,1,0,0],sw={},sN=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},sC=function(e){var t=ss(e,r8);return sN(t)?sj:t.substr(7).match(ea).map(eO)},sk=function(e,t){var r,s,i,n,a=e._gsap||eP(e),l=e.style,o=sC(e);return a.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(o=[(i=e.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?sj:o:(o!==sj||e.offsetParent||e===rO||a.svg||(i=l.display,l.display="block",(r=e.parentNode)&&(e.offsetParent||e.getBoundingClientRect().width)||(n=1,s=e.nextElementSibling,rO.appendChild(e)),o=sC(e),i?l.display=i:sh(e,"display"),n&&(s?r.insertBefore(e,s):r?r.appendChild(e):rO.removeChild(e))),t&&o.length>6?[o[0],o[1],o[4],o[5],o[12],o[13]]:o)},sT=function(e,t,r,s,i,n){var a,l,o,d,c=e._gsap,h=i||sk(e,!0),u=c.xOrigin||0,m=c.yOrigin||0,p=c.xOffset||0,f=c.yOffset||0,x=h[0],g=h[1],v=h[2],_=h[3],y=h[4],b=h[5],j=t.split(" "),w=parseFloat(j[0])||0,N=parseFloat(j[1])||0;r?h!==sj&&(l=x*_-g*v)&&(o=_/l*w+-v/l*N+(v*b-_*y)/l,d=-g/l*w+x/l*N-(x*b-g*y)/l,w=o,N=d):(w=(a=sd(e)).x+(~j[0].indexOf("%")?w/100*a.width:w),N=a.y+(~(j[1]||j[0]).indexOf("%")?N/100*a.height:N)),s||!1!==s&&c.smooth?(y=w-u,b=N-m,c.xOffset=p+(y*x+b*v)-y,c.yOffset=f+(y*g+b*_)-b):c.xOffset=c.yOffset=0,c.xOrigin=w,c.yOrigin=N,c.smooth=!!s,c.origin=t,c.originIsAbsolute=!!r,e.style[r9]="0px 0px",n&&(su(n,c,"xOrigin",u,w),su(n,c,"yOrigin",m,N),su(n,c,"xOffset",p,c.xOffset),su(n,c,"yOffset",f,c.yOffset)),e.setAttribute("data-svg-origin",w+" "+N)},sS=function(e,t){var r=e._gsap||new tK(e);if("x"in r&&!t&&!r.uncache)return r;var s,i,n,a,l,o,d,c,h,u,m,p,f,x,g,v,_,y,b,j,w,N,C,k,T,S,M,E,P,A,D,O,F=e.style,I=r.scaleX<0,z=getComputedStyle(e),$=ss(e,r9)||"0";return s=i=n=o=d=c=h=u=m=0,a=l=1,r.svg=!!(e.getCTM&&sc(e)),z.translate&&(("none"!==z.translate||"none"!==z.scale||"none"!==z.rotate)&&(F[r8]=("none"!==z.translate?"translate3d("+(z.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==z.rotate?"rotate("+z.rotate+") ":"")+("none"!==z.scale?"scale("+z.scale.split(" ").join(",")+") ":"")+("none"!==z[r8]?z[r8]:"")),F.scale=F.rotate=F.translate="none"),x=sk(e,r.svg),r.svg&&(r.uncache?(T=e.getBBox(),$=r.xOrigin-T.x+"px "+(r.yOrigin-T.y)+"px",k=""):k=!t&&e.getAttribute("data-svg-origin"),sT(e,k||$,!!k||r.originIsAbsolute,!1!==r.smooth,x)),p=r.xOrigin||0,f=r.yOrigin||0,x!==sj&&(y=x[0],b=x[1],j=x[2],w=x[3],s=N=x[4],i=C=x[5],6===x.length?(a=Math.sqrt(y*y+b*b),l=Math.sqrt(w*w+j*j),o=y||b?rY(b,y)*rL:0,(h=j||w?rY(j,w)*rL+o:0)&&(l*=Math.abs(Math.cos(h*rZ))),r.svg&&(s-=p-(p*y+f*j),i-=f-(p*b+f*w))):(O=x[6],A=x[7],M=x[8],E=x[9],P=x[10],D=x[11],s=x[12],i=x[13],n=x[14],d=(g=rY(O,P))*rL,g&&(k=N*(v=Math.cos(-g))+M*(_=Math.sin(-g)),T=C*v+E*_,S=O*v+P*_,M=-(N*_)+M*v,E=-(C*_)+E*v,P=-(O*_)+P*v,D=-(A*_)+D*v,N=k,C=T,O=S),c=(g=rY(-j,P))*rL,g&&(k=y*(v=Math.cos(-g))-M*(_=Math.sin(-g)),T=b*v-E*_,S=j*v-P*_,D=w*_+D*v,y=k,b=T,j=S),o=(g=rY(b,y))*rL,g&&(k=y*(v=Math.cos(g))+b*(_=Math.sin(g)),T=N*v+C*_,b=b*v-y*_,C=C*v-N*_,y=k,N=T),d&&Math.abs(d)+Math.abs(o)>359.9&&(d=o=0,c=180-c),a=eO(Math.sqrt(y*y+b*b+j*j)),l=eO(Math.sqrt(C*C+O*O)),h=Math.abs(g=rY(N,C))>2e-4?g*rL:0,m=D?1/(D<0?-D:D):0),r.svg&&(k=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!sN(ss(e,r8)),k&&e.setAttribute("transform",k))),Math.abs(h)>90&&270>Math.abs(h)&&(I?(a*=-1,h+=o<=0?180:-180,o+=o<=0?180:-180):(l*=-1,h+=h<=0?180:-180)),t=t||r.uncache,r.x=s-((r.xPercent=s&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-s)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+"px",r.y=i-((r.yPercent=i&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-i)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+"px",r.z=n+"px",r.scaleX=eO(a),r.scaleY=eO(l),r.rotation=eO(o)+"deg",r.rotationX=eO(d)+"deg",r.rotationY=eO(c)+"deg",r.skewX=h+"deg",r.skewY=u+"deg",r.transformPerspective=m+"px",(r.zOrigin=parseFloat($.split(" ")[2])||!t&&r.zOrigin||0)&&(F[r9]=sM($)),r.xOffset=r.yOffset=0,r.force3D=L.force3D,r.renderTransform=r.svg?sO:rR?sD:sP,r.uncache=0,r},sM=function(e){return(e=e.split(" "))[0]+" "+e[1]},sE=function(e,t,r){var s=th(t);return eO(parseFloat(t)+parseFloat(sf(e,"x",r+"px",s)))+s},sP=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,sD(e,t)},sA="0deg",sD=function(e,t){var r=t||this,s=r.xPercent,i=r.yPercent,n=r.x,a=r.y,l=r.z,o=r.rotation,d=r.rotationY,c=r.rotationX,h=r.skewX,u=r.skewY,m=r.scaleX,p=r.scaleY,f=r.transformPerspective,x=r.force3D,g=r.target,v=r.zOrigin,_="",y="auto"===x&&e&&1!==e||!0===x;if(v&&(c!==sA||d!==sA)){var b,j=parseFloat(d)*rZ,w=Math.sin(j),N=Math.cos(j);n=sE(g,n,-(w*(b=Math.cos(j=parseFloat(c)*rZ))*v)),a=sE(g,a,-(-Math.sin(j)*v)),l=sE(g,l,-(N*b*v)+v)}"0px"!==f&&(_+="perspective("+f+") "),(s||i)&&(_+="translate("+s+"%, "+i+"%) "),(y||"0px"!==n||"0px"!==a||"0px"!==l)&&(_+="0px"!==l||y?"translate3d("+n+", "+a+", "+l+") ":"translate("+n+", "+a+") "),o!==sA&&(_+="rotate("+o+") "),d!==sA&&(_+="rotateY("+d+") "),c!==sA&&(_+="rotateX("+c+") "),(h!==sA||u!==sA)&&(_+="skew("+h+", "+u+") "),(1!==m||1!==p)&&(_+="scale("+m+", "+p+") "),g.style[r8]=_||"translate(0, 0)"},sO=function(e,t){var r,s,i,n,a,l=t||this,o=l.xPercent,d=l.yPercent,c=l.x,h=l.y,u=l.rotation,m=l.skewX,p=l.skewY,f=l.scaleX,x=l.scaleY,g=l.target,v=l.xOrigin,_=l.yOrigin,y=l.xOffset,b=l.yOffset,j=l.forceCSS,w=parseFloat(c),N=parseFloat(h);u=parseFloat(u),m=parseFloat(m),(p=parseFloat(p))&&(m+=p=parseFloat(p),u+=p),u||m?(u*=rZ,m*=rZ,r=Math.cos(u)*f,s=Math.sin(u)*f,i=-(Math.sin(u-m)*x),n=Math.cos(u-m)*x,m&&(p*=rZ,i*=a=Math.sqrt(1+(a=Math.tan(m-p))*a),n*=a,p&&(r*=a=Math.sqrt(1+(a=Math.tan(p))*a),s*=a)),r=eO(r),s=eO(s),i=eO(i),n=eO(n)):(r=f,n=x,s=i=0),(w&&!~(c+"").indexOf("px")||N&&!~(h+"").indexOf("px"))&&(w=sf(g,"x",c,"px"),N=sf(g,"y",h,"px")),(v||_||y||b)&&(w=eO(w+v-(v*r+_*i)+y),N=eO(N+_-(v*s+_*n)+b)),(o||d)&&(w=eO(w+o/100*(a=g.getBBox()).width),N=eO(N+d/100*a.height)),a="matrix("+r+","+s+","+i+","+n+","+w+","+N+")",g.setAttribute("transform",a),j&&(g.style[r8]=a)},sF=function(e,t,r,s,i){var n,a,l=Q(i),o=parseFloat(i)*(l&&~i.indexOf("rad")?rL:1)-s,d=s+o+"deg";return l&&("short"===(n=i.split("_")[1])&&(o%=360)!=o%180&&(o+=o<0?360:-360),"cw"===n&&o<0?o=(o+36e9)%360-360*~~(o/360):"ccw"===n&&o>0&&(o=(o-36e9)%360-360*~~(o/360))),e._pt=a=new rv(e._pt,t,r,s,o,rQ),a.e=d,a.u="deg",e._props.push(r),a},sI=function(e,t){for(var r in t)e[r]=t[r];return e},sz=function(e,t,r){var s,i,n,a,l,o,d,c=sI({},r._gsap),h=r.style;for(i in c.svg?(n=r.getAttribute("transform"),r.setAttribute("transform",""),h[r8]=t,s=sS(r,1),sh(r,r8),r.setAttribute("transform",n)):(n=getComputedStyle(r)[r8],h[r8]=t,s=sS(r,1),h[r8]=n),rB)(n=c[i])!==(a=s[i])&&0>"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)&&(l=th(n)!==(d=th(a))?sf(r,i,n,d):parseFloat(n),o=parseFloat(a),e._pt=new rv(e._pt,s,i,l,o-l,rG),e._pt.u=d||0,e._props.push(i));sI(s,c)};eD("padding,margin,Width,Radius",function(e,t){var r="Right",s="Bottom",i="Left",n=(t<3?["Top",r,s,i]:["Top"+i,"Top"+r,s+r,s+i]).map(function(r){return t<2?e+r:"border"+r+e});sb[t>1?"border"+e:e]=function(e,t,r,s,i){var a,l;if(arguments.length<4)return 5===(l=(a=n.map(function(t){return sx(e,t,r)})).join(" ")).split(a[0]).length?a[0]:l;a=(s+"").split(" "),l={},n.forEach(function(e,t){return l[e]=a[t]=a[t]||a[(t-1)/2|0]}),e.init(t,l,i)}});var s$={name:"css",register:sa,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,s,i){var n,a,l,o,d,c,h,u,m,p,f,x,g,v,_,y,b=this._props,j=e.style,w=r.vars.startAt;for(h in rF||sa(),this.styles=this.styles||st(e),y=this.styles.props,this.tween=r,t)if("autoRound"!==h&&(a=t[h],!(eC[h]&&t8(h,t,r,s,e,i)))){if(d=typeof a,c=sb[h],"function"===d&&(d=typeof(a=a.call(r,s,e,i))),"string"===d&&~a.indexOf("random(")&&(a=tj(a)),c)c(this,e,h,a,r)&&(_=1);else if("--"===h.substr(0,2))n=(getComputedStyle(e).getPropertyValue(h)+"").trim(),a+="",tO.lastIndex=0,tO.test(n)||(u=th(n),m=th(a)),m?u!==m&&(n=sf(e,h,n,m)+m):u&&(a+=u),this.add(j,"setProperty",n,a,s,i,0,0,h),b.push(h),y.push(h,0,j[h]);else if("undefined"!==d){if(w&&h in w?(Q(n="function"==typeof w[h]?w[h].call(r,s,e,i):w[h])&&~n.indexOf("random(")&&(n=tj(n)),th(n+"")||"auto"===n||(n+=L.units[h]||th(sx(e,h))||""),"="===(n+"").charAt(1)&&(n=sx(e,h))):n=sx(e,h),o=parseFloat(n),(p="string"===d&&"="===a.charAt(1)&&a.substr(0,2))&&(a=a.substr(2)),l=parseFloat(a),h in rV&&("autoAlpha"===h&&(1===o&&"hidden"===sx(e,"visibility")&&l&&(o=0),y.push("visibility",0,j.visibility),su(this,j,"visibility",o?"inherit":"hidden",l?"inherit":"hidden",!l)),"scale"!==h&&"transform"!==h&&~(h=rV[h]).indexOf(",")&&(h=h.split(",")[0])),f=h in rB){if(this.styles.save(h),"string"===d&&"var(--"===a.substring(0,6)&&(l=parseFloat(a=ss(e,a.substring(4,a.indexOf(")"))))),x||((g=e._gsap).renderTransform&&!t.parseTransform||sS(e,t.parseTransform),v=!1!==t.smoothOrigin&&g.smooth,(x=this._pt=new rv(this._pt,j,r8,0,1,g.renderTransform,g,0,-1)).dep=1),"scale"===h)this._pt=new rv(this._pt,g,"scaleY",g.scaleY,(p?eI(g.scaleY,p+l):l)-g.scaleY||0,rG),this._pt.u=0,b.push("scaleY",h),h+="X";else if("transformOrigin"===h){y.push(r9,0,j[r9]),a=s_(a),g.svg?sT(e,a,0,v,0,this):((m=parseFloat(a.split(" ")[2])||0)!==g.zOrigin&&su(this,g,"zOrigin",g.zOrigin,m),su(this,j,h,sM(n),sM(a)));continue}else if("svgOrigin"===h){sT(e,a,1,v,0,this);continue}else if(h in sw){sF(this,g,h,o,p?eI(o,p+a):a);continue}else if("smoothOrigin"===h){su(this,g,"smooth",g.smooth,a);continue}else if("force3D"===h){g[h]=a;continue}else if("transform"===h){sz(this,a,e);continue}}else h in j||(h=sn(h)||h);if(f||(l||0===l)&&(o||0===o)&&!rq.test(a)&&h in j)u=(n+"").substr((o+"").length),l||(l=0),m=th(a)||(h in L.units?L.units[h]:u),u!==m&&(o=sf(e,h,n,m)),this._pt=new rv(this._pt,f?g:j,h,o,(p?eI(o,p+l):l)-o,f||"px"!==m&&"zIndex"!==h||!1===t.autoRound?rG:rW),this._pt.u=m||0,u!==m&&"%"!==m&&(this._pt.b=n,this._pt.r=rH);else if(h in j)sg.call(this,e,h,n,p?p+a:a);else if(h in e)this.add(e,h,n||e[h],p?p+a:a,s,i);else if("parseTransform"!==h){ef(h,a);continue}f||(h in j?y.push(h,0,j[h]):"function"==typeof e[h]?y.push(h,2,e[h]()):y.push(h,1,n||e[h])),b.push(h)}}_&&rg(this)},render:function(e,t){if(t.tween._time||!r$())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:sx,aliases:rV,getSetter:function(e,t,r){var s=rV[t];return s&&0>s.indexOf(",")&&(t=s),t in rB&&t!==r9&&(e._gsap.x||sx(e,"x"))?r&&rz===r?"scale"===t?r5:r2:(rz=r||{},"scale"===t?r4:r3):e.style&&!K(e.style[t])?r0:~t.indexOf("-")?r1:rd(e,t)},core:{_removeProperty:sh,_getMatrix:sk}};rA.utils.checkPrefix=sn,rA.core.getStyleSaver=st,function(e,t,r,s){var i=eD(e+","+t+","+r,function(e){rB[e]=1});eD(t,function(e){L.units[e]="deg",sw[e]=1}),rV[i[13]]=e+","+t,eD(s,function(e){var t=e.split(":");rV[t[1]]=i[t[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),eD("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){L.units[e]="px"}),rA.registerPlugin(s$);var sR=rA.registerPlugin(s$)||rA;sR.core.Tween;var sB=r(75290),sL=r(88307);let sZ=(0,C.Z)("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),sY=(0,C.Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var sX=r(31540);let sU=(0,C.Z)("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),sq=(0,C.Z)("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);var sV=r(62952),sG=r(41190),sQ=r(10143),sH=r(32082);function sW(e){if(!e.dob)return null;try{let t;let r=new Date(e.dob);if(e.deceased&&e.dod)t=new Date(e.dod);else{if(e.deceased)return null;t=new Date}let s=t.getTime()-r.getTime();return Math.floor(s/315576e5)}catch(t){return console.warn(`[Age Calculation] Invalid date for ${e.name}:`,t),null}}var sK=r(69984);function sJ({members:e,selectedMemberId:t,onMemberClick:r,treeId:n,onCenterOnMember:l,highlightPath:o=[],selectedMember:d,drawerOpen:c=!1,onDrawerOpenChange:h,onEditClick:m,onAddSpouseClick:p,onAddChildClick:f,onAddParentClick:x,onMemberNavigate:g,onRelationshipAnalyze:_}){let[y,N]=(0,i.useState)([]),[C,S]=(0,i.useState)(null),[M,E]=(0,i.useState)(0),[P,A]=(0,i.useState)(!1),D=(0,i.useCallback)(t=>{let r=new Set,s=[],i=[],n=t=>{if(r.has(t))return;r.add(t),s.push(t);let a=e.find(e=>e.id===t);if(a){if(0===a.parentIds.length){i.push(t);return}a.parentIds.forEach(e=>{r.has(e)||n(e)})}};return n(t),console.log(`[TreeCanvas] ðŸŒ³ Lineage trace for ${e.find(e=>e.id===t)?.name}:`,{totalPath:s.length,rootsFound:i.length,roots:i.map(t=>e.find(e=>e.id===t)?.name)}),s},[e]),O=(0,i.useCallback)(t=>{let[r,s]=t.split("-"),i=D(s),n=e.find(e=>e.id===s),a=e.find(e=>e.id===r);console.log(`[TreeCanvas] ðŸ”† Tracing ancestry from connection ${a?.name} â†’ ${n?.name}:`,{connection:t,childId:s,parentId:r,pathToRoot:i,pathLength:i.length,includesParent:i.includes(r),memberNames:i.map(t=>e.find(e=>e.id===t)?.name)}),N(i),setTimeout(()=>{N([])},1e4)},[D,e]),F=[...o,...y],I=(0,i.useRef)(null),z=(0,i.useRef)(null),[$,R]=(0,i.useState)({scale:1,translateX:0,translateY:0}),[B,L]=(0,i.useState)(!1),Z=(0,i.useRef)({x:0,y:0}),[Y,X]=(0,i.useState)({nodes:[],generations:new Map}),[U,q]=(0,i.useState)(!1),[V,G]=(0,i.useState)(""),[Q,H]=(0,i.useState)([]),[W,K]=(0,i.useState)(!1),{user:J}=(0,sH.a)(),{toast:ee}=(0,u.pm)(),et=(0,i.useCallback)(t=>{let r=D(t.id);console.log(`[TreeCanvas] ðŸŒ³ Double-click: Tracing lineage for ${t.name}:`,{memberLineage:r,pathLength:r.length,rootCount:r.filter(t=>{let r=e.find(e=>e.id===t);return r&&0===r.parentIds.length}).length}),N(r),setTimeout(()=>{N([])},15e3)},[D,e]),er=(0,i.useCallback)((e,s=!1)=>{if(s){console.log(`[TreeCanvas] â‡§ Shift+Click: Tracing lineage for ${e.name}`),et(e);return}let i=Date.now(),n=i-M;if(C===e.id&&n<500){et(e),S(null),E(0);return}if(t===e.id&&n>1e3){console.log(`[TreeCanvas] ðŸ‘† Deselecting member: ${e.name}`),r?.(e),S(null),E(0);return}console.log(`[TreeCanvas] ðŸ‘† Selecting member: ${e.name}`),S(e.id),E(i),A(!0),U&&h?(r?.(e),h(!0)):r?.(e)},[C,M,t,r,U,h,et]),es=(0,i.useCallback)(()=>{if(!I.current)return;let e=I.current.getBoundingClientRect(),t=e.width/2,r=e.height/2,s=Math.min($.scale+.3,3),i=(t-$.translateX)/$.scale,n=(r-$.translateY)/$.scale;sR.to($,{scale:s,translateX:t-i*s,translateY:r-n*s,duration:.4,ease:"power2.out",onUpdate:()=>{R({...$})}})},[$]),ei=(0,i.useCallback)(()=>{if(!I.current)return;let e=I.current.getBoundingClientRect(),t=e.width/2,r=e.height/2,s=Math.max($.scale-.3,.1),i=(t-$.translateX)/$.scale,n=(r-$.translateY)/$.scale;sR.to($,{scale:s,translateX:t-i*s,translateY:r-n*s,duration:.4,ease:"power2.out",onUpdate:()=>{R({...$})}})},[$]),en=(0,i.useCallback)(()=>{if(I.current&&Y.nodes.length>0){let e=I.current.getBoundingClientRect(),t=e.width/2,r=e.height/2,s=Math.min(...Y.nodes.map(e=>e.x))-200,i=Math.max(...Y.nodes.map(e=>e.x))+200,n=Math.min(...Y.nodes.map(e=>e.y))-200,a=Math.max(...Y.nodes.map(e=>e.y))+200,l=.8*Math.min(Math.min(e.width/(i-s),e.height/(a-n)),1);sR.to($,{scale:l,translateX:t-(s+i)/2*l,translateY:r-(n+a)/2*l,duration:1,ease:"power2.inOut",onUpdate:()=>{R({...$})}})}else sR.to($,{scale:1,translateX:0,translateY:0,duration:.8,ease:"power2.inOut",onUpdate:()=>{R({...$})}})},[$,Y.nodes]),ea=(0,i.useCallback)(t=>{if(G(t),!t.trim()){H([]),K(!1);return}let r=e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.email&&e.email.toLowerCase().includes(t.toLowerCase())).sort((e,t)=>e.name.localeCompare(t.name)).slice(0,8);H(r),K(r.length>0)},[e]),el=(0,i.useCallback)(e=>{let t=Y.nodes.find(t=>t.member.id===e.id);if(!t||!I.current)return;let s=I.current.getBoundingClientRect(),i=s.width/2,n=s.height/2,a={scale:Math.max($.scale,.8),translateX:i-t.x*Math.max($.scale,.8),translateY:n-t.y*Math.max($.scale,.8)};sR.to($,{...a,duration:1.2,ease:"power2.inOut",onUpdate:()=>{R({...$})}}),G(""),K(!1),N([e.id]),setTimeout(()=>N([]),3e3),r&&r(e),l&&l(e.id)},[Y.nodes,$,r,l]),eo=(0,i.useCallback)(()=>{if(!J)return;let t=e.find(e=>e.email===J.email||e.id===J.id);t?(el(t),ee({title:"Found you! \uD83D\uDC4B",description:`Navigated to ${t.name}`})):ee({title:"Not found",description:"You are not a member of this tree yet.",variant:"destructive"})},[J,e,el,ee]),ed=(0,i.useCallback)(async e=>{z.current},[Y.nodes,ee]),ec=(0,i.useCallback)(async()=>{if(!navigator.share){try{await navigator.clipboard.writeText(window.location.href),ee({title:"Link copied! \uD83D\uDCCB",description:"Family tree link copied to clipboard"})}catch(e){ee({title:"Could not copy link",description:"Please copy the URL manually from your browser",variant:"destructive"})}return}try{await navigator.share({title:"Family Tree",text:"Check out our family tree!",url:window.location.href})}catch(e){console.log("Share cancelled or failed:",e)}},[ee]),eh=(0,i.useCallback)(()=>{en()},[en]),eu=(0,i.useCallback)(()=>{q(!U)},[U]),em=(0,i.useCallback)(()=>{let e=new CustomEvent("show-tree-help");document.dispatchEvent(e)},[]);(0,sK.BV)({zoomIn:es,zoomOut:ei,resetZoom:en,centerView:eh,toggleFullscreen:eu,showHelp:em}),(0,i.useCallback)(e=>{if(e.preventDefault(),!I.current)return;let t=-.001*e.deltaY,r=Math.min(Math.max(.1,$.scale+t),3),s=I.current.getBoundingClientRect(),i=e.clientX-s.left,n=e.clientY-s.top,a=(i-$.translateX)/$.scale,l=(n-$.translateY)/$.scale;R({scale:r,translateX:i-a*r,translateY:n-l*r})},[$]);let ep=(0,i.useCallback)(e=>{0===e.button&&(L(!0),Z.current={x:e.clientX-$.translateX,y:e.clientY-$.translateY})},[$.translateX,$.translateY]),ef=(0,i.useCallback)(e=>{B&&R(t=>({...t,translateX:e.clientX-Z.current.x,translateY:e.clientY-Z.current.y}))},[B]),ex=(0,i.useCallback)(()=>{L(!1)},[]),eg=(0,i.useCallback)(e=>{if(1===e.touches.length){L(!0);let t=e.touches[0];Z.current={x:t.clientX-$.translateX,y:t.clientY-$.translateY}}},[$.translateX,$.translateY]),ev=(0,i.useCallback)(e=>{if(e.preventDefault(),1===e.touches.length&&B){let t=e.touches[0];R(e=>({...e,translateX:t.clientX-Z.current.x,translateY:t.clientY-Z.current.y}))}else if(2===e.touches.length){let t=e.touches[0],r=e.touches[1],s=Math.sqrt(Math.pow(r.clientX-t.clientX,2)+Math.pow(r.clientY-t.clientY,2));if(Z.current.pinchDistance){let e=s/Z.current.pinchDistance,i=Math.min(Math.max(.1,Z.current.initialScale*e),3);if(I.current){let e=I.current.getBoundingClientRect(),s=(t.clientX+r.clientX)/2-e.left,n=(t.clientY+r.clientY)/2-e.top,a=(s-$.translateX)/$.scale,l=(n-$.translateY)/$.scale;R({scale:i,translateX:s-a*i,translateY:n-l*i})}else R(e=>({...e,scale:i}))}else Z.current.pinchDistance=s,Z.current.initialScale=$.scale}},[B,$.scale]),e_=(0,i.useCallback)(()=>{L(!1),Z.current.pinchDistance&&(Z.current.pinchDistance=void 0,Z.current.initialScale=void 0)},[]),ey=(0,i.useCallback)(()=>{if(document.fullscreenElement){if(c&&h){h(!1);return}document.exitFullscreen(),q(!1)}else I.current?.requestFullscreen(),q(!0)},[c,h]);return 0===e.length?s.jsx("div",{className:"flex h-full items-center justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4 text-muted-foreground",children:[s.jsx(sB.Z,{className:"h-8 w-8 animate-spin"}),s.jsx("p",{children:"Loading family tree..."})]})}):(0,s.jsxs)("div",{ref:I,className:"relative h-full w-full overflow-hidden bg-slate-50 dark:bg-slate-900",onMouseDown:ep,onMouseMove:ef,onMouseUp:ex,onMouseLeave:ex,onTouchStart:eg,onTouchMove:ev,onTouchEnd:e_,style:{cursor:B?"grabbing":"grab",touchAction:"none"},children:[(0,s.jsxs)("div",{className:"absolute inset-0",style:{zIndex:1},children:[s.jsx(w,{opacity:.06,density:.8}),s.jsx(j,{opacity:.08,scale:1})]}),(0,s.jsxs)("div",{ref:z,className:"absolute",style:{transformOrigin:"0 0",zIndex:10},children:[s.jsx(b,{nodes:Y.nodes,highlightPath:F,onRelationshipAnalyze:_,onConnectionHighlight:O}),Y.nodes.map((e,i)=>s.jsx("div",{className:"absolute tree-member-node",style:{left:e.x,top:e.y,transform:"translate(-50%, -50%)"},"data-generation":e.generation,"data-index":i,"data-member-id":e.member.id,children:s.jsx(v,{member:e.member,spouses:e.spouses,isSelected:t===e.member.id,isHighlighted:F.includes(e.member.id),onClick:t=>er(e.member,t?.shiftKey||!1),onMemberClick:r,selectedMemberId:t})},e.member.id))]}),s.jsx("div",{className:`absolute top-4 left-1/2 transform -translate-x-1/2 transition-opacity duration-200 ${c?"opacity-0 pointer-events-none":"opacity-100"}`,style:{zIndex:c?10:1e3,pointerEvents:c?"none":"auto"},onMouseDown:e=>e.stopPropagation(),onTouchStart:e=>e.stopPropagation(),children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 bg-white/90 dark:bg-gray-800/90 backdrop-blur-md rounded-full px-4 py-2 shadow-lg border border-white/20 dark:border-gray-700/20",children:[s.jsx(sL.Z,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(sG.I,{type:"text",placeholder:"Search family members...",value:V,onChange:e=>ea(e.target.value),className:"border-0 bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 placeholder:text-muted-foreground/70 text-foreground min-w-[250px]"}),J&&s.jsx(a.z,{variant:"ghost",size:"sm",onClick:eo,className:"rounded-full h-8 w-8 p-0 hover:bg-blue-100 dark:hover:bg-blue-900/20",title:"Navigate to me",children:s.jsx(sZ,{className:"h-4 w-4 text-blue-600"})}),(0,s.jsxs)(sQ.h_,{children:[s.jsx(sQ.$F,{asChild:!0,children:s.jsx(a.z,{variant:"ghost",size:"sm",className:"rounded-full h-8 w-8 p-0 hover:bg-green-100 dark:hover:bg-green-900/20",title:"Export & Share",children:s.jsx(sY,{className:"h-4 w-4 text-green-600"})})}),(0,s.jsxs)(sQ.AW,{align:"end",className:"w-48",children:[(0,s.jsxs)(sQ.Xi,{onClick:()=>ed("png"),children:[s.jsx(sX.Z,{className:"mr-2 h-4 w-4"}),"Export as PNG"]}),(0,s.jsxs)(sQ.Xi,{onClick:()=>ed("pdf"),children:[s.jsx(sX.Z,{className:"mr-2 h-4 w-4"}),"Export as PDF"]}),s.jsx(sQ.VD,{}),(0,s.jsxs)(sQ.Xi,{onClick:ec,children:[s.jsx(sY,{className:"mr-2 h-4 w-4"}),"Share Tree"]})]})]})]}),W&&Q.length>0&&s.jsx("div",{className:"absolute top-full mt-2 left-0 right-0 bg-white/95 dark:bg-gray-800/95 backdrop-blur-md rounded-lg shadow-lg border border-white/20 dark:border-gray-700/20 max-h-64 overflow-y-auto",children:Q.map(e=>(0,s.jsxs)("button",{onClick:()=>el(e),className:"w-full px-4 py-3 text-left hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-b-0 flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white text-sm font-medium",children:e.name.charAt(0).toUpperCase()}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"font-medium text-sm text-gray-900 dark:text-gray-100",children:e.name}),e.email&&s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.email})]})]},e.id))})]})}),(0,s.jsxs)("div",{className:`absolute bottom-4 right-4 flex flex-col gap-2 transition-opacity duration-200 ${c?"opacity-0 pointer-events-none":"opacity-100"}`,style:{zIndex:c?10:1e3,pointerEvents:c?"none":"auto"},onMouseDown:e=>e.stopPropagation(),onTouchStart:e=>e.stopPropagation(),children:[s.jsx("button",{className:"rounded-md bg-white px-3 py-2 text-sm shadow-md hover:bg-slate-100 dark:bg-slate-800 dark:hover:bg-slate-700 transition-all hover:scale-105 hover:shadow-lg",onClick:en,children:"Reset View"}),s.jsx("button",{className:"rounded-md bg-white px-3 py-2 text-sm shadow-md hover:bg-slate-100 dark:bg-slate-800 dark:hover:bg-slate-700 transition-all hover:scale-105 hover:shadow-lg",onClick:es,children:"Zoom In"}),s.jsx("button",{className:"rounded-md bg-white px-3 py-2 text-sm shadow-md hover:bg-slate-100 dark:bg-slate-800 dark:hover:bg-slate-700 transition-all hover:scale-105 hover:shadow-lg",onClick:ei,children:"Zoom Out"}),(0,s.jsxs)("button",{className:"rounded-md bg-white px-3 py-2 text-sm shadow-md hover:bg-slate-100 dark:bg-slate-800 dark:hover:bg-slate-700 flex items-center gap-2",onClick:ey,title:U?c?"Close Drawer":"Exit Fullscreen":"Enter Fullscreen",children:[U?s.jsx(sU,{className:"h-4 w-4"}):s.jsx(sq,{className:"h-4 w-4"}),U?c?"Close Drawer":"Exit Canvas":"Enter Canvas"]})]}),s.jsx("div",{className:`absolute top-4 right-4 transition-opacity duration-200 ${c?"opacity-0 pointer-events-none":"opacity-100"}`,style:{zIndex:c?10:1e3,pointerEvents:c?"none":"auto"},onMouseDown:e=>e.stopPropagation(),onTouchStart:e=>e.stopPropagation(),children:s.jsx("button",{className:"rounded-md bg-white px-3 py-2 text-sm shadow-md hover:bg-slate-100 dark:bg-slate-800 dark:hover:bg-slate-700",onClick:()=>{let e=new CustomEvent("show-tree-help");document.dispatchEvent(e)},title:"Help & Keyboard Shortcuts",children:s.jsx(k,{className:"h-4 w-4"})})}),s.jsx(T,{}),U&&d&&h&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("style",{children:`
            /* Standardized z-index system for TreeCanvas */
            
            /* Dialog layers */
            body:fullscreen [data-radix-dialog-overlay] {
              z-index: 50 !important;
            }
            body:fullscreen [data-radix-dialog-content] {
              z-index: 51 !important;
            }
            
            /* Sheet layers */
            body:fullscreen [data-radix-sheet-overlay] {
              z-index: 40 !important;
            }
            body:fullscreen [data-radix-sheet-content] {
              z-index: 41 !important;
            }
          `}),s.jsx(sV.d,{member:d,open:c,onOpenChange:h,allMembers:e,treeId:n,isTreeCanvasPage:!0,onMemberNavigate:g,onEditClick:m,onAddSpouseClick:p,onAddChildClick:f,onAddParentClick:x})]})]})}var s0=r(44794),s1=r(29280),s2=r(69654);function s5({open:e,onOpenChange:t,treeId:r,relativeTo:n,defaultRelationship:l,allMembers:o=[],onSuccess:d}){let[c,h]=(0,i.useState)(!1),[u,m]=(0,i.useState)({name:"",email:"",gender:"",dob:"",deceased:!1,relationship:l||"self",includeSecondParent:!1,selectedSecondParentId:"",becomeCoParent:!1,selectedChildrenIds:[],useExistingMember:!1,selectedExistingMemberId:""}),p=n?.spouseIds?.map(e=>o.find(t=>t.id===e)).filter(e=>void 0!==e)||[],f=n?.childIds?.map(e=>o.find(t=>t.id===e)).filter(e=>void 0!==e)||[],x="child"===u.relationship&&p.length>0,g="spouse"===u.relationship&&f.length>0,v=o.filter(e=>!!n&&e.id!==n.id&&("parent"===u.relationship?!n.childIds.includes(e.id)&&!e.childIds.includes(n.id):"spouse"!==u.relationship||!n.spouseIds.includes(e.id)&&!n.parentIds.includes(e.id)&&!n.childIds.includes(e.id))),_=("parent"===u.relationship||"spouse"===u.relationship)&&v.length>0,y=async e=>{e.preventDefault(),h(!0);try{let e;let s="http://localhost:8050/api";if(u.useExistingMember&&u.selectedExistingMemberId)e={id:u.selectedExistingMemberId};else{let t={name:u.name,email:u.email||void 0,gender:u.gender||void 0,dob:u.dob||void 0,deceased:u.deceased},i=await fetch(`${s}/trees/${r}/members`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!i.ok)throw Error("Failed to create member");e=await i.json()}if(n&&"self"!==u.relationship){let t="";switch(u.relationship){case"parent":t=`${s}/members/${e.id}/children?child_id=${n.id}`,console.log(`[AddMember] Adding parent ${u.useExistingMember?"existing member":e.name||u.name} to child ${n.name}`);break;case"child":if(x&&u.includeSecondParent){if(!u.selectedSecondParentId)throw Error('Please select a second parent or uncheck "Add second parent"');t=`${s}/members/${n.id}/children?child_id=${e.id}&second_parent_id=${u.selectedSecondParentId}`}else t=`${s}/members/${n.id}/children?child_id=${e.id}`;break;case"spouse":t=`${s}/members/${n.id}/spouse?spouse_id=${e.id}`}if(t){let e=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!e.ok){let t=await e.json().catch(()=>null);throw console.error("Failed to create relationship:",t),Error(`Failed to create relationship: ${t?.detail||e.statusText}`)}}if("spouse"===u.relationship&&u.becomeCoParent&&u.selectedChildrenIds.length>0)for(let t of u.selectedChildrenIds){let r=`${s}/members/${e.id}/children?child_id=${t}`,i=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>null);console.error("Failed to create co-parent relationship:",e),console.warn(`Could not add co-parent relationship with child ${t}: ${e?.detail||i.statusText}`)}}}m({name:"",email:"",gender:"",dob:"",deceased:!1,relationship:"self",includeSecondParent:!1,selectedSecondParentId:"",becomeCoParent:!1,selectedChildrenIds:[],useExistingMember:!1,selectedExistingMemberId:""}),t(!1),d?.()}catch(e){console.error("Error adding member:",e),alert("Failed to add member. Please try again.")}finally{h(!1)}};return s.jsx(N.Vq,{open:e,onOpenChange:t,children:s.jsx(N.cZ,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("form",{onSubmit:y,children:[(0,s.jsxs)(N.fK,{children:[s.jsx(N.$N,{children:(()=>{if(!n)return"Add First Member";let e=u.useExistingMember?"Connect":"Add";switch(u.relationship){case"parent":return`${e} Parent ${u.useExistingMember?"to":"of"} ${n.name}`;case"child":return`${e} Child ${u.useExistingMember?"to":"of"} ${n.name}`;case"spouse":return`${e} Spouse ${u.useExistingMember?"to":"of"} ${n.name}`;default:return"Add Family Member"}})()}),s.jsx(N.Be,{children:n?u.useExistingMember?`Select an existing family member to create a ${u.relationship} relationship`:"Fill in the details to add a new family member":"Add yourself or the oldest known ancestor to start your family tree"})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[n&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(s0._,{htmlFor:"relationship",children:["Relationship to ",n.name]}),(0,s.jsxs)(s1.Ph,{value:u.relationship,onValueChange:e=>m({...u,relationship:e,useExistingMember:!1,selectedExistingMemberId:""}),children:[s.jsx(s1.i4,{id:"relationship",children:s.jsx(s1.ki,{})}),(0,s.jsxs)(s1.Bw,{children:[s.jsx(s1.Ql,{value:"parent",children:"Parent"}),s.jsx(s1.Ql,{value:"spouse",children:"Spouse"}),s.jsx(s1.Ql,{value:"child",children:"Child"})]})]})]}),_&&(0,s.jsxs)("div",{className:"space-y-3 rounded-md border border-purple-200 bg-purple-50 p-4 dark:border-purple-900 dark:bg-purple-950",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-2",children:[s.jsx(s2.X,{id:"useExistingMember",checked:u.useExistingMember,onCheckedChange:e=>m({...u,useExistingMember:e,selectedExistingMemberId:""})}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx(s0._,{htmlFor:"useExistingMember",className:"cursor-pointer text-sm font-medium",children:"Use existing family member"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Select someone already in the tree instead of creating a new member"})]})]}),u.useExistingMember&&(0,s.jsxs)("div",{className:"space-y-2 pl-6",children:[s.jsx(s0._,{htmlFor:"existingMember",className:"text-sm",children:"Select Existing Member"}),(0,s.jsxs)(s1.Ph,{value:u.selectedExistingMemberId,onValueChange:e=>m({...u,selectedExistingMemberId:e}),children:[s.jsx(s1.i4,{id:"existingMember",children:s.jsx(s1.ki,{placeholder:"Choose existing member..."})}),s.jsx(s1.Bw,{children:v.map(e=>(0,s.jsxs)(s1.Ql,{value:e.id,children:[e.name," ",e.gender?`(${e.gender})`:""]},e.id))})]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["This will create a ",u.relationship," relationship with the selected member"]})]})]}),n&&"parent"===u.relationship&&n.parentIds&&n.parentIds.length>0&&s.jsx("div",{className:"space-y-3 rounded-md border border-amber-200 bg-amber-50 p-4 dark:border-amber-900 dark:bg-amber-950",children:s.jsx("div",{className:"flex items-start space-x-2",children:(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:"Adding Co-Parent"}),(0,s.jsxs)("p",{className:"text-xs text-amber-700 dark:text-amber-300 mt-1",children:[n.name," already has"," ",n.parentIds.length," parent",n.parentIds.length>1?"s":"",". The new parent will be placed in the same generation as the existing parent",n.parentIds.length>1?"s":"","to maintain proper family tree structure."]}),(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsxs)("p",{className:"text-xs font-medium text-amber-800 dark:text-amber-200",children:["Existing parent",n.parentIds.length>1?"s":"",":"]}),s.jsx("ul",{className:"text-xs text-amber-700 dark:text-amber-300 ml-2",children:n.parentIds.map(e=>{let t=o.find(t=>t.id===e);return(0,s.jsxs)("li",{children:["â€¢ ",t?.name||"Unknown"]},e)})})]})]})})}),x&&(0,s.jsxs)("div",{className:"space-y-3 rounded-md border border-blue-200 bg-blue-50 p-4 dark:border-blue-900 dark:bg-blue-950",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-2",children:[s.jsx(s2.X,{id:"includeSecondParent",checked:u.includeSecondParent,onCheckedChange:e=>m({...u,includeSecondParent:e})}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx(s0._,{htmlFor:"includeSecondParent",className:"cursor-pointer text-sm font-medium",children:"Add second parent"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Select which spouse/partner will be the other parent"})]})]}),u.includeSecondParent&&(0,s.jsxs)("div",{className:"space-y-2 pl-6",children:[s.jsx(s0._,{htmlFor:"secondParent",className:"text-sm",children:"Second Parent"}),(0,s.jsxs)(s1.Ph,{value:u.selectedSecondParentId,onValueChange:e=>m({...u,selectedSecondParentId:e}),children:[s.jsx(s1.i4,{id:"secondParent",children:s.jsx(s1.ki,{placeholder:"Select second parent"})}),s.jsx(s1.Bw,{children:p.map(e=>(0,s.jsxs)(s1.Ql,{value:e.id,children:[e.name," ",e.gender?`(${e.gender})`:""]},e.id))})]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["This will create parent-child relationships with both"," ",n?.name," and the selected parent"]})]})]}),g&&(0,s.jsxs)("div",{className:"space-y-3 rounded-md border border-green-200 bg-green-50 p-4 dark:border-green-900 dark:bg-green-950",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-2",children:[s.jsx(s2.X,{id:"becomeCoParent",checked:u.becomeCoParent,onCheckedChange:e=>{m({...u,becomeCoParent:e,selectedChildrenIds:e?f.map(e=>e.id):[]})}}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx(s0._,{htmlFor:"becomeCoParent",className:"cursor-pointer text-sm font-medium",children:"Become co-parent to existing children"}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Add this spouse as a parent to ",n?.name,"'s existing children"]})]})]}),u.becomeCoParent&&(0,s.jsxs)("div",{className:"space-y-2 pl-6",children:[s.jsx(s0._,{className:"text-sm",children:"Children to become parent of:"}),s.jsx("div",{className:"space-y-2",children:f.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(s2.X,{id:`child-${e.id}`,checked:u.selectedChildrenIds.includes(e.id),onCheckedChange:t=>{let r=t?[...u.selectedChildrenIds,e.id]:u.selectedChildrenIds.filter(t=>t!==e.id);m({...u,selectedChildrenIds:r})}}),(0,s.jsxs)(s0._,{htmlFor:`child-${e.id}`,className:"cursor-pointer text-sm",children:[e.name," ",e.gender?`(${e.gender})`:""]})]},e.id))}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"This will create parent-child relationships between the new spouse and selected children"})]})]}),!u.useExistingMember&&(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(s0._,{htmlFor:"name",children:"Name *"}),s.jsx(sG.I,{id:"name",placeholder:"Full name",value:u.name,onChange:e=>m({...u,name:e.target.value}),required:!0})]}),!u.useExistingMember&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(s0._,{htmlFor:"gender",children:"Gender"}),(0,s.jsxs)(s1.Ph,{value:u.gender,onValueChange:e=>m({...u,gender:e}),children:[s.jsx(s1.i4,{id:"gender",children:s.jsx(s1.ki,{placeholder:"Select gender"})}),(0,s.jsxs)(s1.Bw,{children:[s.jsx(s1.Ql,{value:"male",children:"Male"}),s.jsx(s1.Ql,{value:"female",children:"Female"}),s.jsx(s1.Ql,{value:"unspecified",children:"Prefer not to say"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(s0._,{htmlFor:"dob",children:"Date of Birth"}),s.jsx(sG.I,{id:"dob",type:"date",value:u.dob,onChange:e=>m({...u,dob:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(s0._,{htmlFor:"email",children:"Email (optional)"}),s.jsx(sG.I,{id:"email",type:"email",placeholder:"email@example.com",value:u.email,onChange:e=>m({...u,email:e.target.value})})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(s2.X,{id:"deceased",checked:u.deceased,onCheckedChange:e=>m({...u,deceased:e})}),s.jsx(s0._,{htmlFor:"deceased",className:"cursor-pointer text-sm font-normal",children:"Deceased"})]})]})]}),(0,s.jsxs)(N.cN,{children:[s.jsx(a.z,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),(0,s.jsxs)(a.z,{type:"submit",disabled:c||!u.useExistingMember&&!u.name.trim()||u.useExistingMember&&!u.selectedExistingMemberId,children:[c&&s.jsx(sB.Z,{className:"mr-2 h-4 w-4 animate-spin"}),u.useExistingMember?"Add Relationship":"Add Member"]})]})]})})})}var s4=r(22995),s3=r(82015),s8=r(72427);let s9=(0,C.Z)("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var s6=r(94019),s7=r(74975),ie=r(37202),it=r(32887);function ir({open:e,onOpenChange:t,member:r,allMembers:n,treeSettings:l,onSuccess:d,onMemberUpdate:c}){let{toast:h}=(0,u.pm)(),[m,p]=(0,i.useState)(!1),[f,x]=(0,i.useState)(!1),[g,v]=(0,i.useState)(null),[_,y]=(0,i.useState)(null),[b,j]=(0,i.useState)({name:"",email:"",avatar_url:"",gender:"",pronouns:"",dob:"",dod:"",deceased:!1,birth_place:"",death_place:"",occupation:"",bio:"",notes:""}),[w,C]=(0,i.useState)([]),[k,T]=(0,i.useState)([]),[S,M]=(0,i.useState)(""),[E,P]=(0,i.useState)("");if(!r)return null;let A=(e,t=new Set)=>{if(t.has(e))return 0;t.add(e);let r=n.find(t=>t.id===e);if(!r||0===r.parentIds.length)return 0;let s=r.parentIds.map(e=>A(e,t)).filter(e=>null!==e);return s.length>0?Math.max(...s)+1:0},D=e=>{let t=A(r.id);return A(e)>=t?{type:"generation_mismatch",message:`Generation mismatch: The selected parent is in the same or later generation as ${r.name}.`,consequences:"This may cause layout issues and logical inconsistencies in the family tree. The tree structure may not reflect accurate generational relationships."}:null},O=e=>{let t=l.maxParentsPerChild||1/0;return e>t?{type:"max_exceeded",message:`Maximum parents exceeded: This tree allows a maximum of ${t} parent(s) per child.`,consequences:`${r.name} currently has ${w.length} parent(s). Adding more would violate tree settings.`}:null},F=e=>{if(l.monogamy&&e>1)return{type:"max_exceeded",message:"Monogamy enforced: This tree only allows one spouse per member.",consequences:`${r.name} already has a spouse. Remove existing spouse before adding a new one.`};let t=l.maxSpousesPerMember||1/0;return e>t?{type:"max_exceeded",message:`Maximum spouses exceeded: This tree allows a maximum of ${t} spouse(s) per member.`,consequences:`${r.name} would have ${e} spouse(s), which exceeds the limit.`}:null},I=e=>{let t=(e,r,s=new Set)=>{if(s.has(r))return!1;s.add(r);let i=n.find(e=>e.id===r);return!!i&&(!!i.parentIds.includes(e)||i.parentIds.some(r=>t(e,r,s)))};return t(r.id,e)?{type:"circular_relationship",message:"Circular relationship detected: The selected parent is a descendant of this member.",consequences:"This would create a logical impossibility (parent being their own ancestor/descendant)."}:null},z=async e=>{let t=I(e);if(t){v(t),x(!0);return}let r=O(w.length+1);if(r){h({title:"Cannot Add Parent",description:r.message,variant:"destructive"});return}let s=D(e);if(s){v(s),y(()=>async()=>{await $(e)}),x(!0);return}await $(e)},$=async e=>{try{if(!(await fetch(`http://localhost:8050/api/members/${e}/children?child_id=${r.id}`,{method:"POST",credentials:"include"})).ok)throw Error("Failed to add parent relationship");C([...w,e]),h({title:"Parent Added",description:"Parent relationship created successfully"}),d?.()}catch(e){h({title:"Error",description:"Failed to add parent relationship",variant:"destructive"})}},R=async e=>{try{if(!(await fetch(`http://localhost:8050/api/members/${e}/children/${r.id}`,{method:"DELETE",credentials:"include"})).ok)throw Error("Failed to remove parent relationship");C(w.filter(t=>t!==e)),h({title:"Parent Removed",description:"Parent relationship removed successfully"}),d?.()}catch(e){h({title:"Error",description:"Failed to remove parent relationship",variant:"destructive"})}},B=async e=>{let t=F(k.length+1);if(t){h({title:"Cannot Add Spouse",description:t.message,variant:"destructive"});return}try{if(!(await fetch(`http://localhost:8050/api/members/${r.id}/spouse?spouse_id=${e}`,{method:"POST",credentials:"include"})).ok)throw Error("Failed to add spouse relationship");T([...k,e]),h({title:"Spouse Added",description:"Spouse relationship created successfully"}),d?.()}catch(e){h({title:"Error",description:"Failed to add spouse relationship",variant:"destructive"})}},L=async()=>{if(!S.trim()){h({title:"Validation Error",description:"Please enter spouse name",variant:"destructive"});return}let e=F(k.length+1);if(e){h({title:"Cannot Add Spouse",description:e.message,variant:"destructive"});return}try{p(!0);let e="http://localhost:8050/api",t=await fetch(`${e}/trees/${r.tree_id}/members`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:S.trim(),gender:E||void 0,deceased:!1})});if(!t.ok)throw Error("Failed to create spouse member");let s=await t.json();if(!(await fetch(`${e}/members/${r.id}/spouse?spouse_id=${s.id}`,{method:"POST",credentials:"include"})).ok)throw Error("Failed to create spouse relationship");T([...k,s.id]),M(""),P(""),h({title:"Spouse Added",description:`${S} has been added as spouse`}),d?.()}catch(e){h({title:"Error",description:"Failed to add new spouse",variant:"destructive"})}finally{p(!1)}},Z=async e=>{try{if(!(await fetch(`http://localhost:8050/api/members/${r.id}/spouse/${e}`,{method:"DELETE",credentials:"include"})).ok)throw Error("Failed to remove spouse relationship");T(k.filter(t=>t!==e)),h({title:"Spouse Removed",description:"Spouse relationship removed successfully"}),d?.()}catch(e){h({title:"Error",description:"Failed to remove spouse relationship",variant:"destructive"})}},Y=async()=>{try{p(!0);let e={};if(b.name?.trim()&&(e.name=b.name.trim()),b.email?.trim()&&(e.email=b.email.trim()),b.avatar_url?.trim()&&(e.avatar_url=b.avatar_url.trim()),b.gender?.trim()&&(e.gender=b.gender.trim()),b.pronouns?.trim()&&(e.pronouns=b.pronouns.trim()),b.dob?.trim()&&(e.dob=b.dob.trim()),b.dod?.trim()&&(e.dod=b.dod.trim()),b.birth_place?.trim()&&(e.birth_place=b.birth_place.trim()),b.death_place?.trim()&&(e.death_place=b.death_place.trim()),b.occupation?.trim()&&(e.occupation=b.occupation.trim()),b.bio?.trim()&&(e.bio=b.bio.trim()),b.notes?.trim()&&(e.notes=b.notes.trim()),e.deceased=b.deceased,!e.name){h({title:"Validation Error",description:"Name is required",variant:"destructive"});return}console.log("Sending member update payload:",e);let t=await fetch(`http://localhost:8050/api/members/${r.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){let e=await t.json().catch(()=>({}));throw console.error("Member update failed:",t.status,e),Error(e.message||`Failed to update member (${t.status})`)}h({title:"Success",description:"Member updated successfully"}),d?.()}catch(e){console.error("Error updating member:",e),h({title:"Error",description:e instanceof Error?e.message:"Failed to update member",variant:"destructive"})}finally{p(!1)}},X=n.filter(e=>e.id!==r.id&&!w.includes(e.id)&&!r.childIds.includes(e.id)),U=n.filter(e=>e.id!==r.id&&!k.includes(e.id)&&!r.parentIds.includes(e.id)&&!r.childIds.includes(e.id));return(0,s.jsxs)(s.Fragment,{children:[s.jsx(N.Vq,{open:e,onOpenChange:t,children:(0,s.jsxs)(N.cZ,{className:"max-w-3xl max-h-[95vh] sm:max-h-[90vh] overflow-hidden flex flex-col",children:[(0,s.jsxs)(N.fK,{children:[(0,s.jsxs)(N.$N,{children:["Edit ",r.name]}),s.jsx(N.Be,{children:"Update member information and manage relationships"})]}),(0,s.jsxs)("div",{className:"space-y-6 py-4 flex-1 overflow-y-auto",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Basic Information"}),s.jsx("div",{className:"flex justify-center py-4",children:s.jsx(it.G,{currentAvatarUrl:b.avatar_url,userInitials:r.name.split(" ").map(e=>e[0]).join("").slice(0,2),onAvatarChange:e=>{j({...b,avatar_url:e||""}),c?.()},uploadEndpoint:`http://localhost:8050/api/members/${r.id}/avatar`,deleteEndpoint:`http://localhost:8050/api/members/${r.id}/avatar`,size:"lg"})}),(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(s0._,{htmlFor:"name",children:"Name *"}),s.jsx(sG.I,{id:"name",value:b.name,onChange:e=>j({...b,name:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(s0._,{htmlFor:"email",children:"Email"}),s.jsx(sG.I,{id:"email",type:"email",value:b.email,onChange:e=>j({...b,email:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(s0._,{htmlFor:"gender",children:"Gender"}),(0,s.jsxs)(s1.Ph,{value:b.gender,onValueChange:e=>j({...b,gender:e}),children:[s.jsx(s1.i4,{id:"gender",children:s.jsx(s1.ki,{placeholder:"Select gender"})}),(0,s.jsxs)(s1.Bw,{children:[s.jsx(s1.Ql,{value:"male",children:"Male"}),s.jsx(s1.Ql,{value:"female",children:"Female"}),s.jsx(s1.Ql,{value:"non-binary",children:"Non-binary"}),s.jsx(s1.Ql,{value:"other",children:"Other"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(s0._,{htmlFor:"pronouns",children:"Pronouns"}),s.jsx(sG.I,{id:"pronouns",value:b.pronouns,onChange:e=>j({...b,pronouns:e.target.value}),placeholder:"they/them, she/her, he/him"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(s0._,{htmlFor:"dob",children:"Date of Birth"}),s.jsx(sG.I,{id:"dob",type:"date",value:b.dob,onChange:e=>j({...b,dob:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(s0._,{htmlFor:"occupation",children:"Occupation"}),s.jsx(sG.I,{id:"occupation",value:b.occupation,onChange:e=>j({...b,occupation:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(s0._,{htmlFor:"birth_place",children:"Birth Place"}),s.jsx(sG.I,{id:"birth_place",value:b.birth_place,onChange:e=>j({...b,birth_place:e.target.value}),placeholder:"City, Country"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(s2.X,{id:"deceased",checked:b.deceased,onCheckedChange:e=>j({...b,deceased:e})}),s.jsx(s0._,{htmlFor:"deceased",className:"cursor-pointer",children:"Deceased"})]}),b.deceased&&(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(s0._,{htmlFor:"dod",children:"Date of Death"}),s.jsx(sG.I,{id:"dod",type:"date",value:b.dod,onChange:e=>j({...b,dod:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(s0._,{htmlFor:"death_place",children:"Death Place"}),s.jsx(sG.I,{id:"death_place",value:b.death_place,onChange:e=>j({...b,death_place:e.target.value}),placeholder:"City, Country"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(s0._,{htmlFor:"bio",children:"Biography"}),s.jsx(s3.g,{id:"bio",value:b.bio,onChange:e=>j({...b,bio:e.target.value}),placeholder:"Brief biography or life story...",rows:3})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(s0._,{htmlFor:"notes",children:"Notes"}),s.jsx(s3.g,{id:"notes",value:b.notes,onChange:e=>j({...b,notes:e.target.value}),placeholder:"Additional notes or information...",rows:3})]})]}),(0,s.jsxs)(a.z,{onClick:Y,disabled:m,children:[m&&s.jsx(sB.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Basic Info"]})]}),s.jsx(s8.Z,{}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Parents"}),(0,s.jsxs)(o.C,{variant:"outline",children:[w.length," /"," ",l.maxParentsPerChild||"âˆž"]})]}),s.jsx("div",{className:"space-y-2",children:w.map(e=>{let t=n.find(t=>t.id===e);return t?(0,s.jsxs)("div",{className:"flex items-center justify-between rounded-md border p-3",children:[s.jsx("span",{children:t.name}),s.jsx(a.z,{variant:"ghost",size:"sm",onClick:()=>R(e),children:s.jsx(s9,{className:"h-4 w-4"})})]},e):null})}),X.length>0&&(0,s.jsxs)(s1.Ph,{onValueChange:z,children:[s.jsx(s1.i4,{children:s.jsx(s1.ki,{placeholder:"Add parent from tree..."})}),s.jsx(s1.Bw,{children:X.map(e=>s.jsx(s1.Ql,{value:e.id,children:e.name},e.id))})]})]}),s.jsx(s8.Z,{}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Spouses"}),(0,s.jsxs)(o.C,{variant:"outline",children:[k.length," /"," ",l.monogamy?"1":l.maxSpousesPerMember||"âˆž"]})]}),s.jsx("div",{className:"space-y-2",children:k.map(e=>{let t=n.find(t=>t.id===e);return t?(0,s.jsxs)("div",{className:"flex items-center justify-between rounded-md border p-3",children:[s.jsx("span",{children:t.name}),s.jsx(a.z,{variant:"ghost",size:"sm",onClick:()=>Z(e),children:s.jsx(s6.Z,{className:"h-4 w-4"})})]},e):null})}),U.length>0&&(0,s.jsxs)(s1.Ph,{onValueChange:B,children:[s.jsx(s1.i4,{children:s.jsx(s1.ki,{placeholder:"Add existing member as spouse..."})}),s.jsx(s1.Bw,{children:U.map(e=>s.jsx(s1.Ql,{value:e.id,children:e.name},e.id))})]}),(0,s.jsxs)("div",{className:"rounded-md border p-4 space-y-3",children:[s.jsx(s0._,{children:"Or add new spouse to tree"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx(sG.I,{placeholder:"Spouse name",value:S,onChange:e=>M(e.target.value)}),(0,s.jsxs)(s1.Ph,{value:E,onValueChange:P,children:[s.jsx(s1.i4,{className:"w-[140px]",children:s.jsx(s1.ki,{placeholder:"Gender"})}),(0,s.jsxs)(s1.Bw,{children:[s.jsx(s1.Ql,{value:"male",children:"Male"}),s.jsx(s1.Ql,{value:"female",children:"Female"}),s.jsx(s1.Ql,{value:"other",children:"Other"})]})]}),s.jsx(a.z,{onClick:L,disabled:m,children:s.jsx(s7.Z,{className:"h-4 w-4"})})]})]})]})]}),s.jsx(N.cN,{children:s.jsx(a.z,{variant:"outline",onClick:()=>t(!1),children:"Close"})})]})}),s.jsx(s4.aR,{open:f,onOpenChange:x,children:(0,s.jsxs)(s4._T,{children:[(0,s.jsxs)(s4.fY,{children:[(0,s.jsxs)(s4.f$,{className:"flex items-center gap-2",children:[s.jsx(ie.Z,{className:"h-5 w-5 text-yellow-500"}),"Validation Warning"]}),(0,s.jsxs)(s4.yT,{className:"space-y-2",children:[s.jsx("p",{className:"font-semibold",children:g?.message}),s.jsx("p",{className:"text-sm",children:g?.consequences}),s.jsx("p",{className:"text-sm font-medium mt-4",children:"Do you want to proceed anyway?"})]})]}),(0,s.jsxs)(s4.xo,{children:[s.jsx(s4.le,{onClick:()=>{x(!1),y(null),v(null)},children:"Cancel"}),s.jsx(s4.OL,{onClick:async()=>{_&&await _(),x(!1),y(null),v(null)},children:"Proceed Anyway"})]})]})})]})}var is=r(38165),ii=r(98023),ia=r(88378),il=r(51110),io=r(24061),id=r(18019),ic=r(92771);function ih(){let e=(0,n.useParams)(),t=(0,n.useRouter)(),{toast:r}=(0,u.pm)(),[m,p]=(0,i.useState)(null),[f,x]=(0,i.useState)(!0),[g,v]=(0,i.useState)(null),[_,y]=(0,i.useState)(!1),[b,j]=(0,i.useState)(!1),[w,N]=(0,i.useState)(!1),[C,k]=(0,i.useState)(void 0),[T,S]=(0,i.useState)(void 0),[M,E]=(0,i.useState)(!1),[P,A]=(0,i.useState)(!1),[D,O]=(0,i.useState)(null),F=e.id;(0,sK.Il)(F);let{members:I,loading:z,error:$,refetch:R}=(0,ii.r)({treeId:F,autoFetch:!0});if(f)return s.jsx(h.c,{children:s.jsx("div",{className:"flex items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx(sB.Z,{className:"h-12 w-12 animate-spin text-primary mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading tree..."})]})})});if(!m)return null;let B="custodian"===m.user_role,L="custodian"===m.user_role||"contributor"===m.user_role,Z=e=>{let t=I.find(t=>t.id===e);t&&v(t)},Y=(e,t)=>{k(e),S(t),j(!0)};return(0,s.jsxs)(h.c,{children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:m.name}),s.jsx(o.C,{variant:"custodian"===m.user_role?"default":"contributor"===m.user_role?"secondary":"outline",children:m.user_role})]}),m.description&&s.jsx("p",{className:"text-muted-foreground",children:m.description})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[L&&(0,s.jsxs)(a.z,{variant:"outline",onClick:()=>Y(),children:[s.jsx(s7.Z,{className:"h-4 w-4 mr-2"}),"Add Member"]}),B&&(0,s.jsxs)(a.z,{variant:"outline",onClick:()=>t.push(`/trees/${F}/settings`),children:[s.jsx(ia.Z,{className:"h-4 w-4 mr-2"}),"Settings"]})]})]}),(0,s.jsxs)(d.mQ,{defaultValue:"visualization",className:"space-y-4",children:[(0,s.jsxs)(d.dr,{children:[(0,s.jsxs)(d.SP,{value:"visualization",children:[s.jsx(il.Z,{className:"h-4 w-4 mr-2"}),"Tree View"]}),(0,s.jsxs)(d.SP,{value:"members",children:[s.jsx(io.Z,{className:"h-4 w-4 mr-2"}),"Members (",I.length,")"]}),(0,s.jsxs)(d.SP,{value:"info",children:[s.jsx(id.Z,{className:"h-4 w-4 mr-2"}),"Information"]})]}),s.jsx(d.nU,{value:"visualization",className:"space-y-4",children:(0,s.jsxs)(l.Zb,{children:[(0,s.jsxs)(l.Ol,{children:[s.jsx(l.ll,{children:"Family Tree Visualization"}),s.jsx(l.SZ,{children:"Interactive view of your family tree with all members and relationships. Click and drag to pan, scroll to zoom, click members to view details."})]}),s.jsx(l.aY,{className:"p-0",children:z?s.jsx("div",{className:"flex h-[600px] items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx(sB.Z,{className:"mx-auto mb-4 h-12 w-12 animate-spin text-primary"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading family tree..."})]})}):$?s.jsx("div",{className:"flex h-[600px] items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx(ic.Z,{className:"mx-auto mb-4 h-16 w-16 text-destructive"}),s.jsx("h3",{className:"mb-2 text-xl font-semibold",children:"Error Loading Tree"}),s.jsx("p",{className:"mb-6 text-muted-foreground",children:$.message}),s.jsx(a.z,{onClick:()=>R(),children:"Try Again"})]})}):0===I.length?s.jsx("div",{className:"relative flex h-[600px] items-center justify-center border-2 border-dashed",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx(ic.Z,{className:"mx-auto mb-4 h-16 w-16 text-muted-foreground"}),s.jsx("h3",{className:"mb-2 text-xl font-semibold",children:"Start Building Your Family Tree"}),s.jsx("p",{className:"mb-6 max-w-md text-muted-foreground",children:"Add yourself as the first member to begin creating your tree. You can then add parents, spouses, children, and siblings to build out your family history."}),L&&(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,s.jsxs)(a.z,{onClick:()=>Y(),size:"lg",children:[s.jsx(s7.Z,{className:"mr-2 h-5 w-5"}),"Add Yourself"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"You'll be the root of this family tree"})]})]})}):(0,s.jsxs)("div",{className:"relative h-[600px] w-full",children:[s.jsx(sJ,{members:I,selectedMemberId:g?.id,onMemberClick:e=>{v(e),y(!0)},onCenterOnMember:Z,treeId:F,selectedMember:g,drawerOpen:_,onDrawerOpenChange:y,onEditClick:()=>{y(!1),N(!0)},onAddSpouseClick:()=>{y(!1),Y(g||void 0,"spouse")},onAddChildClick:()=>{y(!1),Y(g||void 0,"child")},onAddParentClick:()=>{y(!1),Y(g||void 0,"parent")},onMemberNavigate:e=>{v(e),Z(e.id)},onRelationshipAnalyze:(e,t)=>{O({fromMemberId:e,toMemberId:t});let r=I.find(t=>t.id===e);r&&v(r),A(!0)}}),L&&s.jsx("div",{className:"absolute bottom-4 left-4 z-10",children:(0,s.jsxs)(a.z,{onClick:()=>Y(),size:"lg",className:"shadow-lg",children:[s.jsx(s7.Z,{className:"mr-2 h-5 w-5"}),"Add Member"]})})]})})]})}),s.jsx(d.nU,{value:"members",className:"space-y-4",children:(0,s.jsxs)(l.Zb,{children:[(0,s.jsxs)(l.Ol,{children:[s.jsx(l.ll,{children:"Family Members"}),s.jsx(l.SZ,{children:"Browse and manage all members in this family tree"})]}),s.jsx(l.aY,{children:z?s.jsx("div",{className:"flex h-[200px] items-center justify-center",children:s.jsx(sB.Z,{className:"h-8 w-8 animate-spin text-primary"})}):0===I.length?(0,s.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-12 text-center",children:[s.jsx(io.Z,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Members Yet"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Start by adding family members to build your tree"}),L&&(0,s.jsxs)(a.z,{onClick:()=>t.push(`/trees/${F}/members/new`),children:[s.jsx(s7.Z,{className:"h-4 w-4 mr-2"}),"Add Member"]})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[I.length," member",1!==I.length?"s":""," ","in this tree"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[I.length>=2&&(0,s.jsxs)(a.z,{variant:"outline",onClick:()=>t.push(`/trees/${F}/relationships`),children:[s.jsx(il.Z,{className:"h-4 w-4 mr-2"}),"Analyze Relationships"]}),s.jsx(a.z,{variant:"outline",onClick:()=>t.push(`/trees/${F}/members`),children:"View All Members"})]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:I.slice(0,6).map(e=>s.jsx(l.Zb,{className:"cursor-pointer hover:border-primary/50",onClick:()=>{v(e),y(!0)},children:s.jsx(l.aY,{className:"p-3",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 text-center",children:[(0,s.jsxs)(c.qE,{className:"h-12 w-12",children:[s.jsx(c.F$,{src:e.avatar_url?`${process.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:8050"}${e.avatar_url}`:void 0,alt:e.name}),s.jsx(c.Q5,{className:"bg-blue-400 text-white font-semibold",children:e.name.split(" ").map(e=>e[0]).join("").slice(0,2)})]}),s.jsx("p",{className:"text-xs font-medium line-clamp-2",children:e.name})]})})},e.id))}),I.length>6&&s.jsx("div",{className:"text-center pt-2",children:(0,s.jsxs)(a.z,{variant:"link",onClick:()=>t.push(`/trees/${F}/members`),children:["View all ",I.length," members â†’"]})})]})})]})}),s.jsx(d.nU,{value:"info",className:"space-y-4",children:(0,s.jsxs)(l.Zb,{children:[(0,s.jsxs)(l.Ol,{children:[s.jsx(l.ll,{children:"Tree Information"}),s.jsx(l.SZ,{children:"Details about this family tree and its settings"})]}),(0,s.jsxs)(l.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:"Inclusive Settings"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Same-Sex Relationships"}),s.jsx(o.C,{variant:m.settings?.allowSameSex?"default":"outline",children:m.settings?.allowSameSex?"Allowed":"Not Allowed"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Polygamy"}),s.jsx(o.C,{variant:m.settings?.allowPolygamy?"default":"outline",children:m.settings?.allowPolygamy?"Allowed":"Not Allowed"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Monogamy"}),s.jsx(o.C,{variant:m.settings?.monogamy?"default":"outline",children:m.settings?.monogamy?"Enforced":"Not Enforced"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Single Parent Families"}),s.jsx(o.C,{variant:m.settings?.allowSingleParent?"default":"outline",children:m.settings?.allowSingleParent?"Allowed":"Not Allowed"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Multi-Parent Children"}),s.jsx(o.C,{variant:m.settings?.allowMultiParentChildren?"default":"outline",children:m.settings?.allowMultiParentChildren?"Allowed":"Not Allowed"})]}),m.settings?.maxParentsPerChild&&(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Max Parents per Child"}),s.jsx(o.C,{variant:"secondary",children:m.settings.maxParentsPerChild})]}),m.settings?.maxSpousesPerMember&&(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Max Spouses per Member"}),s.jsx(o.C,{variant:"secondary",children:m.settings.maxSpousesPerMember})]})]})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:"Tree Details"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Created"}),s.jsx("span",{children:new Date(m.created_at).toLocaleDateString()})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Your Role"}),s.jsx(o.C,{variant:"custodian"===m.user_role?"default":"secondary",children:m.user_role})]})]})]})]})]})})]})]}),!M&&s.jsx(sV.d,{member:g,open:_,onOpenChange:y,allMembers:I,treeId:F,isTreeCanvasPage:!0,onMemberNavigate:e=>{v(e),Z(e.id)},onEditClick:()=>{y(!1),N(!0)},onAddSpouseClick:()=>{y(!1),Y(g||void 0,"spouse")},onAddChildClick:()=>{y(!1),Y(g||void 0,"child")},onAddParentClick:()=>{y(!1),Y(g||void 0,"parent")}}),s.jsx(ir,{open:w,onOpenChange:N,member:g,allMembers:I,treeSettings:m.settings,onSuccess:()=>{R(),N(!1),r({title:"Success",description:"Member updated successfully"})},onMemberUpdate:R}),s.jsx(s5,{open:b,onOpenChange:j,treeId:F,relativeTo:C,defaultRelationship:T,allMembers:I,onSuccess:()=>{R(),r({title:"Success",description:"Family member added successfully"})}}),D&&s.jsx(is.D,{open:P,onOpenChange:A,members:I,treeId:F,selectedMember:g})]})}},32887:(e,t,r)=>{"use strict";r.d(t,{G:()=>g});var s=r(10326),i=r(17577),n=r(12591),a=r(91664),l=r(24118),o=r(3594),d=r(51896),c=r(75290),h=r(94019),u=r(84097);async function m(e,t){let r=await new Promise((t,r)=>{let s=new Image;s.addEventListener("load",()=>t(s)),s.addEventListener("error",e=>r(e)),s.src=e}),s=document.createElement("canvas"),i=s.getContext("2d");if(!i)throw Error("No 2d context");return s.width=t.width,s.height=t.height,i.drawImage(r,t.x,t.y,t.width,t.height,0,0,t.width,t.height),new Promise((e,t)=>{s.toBlob(r=>{r?e(r):t(Error("Canvas is empty"))},"image/jpeg",.85)})}let p={sm:"h-16 w-16",md:"h-20 w-20",lg:"h-24 w-24"},f={sm:"h-6 w-6",md:"h-7 w-7",lg:"h-8 w-8"},x={sm:"h-3 w-3",md:"h-4 w-4",lg:"h-4 w-4"};function g({currentAvatarUrl:e,userInitials:t,onAvatarChange:r,uploadEndpoint:g,deleteEndpoint:v,size:_="lg"}){let{toast:y}=(0,u.pm)(),[b,j]=(0,i.useState)(!1),[w,N]=(0,i.useState)(null),[C,k]=(0,i.useState)({x:0,y:0}),[T,S]=(0,i.useState)(1),[M,E]=(0,i.useState)(null),[P,A]=(0,i.useState)(!1),[D,O]=(0,i.useState)(!1),F=(0,i.useCallback)((e,t)=>{E(t)},[]),I=async()=>{if(w&&M){A(!0);try{let e=await m(w,M),t=new FormData;t.append("file",e,"avatar.jpg");let s=await fetch(g||"http://localhost:8050/api/users/me/avatar",{method:"POST",body:t,credentials:"include"});if(!s.ok){let e=await s.json();throw Error(e.detail||"Failed to upload avatar")}let i=await s.json();y({title:"Success",description:"Avatar uploaded successfully"}),r&&i.avatar_url&&r(i.avatar_url),j(!1),N(null),k({x:0,y:0}),S(1)}catch(e){console.error("Error uploading avatar:",e),y({title:"Error",description:e instanceof Error?e.message:"Failed to upload avatar",variant:"destructive"})}finally{A(!1)}}},z=async()=>{if(e){O(!0);try{let e=await fetch(v||"http://localhost:8050/api/users/me/avatar",{method:"DELETE",credentials:"include"});if(!e.ok){let t=await e.json();throw Error(t.detail||"Failed to delete avatar")}y({title:"Success",description:"Avatar deleted successfully"}),r&&r(null)}catch(e){console.error("Error deleting avatar:",e),y({title:"Error",description:e instanceof Error?e.message:"Failed to delete avatar",variant:"destructive"})}finally{O(!1)}}},$=e?e.startsWith("/uploads")?`${process.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:8050"}${e}`:(e.startsWith("http"),e):void 0;return(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)(o.qE,{className:p[_],children:[s.jsx(o.F$,{src:$,alt:"Avatar"}),s.jsx(o.Q5,{className:`${"sm"===_?"text-sm":"md"===_?"text-lg":"text-2xl"} bg-primary/10`,children:t})]}),(0,s.jsxs)("label",{htmlFor:"avatar-upload",className:`absolute bottom-0 right-0 ${f[_]} rounded-full bg-primary text-primary-foreground flex items-center justify-center cursor-pointer hover:bg-primary/90 transition-colors`,children:[s.jsx(d.Z,{className:x[_]}),s.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",className:"hidden",onChange:e=>{if(e.target.files&&e.target.files.length>0){let t=e.target.files[0];if(t.size>5242880){y({title:"File too large",description:"Please select an image smaller than 5MB",variant:"destructive"});return}if(!t.type.startsWith("image/")){y({title:"Invalid file type",description:"Please select an image file",variant:"destructive"});return}let r=new FileReader;r.addEventListener("load",()=>{N(r.result),j(!0)}),r.readAsDataURL(t)}}})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[s.jsx("label",{htmlFor:"avatar-upload",className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 cursor-pointer",children:"Change Avatar"}),e&&s.jsx(a.z,{variant:"outline",size:"sm",onClick:z,disabled:D,children:D?(0,s.jsxs)(s.Fragment,{children:[s.jsx(c.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(h.Z,{className:"mr-2 h-4 w-4"}),"Remove Avatar"]})})]}),s.jsx(l.Vq,{open:b,onOpenChange:j,children:(0,s.jsxs)(l.cZ,{className:"sm:max-w-[600px]",children:[(0,s.jsxs)(l.fK,{children:[s.jsx(l.$N,{children:"Crop your avatar"}),s.jsx(l.Be,{children:"Adjust the image to fit within the circle"})]}),s.jsx("div",{className:"relative h-[400px] bg-muted rounded-lg overflow-hidden",children:w&&s.jsx(n.ZP,{image:w,crop:C,zoom:T,aspect:1,cropShape:"round",showGrid:!1,onCropChange:k,onCropComplete:F,onZoomChange:S})}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"zoom",className:"text-sm font-medium",children:"Zoom"}),s.jsx("input",{id:"zoom",type:"range",min:1,max:3,step:.1,value:T,onChange:e=>S(Number(e.target.value)),className:"w-full"})]}),(0,s.jsxs)(l.cN,{children:[s.jsx(a.z,{variant:"outline",onClick:()=>{j(!1),N(null)},disabled:P,children:"Cancel"}),s.jsx(a.z,{onClick:I,disabled:P,children:P?(0,s.jsxs)(s.Fragment,{children:[s.jsx(c.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):"Upload"})]})]})})]})}},22995:(e,t,r)=>{"use strict";r.d(t,{aR:()=>D,OL:()=>L,le:()=>Z,_T:()=>I,yT:()=>B,xo:()=>$,fY:()=>z,f$:()=>R,vW:()=>O});var s=r(10326),i=r(17577),n=r(93095),a=r(48051),l=r(98958),o=r(82561),d=r(34214),c="AlertDialog",[h,u]=(0,n.b)(c,[l.p8]),m=(0,l.p8)(),p=e=>{let{__scopeAlertDialog:t,...r}=e,i=m(t);return(0,s.jsx)(l.fC,{...i,...r,modal:!0})};p.displayName=c;var f=i.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,n=m(r);return(0,s.jsx)(l.xz,{...n,...i,ref:t})});f.displayName="AlertDialogTrigger";var x=e=>{let{__scopeAlertDialog:t,...r}=e,i=m(t);return(0,s.jsx)(l.h_,{...i,...r})};x.displayName="AlertDialogPortal";var g=i.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,n=m(r);return(0,s.jsx)(l.aV,{...n,...i,ref:t})});g.displayName="AlertDialogOverlay";var v="AlertDialogContent",[_,y]=h(v),b=(0,d.sA)("AlertDialogContent"),j=i.forwardRef((e,t)=>{let{__scopeAlertDialog:r,children:n,...d}=e,c=m(r),h=i.useRef(null),u=(0,a.e)(t,h),p=i.useRef(null);return(0,s.jsx)(l.jm,{contentName:v,titleName:w,docsSlug:"alert-dialog",children:(0,s.jsx)(_,{scope:r,cancelRef:p,children:(0,s.jsxs)(l.VY,{role:"alertdialog",...c,...d,ref:u,onOpenAutoFocus:(0,o.Mj)(d.onOpenAutoFocus,e=>{e.preventDefault(),p.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,s.jsx)(b,{children:n}),(0,s.jsx)(E,{contentRef:h})]})})})});j.displayName=v;var w="AlertDialogTitle",N=i.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,n=m(r);return(0,s.jsx)(l.Dx,{...n,...i,ref:t})});N.displayName=w;var C="AlertDialogDescription",k=i.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,n=m(r);return(0,s.jsx)(l.dk,{...n,...i,ref:t})});k.displayName=C;var T=i.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,n=m(r);return(0,s.jsx)(l.x8,{...n,...i,ref:t})});T.displayName="AlertDialogAction";var S="AlertDialogCancel",M=i.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,{cancelRef:n}=y(S,r),o=m(r),d=(0,a.e)(t,n);return(0,s.jsx)(l.x8,{...o,...i,ref:d})});M.displayName=S;var E=({contentRef:e})=>{let t=`\`${v}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${v}\` by passing a \`${C}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${v}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return i.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},P=r(51223),A=r(91664);let D=p,O=f,F=i.forwardRef(({className:e,...t},r)=>s.jsx(g,{className:(0,P.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));F.displayName=g.displayName;let I=i.forwardRef(({className:e,...t},r)=>(0,s.jsxs)(x,{children:[s.jsx(F,{}),s.jsx(j,{ref:r,className:(0,P.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));I.displayName=j.displayName;let z=({className:e,...t})=>s.jsx("div",{className:(0,P.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});z.displayName="AlertDialogHeader";let $=({className:e,...t})=>s.jsx("div",{className:(0,P.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});$.displayName="AlertDialogFooter";let R=i.forwardRef(({className:e,...t},r)=>s.jsx(N,{ref:r,className:(0,P.cn)("text-lg font-semibold",e),...t}));R.displayName=N.displayName;let B=i.forwardRef(({className:e,...t},r)=>s.jsx(k,{ref:r,className:(0,P.cn)("text-sm text-muted-foreground",e),...t}));B.displayName=k.displayName;let L=i.forwardRef(({className:e,...t},r)=>s.jsx(T,{ref:r,className:(0,P.cn)((0,A.d)(),e),...t}));L.displayName=T.displayName;let Z=i.forwardRef(({className:e,...t},r)=>s.jsx(M,{ref:r,className:(0,P.cn)((0,A.d)({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Z.displayName=M.displayName},69654:(e,t,r)=>{"use strict";r.d(t,{X:()=>E});var s=r(10326),i=r(17577),n=r(48051),a=r(93095),l=r(82561),o=r(52067),d=r(53405),c=r(2566),h=r(9815),u=r(45226),m="Checkbox",[p,f]=(0,a.b)(m),[x,g]=p(m);function v(e){let{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:l,form:d,name:c,onCheckedChange:h,required:u,value:p="on",internal_do_not_use_render:f}=e,[g,v]=(0,o.T)({prop:r,defaultProp:a??!1,onChange:h,caller:m}),[_,y]=i.useState(null),[b,j]=i.useState(null),w=i.useRef(!1),N=!_||!!d||!!_.closest("form"),C={checked:g,disabled:l,setChecked:v,control:_,setControl:y,name:c,form:d,value:p,hasConsumerStoppedPropagationRef:w,required:u,defaultChecked:!k(a)&&a,isFormControl:N,bubbleInput:b,setBubbleInput:j};return(0,s.jsx)(x,{scope:t,...C,children:"function"==typeof f?f(C):n})}var _="CheckboxTrigger",y=i.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...a},o)=>{let{control:d,value:c,disabled:h,checked:m,required:p,setControl:f,setChecked:x,hasConsumerStoppedPropagationRef:v,isFormControl:y,bubbleInput:b}=g(_,e),j=(0,n.e)(o,f),w=i.useRef(m);return i.useEffect(()=>{let e=d?.form;if(e){let t=()=>x(w.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[d,x]),(0,s.jsx)(u.WV.button,{type:"button",role:"checkbox","aria-checked":k(m)?"mixed":m,"aria-required":p,"data-state":T(m),"data-disabled":h?"":void 0,disabled:h,value:c,...a,ref:j,onKeyDown:(0,l.Mj)(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,l.Mj)(r,e=>{x(e=>!!k(e)||!e),b&&y&&(v.current=e.isPropagationStopped(),v.current||e.stopPropagation())})})});y.displayName=_;var b=i.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:i,checked:n,defaultChecked:a,required:l,disabled:o,value:d,onCheckedChange:c,form:h,...u}=e;return(0,s.jsx)(v,{__scopeCheckbox:r,checked:n,defaultChecked:a,disabled:o,required:l,onCheckedChange:c,name:i,form:h,value:d,internal_do_not_use_render:({isFormControl:e})=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y,{...u,ref:t,__scopeCheckbox:r}),e&&(0,s.jsx)(C,{__scopeCheckbox:r})]})})});b.displayName=m;var j="CheckboxIndicator",w=i.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:i,...n}=e,a=g(j,r);return(0,s.jsx)(h.z,{present:i||k(a.checked)||!0===a.checked,children:(0,s.jsx)(u.WV.span,{"data-state":T(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})});w.displayName=j;var N="CheckboxBubbleInput",C=i.forwardRef(({__scopeCheckbox:e,...t},r)=>{let{control:a,hasConsumerStoppedPropagationRef:l,checked:o,defaultChecked:h,required:m,disabled:p,name:f,value:x,form:v,bubbleInput:_,setBubbleInput:y}=g(N,e),b=(0,n.e)(r,y),j=(0,d.D)(o),w=(0,c.t)(a);i.useEffect(()=>{if(!_)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!l.current;if(j!==o&&e){let r=new Event("click",{bubbles:t});_.indeterminate=k(o),e.call(_,!k(o)&&o),_.dispatchEvent(r)}},[_,j,o,l]);let C=i.useRef(!k(o)&&o);return(0,s.jsx)(u.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:h??C.current,required:m,disabled:p,name:f,value:x,form:v,...t,tabIndex:-1,ref:b,style:{...t.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function k(e){return"indeterminate"===e}function T(e){return k(e)?"indeterminate":e?"checked":"unchecked"}C.displayName=N;var S=r(32933),M=r(51223);let E=i.forwardRef(({className:e,...t},r)=>s.jsx(b,{ref:r,className:(0,M.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(w,{className:(0,M.cn)("flex items-center justify-center text-current"),children:s.jsx(S.Z,{className:"h-4 w-4"})})}));E.displayName=b.displayName},44794:(e,t,r)=>{"use strict";r.d(t,{_:()=>d});var s=r(10326),i=r(17577),n=r(34478),a=r(79360),l=r(51223);let o=(0,a.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef(({className:e,...t},r)=>s.jsx(n.f,{ref:r,className:(0,l.cn)(o(),e),...t}));d.displayName=n.f.displayName},82015:(e,t,r)=>{"use strict";r.d(t,{g:()=>a});var s=r(10326),i=r(17577),n=r(51223);let a=i.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));a.displayName="Textarea"},35820:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`/mnt/win3/work/family_tree/apps/frontend/family-tree/src/app/trees/[id]/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[990,153,882,806,752,711,735,754],()=>r(19604));module.exports=s})();