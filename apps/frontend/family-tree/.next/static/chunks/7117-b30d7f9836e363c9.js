"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7117],{85040:function(e,t,a){a.d(t,{D:function(){return z}});var n=a(57437),s=a(2265),r=a(74291),l=a(71455),i=a(12381),o=a(79820),c=a(69174),d=a(96246),u=a(31593),m=a(23340),h=a(88997),p=a(98617),f=a(33741),x=a(95805),g=a(13420),b=a(15863),j=a(28842),N=a(76858),y=a(33245),w=a(40257);let v=e=>e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2),_=e=>{if(!e)return"bg-gray-400";let t=e.toLowerCase();return"male"===t?"bg-blue-400":"female"===t?"bg-pink-400":"bg-purple-400"},C=e=>{let t=e.toLowerCase();return t.includes("spouse")||t.includes("husband")||t.includes("wife")?{icon:h.Z,color:"text-red-500",bgColor:"bg-red-50"}:t.includes("parent")||t.includes("father")||t.includes("mother")||t.includes("grandparent")?{icon:p.Z,color:"text-blue-500",bgColor:"bg-blue-50"}:t.includes("child")||t.includes("son")||t.includes("daughter")||t.includes("grandchild")?{icon:f.Z,color:"text-green-500",bgColor:"bg-green-50"}:t.includes("sibling")||t.includes("brother")||t.includes("sister")?{icon:x.Z,color:"text-purple-500",bgColor:"bg-purple-50"}:t.includes("aunt")||t.includes("uncle")||t.includes("niece")||t.includes("nephew")?{icon:x.Z,color:"text-orange-500",bgColor:"bg-orange-50"}:t.includes("cousin")?{icon:x.Z,color:"text-yellow-600",bgColor:"bg-yellow-50"}:t.includes("in-law")||t.includes("step-")?{icon:g.Z,color:"text-indigo-500",bgColor:"bg-indigo-50"}:{icon:g.Z,color:"text-gray-500",bgColor:"bg-gray-50"}};function z(e){let{members:t,treeId:a,selectedMember:h,trigger:p,open:f,onOpenChange:x,onMemberNavigate:z}=e,[Z,S]=(0,s.useState)(!1),[k,R]=(0,s.useState)((null==h?void 0:h.id)||""),[E,I]=(0,s.useState)(""),{toast:F}=(0,m.pm)(),{analyzeRelationship:V,loading:L,error:P,result:A,reset:B}=function(e){let{treeId:t}=e,[a,n]=(0,s.useState)(!1),[r,l]=(0,s.useState)(null),[i,o]=(0,s.useState)(null);return{analyzeRelationship:async(e,a)=>{if(!e||!a)return l("Both member IDs are required"),null;if(e===a)return l("Cannot analyze relationship between the same person"),null;n(!0),l(null),o(null);try{let n=await fetch("".concat("http://localhost:8050/api","/relations/").concat(t,"/between?from=").concat(e,"&to=").concat(a),{credentials:"include"});if(!n.ok){if(404===n.status)throw Error("One or both members not found in this tree");if(403===n.status)throw Error("You do not have access to this tree");throw Error("Failed to analyze relationship")}let s=await n.json();return o(s),l(null),s}catch(e){return l(e instanceof Error?e.message:"An unexpected error occurred"),o(null),null}finally{n(!1)}},loading:a,error:r,result:i,reset:()=>{o(null),l(null),n(!1)}}}({treeId:a});(0,s.useEffect)(()=>{h&&h.id!==k&&(R(h.id),B())},[null==h?void 0:h.id,k,B]);let D=async()=>{if(!k||!E){F({title:"Selection Required",description:"Please select both family members to analyze their relationship.",variant:"destructive"});return}if(k===E){F({title:"Same Person",description:"Please select two different family members.",variant:"destructive"});return}try{let e=await V(k,E);e&&console.log("Relationship analysis successful:",e)}catch(e){console.error("Unexpected error during analysis:",e),F({title:"Analysis Failed",description:"An unexpected error occurred while analyzing the relationship.",variant:"destructive"})}},T=t.find(e=>e.id===k),M=t.find(e=>e.id===E);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("style",{children:'\n        /* Standardized z-index system for Relationship Analyzer */\n        \n        /* Dialog base layers */\n        [data-radix-dialog-overlay][data-state="open"] {\n          z-index: 50 !important;\n        }\n        [data-radix-dialog-content][data-state="open"] {\n          z-index: 51 !important;\n        }\n        \n        /* Select dropdowns - must be higher than dialog content */\n        [data-radix-select-content] {\n          z-index: 60 !important;\n        }\n        [data-radix-select-viewport] {\n          z-index: 60 !important;\n        }\n        [data-radix-select-trigger] {\n          z-index: 52 !important;\n        }\n        [data-radix-select-item] {\n          z-index: 60 !important;\n        }\n        \n        /* Portal elements */\n        [data-radix-portal] [data-radix-select-content] {\n          z-index: 60 !important;\n        }\n        [data-radix-popper-content-wrapper] {\n          z-index: 60 !important;\n        }\n        \n        /* Relationship analyzer specific selects */\n        .relationship-analyzer-select [data-radix-select-content] {\n          z-index: 60 !important;\n        }\n        \n        /* Fullscreen mode adjustments */\n        body:fullscreen [data-radix-dialog-overlay] {\n          z-index: 50 !important;\n        }\n        body:fullscreen [data-radix-dialog-content] {\n          z-index: 51 !important;\n        }\n        body:fullscreen [data-radix-select-content] {\n          z-index: 60 !important;\n        }\n      '}),(0,n.jsxs)(r.Vq,{open:void 0!==f?f:Z,onOpenChange:e=>{x?x(e):S(e)},children:[p&&(0,n.jsx)(r.hg,{asChild:!0,children:p}),(0,n.jsxs)(r.cZ,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,n.jsxs)(r.fK,{children:[(0,n.jsxs)(r.$N,{className:"flex items-center gap-2",children:[(0,n.jsx)(g.Z,{className:"h-5 w-5"}),"Relationship Analyzer"]}),(0,n.jsx)(r.Be,{children:"Discover the relationship between any two family members, including cousins, in-laws, and degrees of removal."})]}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{className:"text-sm font-medium",children:"From Member"}),(0,n.jsx)(l.V,{id:"from-member-select",value:k,onValueChange:e=>{console.log("From member changed to:",e),R(e);let a=t.find(t=>t.id===e);a&&z&&z(a)},placeholder:"Select first member",searchPlaceholder:"Search members...",className:"relationship-analyzer-select",options:t.map(e=>({value:e.id,label:e.name}))},"from-member-select")]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{className:"text-sm font-medium",children:"To Member"}),(0,n.jsx)(l.V,{id:"to-member-select",value:E,onValueChange:e=>{console.log("To member changed to:",e),I(e)},placeholder:"Select second member",searchPlaceholder:"Search members...",className:"relationship-analyzer-select",options:t.map(e=>({value:e.id,label:e.name}))},"to-member-select")]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(i.z,{onClick:D,disabled:!k||!E||L,className:"flex-1",children:L?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Analyzing..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Analyze Relationship"]})}),k&&E&&(0,n.jsxs)(i.z,{variant:"outline",onClick:()=>{R(E),I(k)},disabled:L,className:"flex items-center gap-2",children:[(0,n.jsx)(j.Z,{className:"h-4 w-4"}),"Swap"]})]}),(T||M)&&(0,n.jsxs)(o.Zb,{children:[(0,n.jsx)(o.Ol,{className:"pb-3",children:(0,n.jsx)(o.ll,{className:"text-sm",children:"Selected Members"})}),(0,n.jsx)(o.aY,{className:"space-y-3",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[T?(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)(d.qE,{className:"h-8 w-8",children:[(0,n.jsx)(d.F$,{src:T.avatar_url?"".concat(w.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:8050").concat(T.avatar_url):void 0,alt:T.name}),(0,n.jsx)(d.Q5,{className:_(T.gender),children:v(T.name)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium text-sm",children:T.name}),T.gender&&(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:T.gender})]})]}):(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Select first member"}),(0,n.jsx)(N.Z,{className:"h-4 w-4 text-muted-foreground"}),M?(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)(d.qE,{className:"h-8 w-8",children:[(0,n.jsx)(d.F$,{src:M.avatar_url?"".concat(w.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:8050").concat(M.avatar_url):void 0,alt:M.name}),(0,n.jsx)(d.Q5,{className:_(M.gender),children:v(M.name)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium text-sm",children:M.name}),M.gender&&(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:M.gender})]})]}):(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Select second member"})]})})]}),P&&!L&&(0,n.jsx)(o.Zb,{className:"border-red-200 bg-red-50",children:(0,n.jsxs)(o.aY,{className:"pt-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 text-red-700",children:[(0,n.jsx)(y.Z,{className:"h-4 w-4"}),(0,n.jsx)("p",{className:"text-sm font-medium",children:"Analysis Error"})]}),(0,n.jsx)("p",{className:"text-sm text-red-600 mt-1",children:P})]})}),A&&(0,n.jsxs)(o.Zb,{children:[(0,n.jsxs)(o.Ol,{children:[(0,n.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,n.jsx)(y.Z,{className:"h-5 w-5"}),"Relationship Analysis"]}),(0,n.jsx)(o.SZ,{children:"Bidirectional relationship between the selected members"})]}),(0,n.jsxs)(o.aY,{className:"space-y-4",children:[(0,n.jsx)("div",{className:"text-center space-y-3",children:(0,n.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("p",{className:"font-medium",children:A.from_member_name}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"is the"})]}),(0,n.jsx)("div",{className:"flex items-center gap-2",children:(()=>{let{icon:e,color:t,bgColor:a}=C(A.relationship);return(0,n.jsxs)(c.C,{variant:"outline",className:"".concat(a," ").concat(t," border-current px-3 py-1"),children:[(0,n.jsx)(e,{className:"h-3 w-3 mr-1"}),A.relationship]})})()}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"of"}),(0,n.jsx)("p",{className:"font-medium",children:A.to_member_name})]})]})}),(0,n.jsx)(u.Z,{}),(0,n.jsxs)("div",{className:"text-center space-y-2",children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Conversely:"}),(0,n.jsxs)("p",{className:"text-sm",children:[(0,n.jsx)("span",{className:"font-medium",children:A.to_member_name})," ","is the"," ",(0,n.jsx)(c.C,{variant:"secondary",className:"mx-1",children:function(e,t){var a,n,s,r;let l=e.toLowerCase(),i=(null==t?void 0:t.toLowerCase())==="male",o=(null==t?void 0:t.toLowerCase())==="female";if("spouse"===l)return"spouse";if("parent"===l)return i?"son":o?"daughter":"child";if("child"===l)return i?"father":o?"mother":"parent";if("father"===l||"mother"===l)return i?"son":o?"daughter":"child";if("son"===l||"daughter"===l)return i?"father":o?"mother":"parent";if("sibling"===l||"brother"===l||"sister"===l)return i?"brother":o?"sister":"sibling";if(l.includes("grandparent")||"grandfather"===l||"grandmother"===l){if(l.includes("great-")){let e=(null===(a=l.match(/^(great-)+/))||void 0===a?void 0:a[0])||"";return i?"".concat(e,"grandson"):o?"".concat(e,"granddaughter"):"".concat(e,"grandchild")}return i?"grandson":o?"granddaughter":"grandchild"}if(l.includes("grandchild")||"grandson"===l||"granddaughter"===l){if(l.includes("great-")){let e=(null===(n=l.match(/^(great-)+/))||void 0===n?void 0:n[0])||"";return i?"".concat(e,"grandfather"):o?"".concat(e,"grandmother"):"".concat(e,"grandparent")}return i?"grandfather":o?"grandmother":"grandparent"}if(l.includes("aunt")||l.includes("uncle")){if(l.includes("great-")){let e=(null===(s=l.match(/^(great-)+/))||void 0===s?void 0:s[0])||"";return i?"".concat(e,"nephew"):o?"".concat(e,"niece"):"".concat(e,"niece/nephew")}return i?"nephew":o?"niece":"niece/nephew"}if(l.includes("niece")||l.includes("nephew")){if(l.includes("great-")){let e=(null===(r=l.match(/^(great-)+/))||void 0===r?void 0:r[0])||"";return i?"".concat(e,"uncle"):o?"".concat(e,"aunt"):"".concat(e,"aunt/uncle")}return i?"uncle":o?"aunt":"aunt/uncle"}if(l.includes("cousin"))return e;if(l.includes("step-child"))return i?"step-father":o?"step-mother":"step-parent";if(l.includes("step-parent"))return i?"step-son":o?"step-daughter":"step-child";if(l.includes("in-law")){if(l.includes("parent"))return i?"son-in-law":o?"daughter-in-law":"child-in-law";if(l.includes("child"))return i?"father-in-law":o?"mother-in-law":"parent-in-law";if(l.includes("sibling"))return i?"brother-in-law":o?"sister-in-law":"sibling-in-law"}return e}(A.relationship,null==M?void 0:M.gender)})," ","of"," ",(0,n.jsx)("span",{className:"font-medium",children:A.from_member_name})]})]}),A.path_names.length>2&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-sm font-medium",children:"Relationship Path:"}),(0,n.jsx)("div",{className:"flex flex-wrap items-center gap-1 text-xs",children:A.path_names.map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(c.C,{variant:"outline",className:"text-xs",children:e}),t<A.path_names.length-1&&(0,n.jsx)(N.Z,{className:"h-3 w-3 text-muted-foreground"})]},t))})]})]}),(A.relationship.includes("cousin")||A.relationship.includes("aunt")||A.relationship.includes("uncle")||A.relationship.includes("niece")||A.relationship.includes("nephew"))&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{}),(0,n.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,n.jsx)("p",{className:"text-xs text-blue-700 font-medium mb-1",children:"Family Line Information:"}),(0,n.jsx)("p",{className:"text-xs text-blue-600",children:A.path_names.length<3?"Direct relationship":"Relationship path shows the family connection through shared ancestors"})]})]})]})]})]})]})]})]})}},69174:function(e,t,a){a.d(t,{C:function(){return i}});var n=a(57437);a(2265);var s=a(90535),r=a(93448);let l=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...s}=e;return(0,n.jsx)("div",{className:(0,r.cn)(l({variant:a}),t),...s})}},74291:function(e,t,a){a.d(t,{$N:function(){return f},Be:function(){return x},Vq:function(){return o},cN:function(){return p},cZ:function(){return m},fK:function(){return h},hg:function(){return c}});var n=a(57437),s=a(2265),r=a(49027),l=a(32489),i=a(93448);let o=r.fC,c=r.xz,d=r.h_;r.x8;let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});u.displayName=r.aV.displayName;let m=s.forwardRef((e,t)=>{let{className:a,children:s,...o}=e;return(0,n.jsxs)(d,{children:[(0,n.jsx)(u,{}),(0,n.jsxs)(r.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o,children:[s,(0,n.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,n.jsx)(l.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=r.VY.displayName;let h=e=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};h.displayName="DialogHeader";let p=e=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};p.displayName="DialogFooter";let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});f.displayName=r.Dx.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})});x.displayName=r.dk.displayName},71455:function(e,t,a){a.d(t,{V:function(){return l}});var n=a(57437),s=a(2265),r=a(15291);function l(e){let{value:t,onValueChange:a,placeholder:l="Select an option...",searchPlaceholder:i="Search options...",options:o,className:c,disabled:d,id:u}=e,[m,h]=s.useState(""),[p,f]=s.useState(!1),x=s.useMemo(()=>{let e=o;return m&&(e=o.filter(e=>e.label.toLowerCase().includes(m.toLowerCase())||e.value.toLowerCase().includes(m.toLowerCase()))),e.sort((e,t)=>e.label.localeCompare(t.label))},[o,m]);return(0,n.jsxs)(r.Ph,{value:t,onValueChange:e=>{console.log("SearchableSelect ".concat(u||"unknown"," value changed to:"),e),h(""),f(!1),null==a||a(e)},disabled:d,open:p,onOpenChange:e=>{f(e),e||h("")},children:[(0,n.jsx)(r.i4,{className:c,children:(0,n.jsx)(r.ki,{placeholder:l})}),(0,n.jsx)(r.Bw,{searchable:!0,searchPlaceholder:i,onSearchChange:e=>{h(e)},children:0===x.length?(0,n.jsx)("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"No options found."}):x.map(e=>(0,n.jsx)(r.Ql,{value:e.value,disabled:e.disabled,children:e.label},e.value))})]})}},15291:function(e,t,a){a.d(t,{Bw:function(){return x},Ph:function(){return u},Ql:function(){return g},i4:function(){return h},ki:function(){return m}});var n=a(57437),s=a(2265),r=a(93402),l=a(40875),i=a(22135),o=a(73247),c=a(30401),d=a(93448);a(71455);let u=r.fC;r.ZA;let m=r.B4,h=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,n.jsxs)(r.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[s,(0,n.jsx)(r.JO,{asChild:!0,children:(0,n.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=r.xz.displayName;let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,n.jsx)(i.Z,{className:"h-4 w-4"})})});p.displayName=r.u_.displayName;let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,n.jsx)(l.Z,{className:"h-4 w-4"})})});f.displayName=r.$G.displayName;let x=s.forwardRef((e,t)=>{let{className:a,children:l,position:i="popper",searchable:c=!1,searchPlaceholder:u="Search...",onSearchChange:m,...h}=e,[x,g]=s.useState("");return(0,n.jsx)(r.h_,{children:(0,n.jsxs)(r.VY,{ref:t,className:(0,d.cn)("relative z-[999999] max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...h,children:[(0,n.jsx)(p,{}),c&&(0,n.jsxs)("div",{className:"flex items-center border-b px-3 py-2",children:[(0,n.jsx)(o.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,n.jsx)("input",{className:"flex h-8 w-full rounded-md bg-transparent py-1 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",placeholder:u,value:x,onChange:e=>{let t=e.target.value;g(t),null==m||m(t)},onClick:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation()})]}),(0,n.jsx)(r.l_,{className:(0,d.cn)("p-1",c&&"overflow-y-auto max-h-[200px]","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,n.jsx)(f,{})]})})});x.displayName=r.VY.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=r.__.displayName;let g=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,n.jsxs)(r.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(r.wU,{children:(0,n.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,n.jsx)(r.eT,{children:s})]})});g.displayName=r.ck.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=r.Z0.displayName},31593:function(e,t,a){a.d(t,{Z:function(){return i}});var n=a(57437),s=a(2265),r=a(55156),l=a(93448);let i=s.forwardRef((e,t)=>{let{className:a,orientation:s="horizontal",decorative:i=!0,...o}=e;return(0,n.jsx)(r.f,{ref:t,decorative:i,orientation:s,className:(0,l.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",a),...o})});i.displayName=r.f.displayName},37511:function(e,t,a){a.d(t,{r:function(){return s}});var n=a(2265);function s(e){let{treeId:t,autoFetch:a=!0}=e,[s,r]=(0,n.useState)([]),[l,i]=(0,n.useState)(!1),[o,c]=(0,n.useState)(null),d=(e,t)=>{let a=new Map;return e.forEach(e=>{a.set(e.id,{...e,spouseIds:[],parentIds:[],childIds:[]})}),t.forEach(e=>{let t=a.get(e.a_member_id),n=a.get(e.b_member_id);t&&n&&("spouse"===e.type?(t.spouseIds.includes(e.b_member_id)||t.spouseIds.push(e.b_member_id),n.spouseIds.includes(e.a_member_id)||n.spouseIds.push(e.a_member_id)):"parent-child"!==e.type||(t.childIds.includes(e.b_member_id)||t.childIds.push(e.b_member_id),n.parentIds.includes(e.a_member_id)||n.parentIds.push(e.a_member_id)))}),Array.from(a.values())},u=(0,n.useCallback)(async()=>{if(t){i(!0),c(null);try{let e;let a="http://localhost:8050/api",n=[],s=!0;for(;s;){let r=e?"".concat(a,"/trees/").concat(t,"/members?limit=200&after=").concat(e):"".concat(a,"/trees/").concat(t,"/members?limit=200"),l=await fetch(r,{credentials:"include"});if(!l.ok)throw Error("Failed to fetch members: ".concat(l.statusText));let i=await l.json(),o=i.items||i;n=[...n,...o],s=!!(e=i.next)&&o.length>0}let l=await fetch("".concat(a,"/trees/").concat(t,"/relationships"),{credentials:"include"});if(!l.ok)throw Error("Failed to fetch relationships: ".concat(l.statusText));let i=await l.json();console.log("[useTreeMembers] Fetched data:",{memberCount:n.length,relationshipCount:i.length,relationships:i,members:n.map(e=>({id:e.id,name:e.name}))});let o=d(n,i);console.log("[useTreeMembers] Built tree members:",{treeMembers:o.map(e=>({id:e.id,name:e.name,parentIds:e.parentIds,childIds:e.childIds,spouseIds:e.spouseIds}))}),r(o)}catch(e){c(e instanceof Error?e:Error("Unknown error")),console.error("Error fetching tree members:",e)}finally{i(!1)}}},[t]),m=(0,n.useCallback)(e=>s.find(t=>t.id===e),[s]),h=(0,n.useCallback)(()=>s.filter(e=>0===e.parentIds.length),[s]);return(0,n.useEffect)(()=>{a&&u()},[a,u]),{members:s,loading:l,error:o,refetch:u,getMemberById:m,getRootMembers:h}}}}]);