(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6855],{85249:function(e,s,t){Promise.resolve().then(t.bind(t,1067))},1067:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return y}});var a=t(57437),i=t(2265),r=t(79820),n=t(75060),l=t(12381),c=t(94589),d=t(31593),o=t(69174),m=t(86271),x=t(23340),h=t(15863),f=t(94766),u=t(31047),j=t(53113),p=t(95805),b=t(33245);function y(){let{toast:e}=(0,x.pm)(),[s,t]=(0,i.useState)(!0),[y,N]=(0,i.useState)(!1),[v,g]=(0,i.useState)([]),[_,w]=(0,i.useState)([]);(0,i.useEffect)(()=>{k()},[]);let k=async()=>{try{t(!0);let e=await fetch("".concat("http://localhost:8050/api","/trees"),{credentials:"include"});if(e.ok){let s=await e.json();g(s);let t=s.map(e=>({tree_id:e.id,tree_name:e.name,events_enabled:!0,birthdays_enabled:!0,death_anniversaries_enabled:!0,gallery_updates_enabled:!0,member_updates_enabled:!1}));w(t)}}catch(s){console.error("Error fetching trees:",s),e({title:"Error",description:"Failed to load notification settings.",variant:"destructive"})}finally{t(!1)}},C=(e,s,t)=>{w(a=>a.map(a=>a.tree_id===e?{...a,[s]:t}:a))},Z=async()=>{try{N(!0),await new Promise(e=>setTimeout(e,1e3)),e({title:"Settings Saved",description:"Your notification preferences have been updated."})}catch(s){console.error("Error saving settings:",s),e({title:"Error",description:"Failed to save notification settings.",variant:"destructive"})}finally{N(!1)}};return s?(0,a.jsx)(m.c,{children:(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(h.Z,{className:"h-12 w-12 animate-spin text-primary mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading notification settings..."})]})})}):(0,a.jsx)(m.c,{children:(0,a.jsxs)("div",{className:"space-y-6 max-w-4xl",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Notification Settings"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage your notification preferences for each family tree"})]}),(0,a.jsx)(d.Z,{}),0===v.length?(0,a.jsx)(r.Zb,{children:(0,a.jsx)(r.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(f.Z,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No Family Trees"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"You haven't joined any family trees yet. Join or create a tree to manage notifications."})]})})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[(0,a.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"h-5 w-5"}),"Global Notification Settings"]}),(0,a.jsx)(r.SZ,{children:"These settings apply to all your family trees"})]}),(0,a.jsxs)(r.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(n._,{className:"text-base",children:"Email Notifications"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),(0,a.jsx)(c.r,{defaultChecked:!0})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(n._,{className:"text-base",children:"Weekly Digest"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get a weekly summary of family tree activity"})]}),(0,a.jsx)(c.r,{defaultChecked:!0})]})]})]}),_.map(e=>{var s;return(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[(0,a.jsxs)(r.ll,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:e.tree_name}),(0,a.jsx)(o.C,{variant:"outline",children:(null===(s=v.find(s=>s.id===e.tree_id))||void 0===s?void 0:s.role)||"Member"})]}),(0,a.jsx)(r.SZ,{children:"Notification preferences for this family tree"})]}),(0,a.jsxs)(r.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4"}),(0,a.jsx)(n._,{className:"text-base font-medium",children:"Family Events"})]}),(0,a.jsxs)("div",{className:"ml-6 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(n._,{children:"Birthday Reminders"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get notified about upcoming family birthdays"})]}),(0,a.jsx)(c.r,{checked:e.birthdays_enabled,onCheckedChange:s=>C(e.tree_id,"birthdays_enabled",s)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(n._,{children:"Death Anniversaries"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Remembrance notifications for family members"})]}),(0,a.jsx)(c.r,{checked:e.death_anniversaries_enabled,onCheckedChange:s=>C(e.tree_id,"death_anniversaries_enabled",s)})]})]})]}),(0,a.jsx)(d.Z,{}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4"}),(0,a.jsx)(n._,{className:"text-base font-medium",children:"Gallery Updates"})]}),(0,a.jsx)("div",{className:"ml-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(n._,{children:"New Photos"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get notified when new photos are added to the gallery"})]}),(0,a.jsx)(c.r,{checked:e.gallery_updates_enabled,onCheckedChange:s=>C(e.tree_id,"gallery_updates_enabled",s)})]})})]}),(0,a.jsx)(d.Z,{}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4"}),(0,a.jsx)(n._,{className:"text-base font-medium",children:"Member Updates"})]}),(0,a.jsx)("div",{className:"ml-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(n._,{children:"Profile Changes"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get notified when family members update their profiles"})]}),(0,a.jsx)(c.r,{checked:e.member_updates_enabled,onCheckedChange:s=>C(e.tree_id,"member_updates_enabled",s)})]})})]})]})]},e.tree_id)}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(l.z,{onClick:Z,disabled:y,children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Notification Settings"})}),(0,a.jsx)(r.Zb,{className:"border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-950",children:(0,a.jsx)(r.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(b.Z,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"font-medium text-blue-900 dark:text-blue-100",children:"About Notifications"}),(0,a.jsxs)("div",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[(0,a.jsx)("p",{children:"• Notifications are sent to your registered email address"}),(0,a.jsx)("p",{children:"• You can adjust timing preferences for each notification type"}),(0,a.jsx)("p",{children:"• Birthday reminders are sent 3 days before the date"}),(0,a.jsx)("p",{children:"• Death anniversary notifications are sent on the date"}),(0,a.jsx)("p",{children:"• Gallery notifications are sent immediately when photos are added"})]})]})]})})})]})]})})}},69174:function(e,s,t){"use strict";t.d(s,{C:function(){return l}});var a=t(57437);t(2265);var i=t(90535),r=t(93448);let n=(0,i.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:t,...i}=e;return(0,a.jsx)("div",{className:(0,r.cn)(n({variant:t}),s),...i})}},75060:function(e,s,t){"use strict";t.d(s,{_:function(){return d}});var a=t(57437),i=t(2265),r=t(6394),n=t(90535),l=t(93448);let c=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.f,{ref:s,className:(0,l.cn)(c(),t),...i})});d.displayName=r.f.displayName},31593:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(57437),i=t(2265),r=t(55156),n=t(93448);let l=i.forwardRef((e,s)=>{let{className:t,orientation:i="horizontal",decorative:l=!0,...c}=e;return(0,a.jsx)(r.f,{ref:s,decorative:l,orientation:i,className:(0,n.cn)("shrink-0 bg-border","horizontal"===i?"h-[1px] w-full":"h-full w-[1px]",t),...c})});l.displayName=r.f.displayName},94589:function(e,s,t){"use strict";t.d(s,{r:function(){return l}});var a=t(57437),i=t(2265),r=t(50721),n=t(93448);let l=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.fC,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...i,ref:s,children:(0,a.jsx)(r.bU,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});l.displayName=r.fC.displayName}},function(e){e.O(0,[7697,1770,7203,4360,571,4713,7308,2971,2117,1744],function(){return e(e.s=85249)}),_N_E=e.O()}]);