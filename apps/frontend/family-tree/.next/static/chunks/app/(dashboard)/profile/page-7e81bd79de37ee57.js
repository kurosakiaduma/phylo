(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5688],{66303:function(e,a,t){Promise.resolve().then(t.bind(t,24707))},5005:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(39763).Z)("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]])},88997:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(39763).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},33245:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(39763).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},24707:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return Z}});var s=t(57437),r=t(2265),n=t(79820),i=t(75060),l=t(40279),o=t(12381),c=t(31593),d=t(17168),u=t(23675),m=t(15291),h=t(86271),f=t(24945),x=t(50828),p=t(23340);function j(e,a){if(e){let a=e.trim().split(/\s+/);return a.length>=2?"".concat(a[0][0]).concat(a[a.length-1][0]).toUpperCase():e.slice(0,2).toUpperCase()}return a?a.slice(0,2).toUpperCase():"??"}var g=t(15863),y=t(92369),v=t(33245),N=t(88997),b=t(31047);let w=(0,t(39763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var C=t(5005);function Z(){let{user:e,setUser:a}=(0,x.a)(),{toast:t}=(0,p.pm)(),[Z,k]=(0,r.useState)(!1),[S,_]=(0,r.useState)([]),[P,F]=(0,r.useState)(!1),[E,z]=(0,r.useState)(""),[I,V]=(0,r.useState)(""),[D,R]=(0,r.useState)(""),[A,M]=(0,r.useState)(""),[T,U]=(0,r.useState)(""),[Y,L]=(0,r.useState)(""),[B,O]=(0,r.useState)(""),W="http://localhost:8050/api";(0,r.useEffect)(()=>{e&&(z(e.display_name||""),V(e.dob||""),R(e.gender||""),M(e.pronouns||""),U(e.bio||""),L(e.phone||""),O(e.location||""))},[e]),(0,r.useEffect)(()=>{(async()=>{if(e){F(!0);try{let e=await fetch("".concat(W,"/trees"),{credentials:"include"});if(e.ok){let a=await e.json();_(a)}}catch(e){console.error("Error fetching user trees:",e)}finally{F(!1)}}})()},[e]);let Q=async e=>{e.preventDefault(),k(!0);try{let e=await fetch("".concat("http://localhost:8050/api","/users/me"),{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({display_name:E||null,dob:I||null,gender:D||null,pronouns:A||null,bio:T||null,phone:Y||null,location:B||null})});if(!e.ok){let a=await e.json();throw Error(a.detail||"Failed to update profile")}let s=await e.json();console.log("Profile update successful:",s),a(s),t({title:"Success",description:"Profile updated successfully"})}catch(e){console.error("Error updating profile:",e),t({title:"Error",description:e instanceof Error?e.message:"Failed to update profile",variant:"destructive"})}finally{k(!1)}};return e?(0,s.jsx)(h.c,{children:(0,s.jsxs)("div",{className:"space-y-6 max-w-4xl",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"My Profile"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Manage your personal information and account settings"})]}),(0,s.jsx)(c.Z,{}),(0,s.jsxs)(d.mQ,{defaultValue:"profile",className:"space-y-6",children:[(0,s.jsxs)(d.dr,{className:"grid w-full max-w-lg grid-cols-3",children:[(0,s.jsxs)(d.SP,{value:"profile",children:[(0,s.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),"Profile Settings"]}),(0,s.jsxs)(d.SP,{value:"info",children:[(0,s.jsx)(v.Z,{className:"w-4 h-4 mr-2"}),"Public Information"]}),(0,s.jsxs)(d.SP,{value:"trees",children:[(0,s.jsx)(N.Z,{className:"w-4 h-4 mr-2"}),"Family Trees"]})]}),(0,s.jsxs)(d.nU,{value:"profile",className:"space-y-6",children:[(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{children:[(0,s.jsx)(n.ll,{children:"Avatar & Basic Info"}),(0,s.jsx)(n.SZ,{children:"Update your avatar and display name"})]}),(0,s.jsxs)(n.aY,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{children:"Avatar"}),(0,s.jsx)(f.G,{currentAvatarUrl:e.avatar_url,userInitials:j(e.display_name,e.email),onAvatarChange:t=>{e&&a({...e,avatar_url:t})}})]}),(0,s.jsxs)("form",{onSubmit:Q,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{htmlFor:"email",children:"Email"}),(0,s.jsx)(l.I,{id:"email",type:"email",value:e.email,disabled:!0,className:"bg-muted"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Email cannot be changed"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{htmlFor:"displayName",children:"Display Name *"}),(0,s.jsx)(l.I,{id:"displayName",type:"text",value:E,onChange:e=>z(e.target.value),placeholder:"Enter your display name"})]})]}),(0,s.jsx)(c.Z,{}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(i._,{htmlFor:"dob",children:[(0,s.jsx)(b.Z,{className:"w-4 h-4 inline mr-1"}),"Date of Birth"]}),(0,s.jsx)(l.I,{id:"dob",type:"date",value:I,onChange:e=>V(e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{htmlFor:"gender",children:"Gender"}),(0,s.jsxs)(m.Ph,{value:D,onValueChange:R,children:[(0,s.jsx)(m.i4,{id:"gender",children:(0,s.jsx)(m.ki,{placeholder:"Select gender"})}),(0,s.jsxs)(m.Bw,{children:[(0,s.jsx)(m.Ql,{value:"male",children:"Male"}),(0,s.jsx)(m.Ql,{value:"female",children:"Female"}),(0,s.jsx)(m.Ql,{value:"non-binary",children:"Non-binary"}),(0,s.jsx)(m.Ql,{value:"other",children:"Other"}),(0,s.jsx)(m.Ql,{value:"prefer-not-to-say",children:"Prefer not to say"})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(i._,{htmlFor:"pronouns",children:[(0,s.jsx)(N.Z,{className:"w-4 h-4 inline mr-1"}),"Pronouns"]}),(0,s.jsx)(l.I,{id:"pronouns",type:"text",value:A,onChange:e=>M(e.target.value),placeholder:"e.g., he/him, she/her, they/them"})]}),(0,s.jsx)(c.Z,{}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{htmlFor:"phone",children:"Phone Number"}),(0,s.jsx)(l.I,{id:"phone",type:"tel",value:Y,onChange:e=>L(e.target.value),placeholder:"+1 (555) 123-4567"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(i._,{htmlFor:"location",children:[(0,s.jsx)(w,{className:"w-4 h-4 inline mr-1"}),"Location"]}),(0,s.jsx)(l.I,{id:"location",type:"text",value:B,onChange:e=>O(e.target.value),placeholder:"City, Country"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(i._,{htmlFor:"bio",children:[(0,s.jsx)(C.Z,{className:"w-4 h-4 inline mr-1"}),"Bio"]}),(0,s.jsx)(u.g,{id:"bio",value:T,onChange:e=>U(e.target.value),placeholder:"Tell us about yourself...",rows:4}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"This information will be visible to other members in your family trees"})]}),(0,s.jsx)(o.z,{type:"submit",disabled:Z,children:Z?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Profile"})]})]})]}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{children:[(0,s.jsx)(n.ll,{children:"Account Information"}),(0,s.jsx)(n.SZ,{children:"View your account details"})]}),(0,s.jsxs)(n.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{children:"Account ID"}),(0,s.jsx)(l.I,{value:e.id,disabled:!0,className:"bg-muted font-mono text-sm"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{children:"Member Since"}),(0,s.jsx)(l.I,{value:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),disabled:!0,className:"bg-muted"})]})]})]})]}),(0,s.jsxs)(d.nU,{value:"info",className:"space-y-6",children:[(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{children:[(0,s.jsx)(n.ll,{children:"Public Profile Preview"}),(0,s.jsx)(n.SZ,{children:"This is how other family tree members see your information"})]}),(0,s.jsxs)(n.aY,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("div",{className:"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center text-2xl font-semibold",children:e.avatar_url?(0,s.jsx)("img",{src:"".concat(W).concat(e.avatar_url),alt:e.display_name||e.email,className:"w-20 h-20 rounded-full object-cover"}):j(e.display_name,e.email)})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:e.display_name||"No display name set"}),A&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["(",A,")"]})]})]}),(0,s.jsx)(c.Z,{}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[I&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(i._,{className:"text-muted-foreground",children:"Date of Birth"}),(0,s.jsx)("p",{className:"font-medium",children:new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),D&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(i._,{className:"text-muted-foreground",children:"Gender"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:D.replace("-"," ")})]}),Y&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(i._,{className:"text-muted-foreground",children:"Phone"}),(0,s.jsx)("p",{className:"font-medium",children:Y})]}),B&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)(i._,{className:"text-muted-foreground",children:[(0,s.jsx)(w,{className:"w-4 h-4 inline mr-1"}),"Location"]}),(0,s.jsx)("p",{className:"font-medium",children:B})]})]}),T&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{className:"text-muted-foreground",children:"Bio"}),(0,s.jsx)("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:T})]})]}),!I&&!D&&!Y&&!B&&!T&&(0,s.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,s.jsx)(v.Z,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,s.jsx)("p",{children:"No public information available"}),(0,s.jsx)("p",{className:"text-sm",children:"Fill out your profile in the settings tab to display information here"})]})]})]}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{children:[(0,s.jsx)(n.ll,{children:"Privacy Notice"}),(0,s.jsx)(n.SZ,{children:"Understanding your information visibility"})]}),(0,s.jsxs)(n.aY,{className:"space-y-3 text-sm",children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(v.Z,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Visible to Family Tree Members"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Your profile information is visible to members of family trees you belong to"})]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(v.Z,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Private by Default"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Your email and account ID are always private and never shared with other users"})]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(v.Z,{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Control Your Information"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"You can edit or remove any personal information at any time from your profile settings"})]})]})]})]})]}),(0,s.jsxs)(d.nU,{value:"trees",className:"space-y-6",children:[(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{children:[(0,s.jsx)(n.ll,{children:"My Family Trees"}),(0,s.jsx)(n.SZ,{children:"Family trees you belong to and your role in each"})]}),(0,s.jsx)(n.aY,{children:P?(0,s.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,s.jsx)(g.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"}),(0,s.jsx)("span",{className:"ml-2 text-muted-foreground",children:"Loading trees..."})]}):S.length>0?(0,s.jsx)("div",{className:"space-y-4",children:S.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("h3",{className:"font-medium",children:e.name}),e.description&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,s.jsxs)("span",{children:["Role:"," ",(0,s.jsx)("span",{className:"capitalize font-medium",children:e.role})]}),(0,s.jsxs)("span",{children:["Members: ",e.member_count||0]}),(0,s.jsxs)("span",{children:["Joined:"," ",new Date(e.joined_at).toLocaleDateString()]})]})]}),(0,s.jsx)(o.z,{variant:"outline",size:"sm",asChild:!0,children:(0,s.jsx)("a",{href:"/trees/".concat(e.id),children:"View Tree"})})]},e.id))}):(0,s.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,s.jsx)(N.Z,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,s.jsx)("p",{children:"You haven't joined any family trees yet"}),(0,s.jsx)("p",{className:"text-sm",children:"Create a new tree or accept an invitation to get started"})]})})]}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{children:[(0,s.jsx)(n.ll,{children:"Unified Identity System"}),(0,s.jsx)(n.SZ,{children:"How your identity is managed across the platform"})]}),(0,s.jsx)(n.aY,{className:"space-y-4",children:(0,s.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(y.Z,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Your Unique ID"}),(0,s.jsxs)("p",{className:"text-muted-foreground",children:["Your account has a unique identifier (",null==e?void 0:e.id,") that represents you across all family trees. This ensures consistent identity and prevents duplicate records."]})]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(v.Z,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Automatic Synchronization"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"When you update your profile information here, it automatically syncs to your member records in all family trees. Your avatar, name, demographics, and bio stay consistent everywhere."})]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(v.Z,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Invite Acceptance"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Whether you signed up first or were added as a member first, the system automatically unifies your identity when you accept invitations or verify your email."})]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(v.Z,{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Tree-Specific Information"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"While your core identity is unified, relationships, private notes, and tree-specific details remain unique to each family tree and are managed by tree custodians."})]})]})]})})]})]})]})]})}):(0,s.jsx)(h.c,{children:(0,s.jsx)("div",{className:"flex items-center justify-center h-full py-12",children:(0,s.jsx)(g.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})})})}},24945:function(e,a,t){"use strict";t.d(a,{G:function(){return g}});var s=t(57437),r=t(2265),n=t(37295),i=t(12381),l=t(74291),o=t(96246),c=t(53581),d=t(15863),u=t(32489),m=t(23340),h=t(40257);async function f(e,a){let t=await new Promise((a,t)=>{let s=new Image;s.addEventListener("load",()=>a(s)),s.addEventListener("error",e=>t(e)),s.src=e}),s=document.createElement("canvas"),r=s.getContext("2d");if(!r)throw Error("No 2d context");return s.width=a.width,s.height=a.height,r.drawImage(t,a.x,a.y,a.width,a.height,0,0,a.width,a.height),new Promise((e,a)=>{s.toBlob(t=>{t?e(t):a(Error("Canvas is empty"))},"image/jpeg",.85)})}let x={sm:"h-16 w-16",md:"h-20 w-20",lg:"h-24 w-24"},p={sm:"h-6 w-6",md:"h-7 w-7",lg:"h-8 w-8"},j={sm:"h-3 w-3",md:"h-4 w-4",lg:"h-4 w-4"};function g(e){let{currentAvatarUrl:a,userInitials:t,onAvatarChange:g,uploadEndpoint:y,deleteEndpoint:v,size:N="lg"}=e,{toast:b}=(0,m.pm)(),[w,C]=(0,r.useState)(!1),[Z,k]=(0,r.useState)(null),[S,_]=(0,r.useState)({x:0,y:0}),[P,F]=(0,r.useState)(1),[E,z]=(0,r.useState)(null),[I,V]=(0,r.useState)(!1),[D,R]=(0,r.useState)(!1),A=(0,r.useCallback)((e,a)=>{z(a)},[]),M=async()=>{if(Z&&E){V(!0);try{let e=await f(Z,E),a=new FormData;a.append("file",e,"avatar.jpg");let t=await fetch(y||"".concat("http://localhost:8050/api","/users/me/avatar"),{method:"POST",body:a,credentials:"include"});if(!t.ok){let e=await t.json();throw Error(e.detail||"Failed to upload avatar")}let s=await t.json();b({title:"Success",description:"Avatar uploaded successfully"}),g&&s.avatar_url&&g(s.avatar_url),C(!1),k(null),_({x:0,y:0}),F(1)}catch(e){console.error("Error uploading avatar:",e),b({title:"Error",description:e instanceof Error?e.message:"Failed to upload avatar",variant:"destructive"})}finally{V(!1)}}},T=async()=>{if(a){R(!0);try{let e=await fetch(v||"".concat("http://localhost:8050/api","/users/me/avatar"),{method:"DELETE",credentials:"include"});if(!e.ok){let a=await e.json();throw Error(a.detail||"Failed to delete avatar")}b({title:"Success",description:"Avatar deleted successfully"}),g&&g(null)}catch(e){console.error("Error deleting avatar:",e),b({title:"Error",description:e instanceof Error?e.message:"Failed to delete avatar",variant:"destructive"})}finally{R(!1)}}},U=a?a.startsWith("/uploads")?"".concat(h.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:8050").concat(a):(a.startsWith("http"),a):void 0;return(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)(o.qE,{className:x[N],children:[(0,s.jsx)(o.F$,{src:U,alt:"Avatar"}),(0,s.jsx)(o.Q5,{className:"".concat("sm"===N?"text-sm":"md"===N?"text-lg":"text-2xl"," bg-primary/10"),children:t})]}),(0,s.jsxs)("label",{htmlFor:"avatar-upload",className:"absolute bottom-0 right-0 ".concat(p[N]," rounded-full bg-primary text-primary-foreground flex items-center justify-center cursor-pointer hover:bg-primary/90 transition-colors"),children:[(0,s.jsx)(c.Z,{className:j[N]}),(0,s.jsx)("input",{id:"avatar-upload",type:"file",accept:"image/*",className:"hidden",onChange:e=>{if(e.target.files&&e.target.files.length>0){let a=e.target.files[0];if(a.size>5242880){b({title:"File too large",description:"Please select an image smaller than 5MB",variant:"destructive"});return}if(!a.type.startsWith("image/")){b({title:"Invalid file type",description:"Please select an image file",variant:"destructive"});return}let t=new FileReader;t.addEventListener("load",()=>{k(t.result),C(!0)}),t.readAsDataURL(a)}}})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{htmlFor:"avatar-upload",className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 cursor-pointer",children:"Change Avatar"}),a&&(0,s.jsx)(i.z,{variant:"outline",size:"sm",onClick:T,disabled:D,children:D?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"Remove Avatar"]})})]}),(0,s.jsx)(l.Vq,{open:w,onOpenChange:C,children:(0,s.jsxs)(l.cZ,{className:"sm:max-w-[600px]",children:[(0,s.jsxs)(l.fK,{children:[(0,s.jsx)(l.$N,{children:"Crop your avatar"}),(0,s.jsx)(l.Be,{children:"Adjust the image to fit within the circle"})]}),(0,s.jsx)("div",{className:"relative h-[400px] bg-muted rounded-lg overflow-hidden",children:Z&&(0,s.jsx)(n.ZP,{image:Z,crop:S,zoom:P,aspect:1,cropShape:"round",showGrid:!1,onCropChange:_,onCropComplete:A,onZoomChange:F})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"zoom",className:"text-sm font-medium",children:"Zoom"}),(0,s.jsx)("input",{id:"zoom",type:"range",min:1,max:3,step:.1,value:P,onChange:e=>F(Number(e.target.value)),className:"w-full"})]}),(0,s.jsxs)(l.cN,{children:[(0,s.jsx)(i.z,{variant:"outline",onClick:()=>{C(!1),k(null)},disabled:I,children:"Cancel"}),(0,s.jsx)(i.z,{onClick:M,disabled:I,children:I?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):"Upload"})]})]})})]})}},74291:function(e,a,t){"use strict";t.d(a,{$N:function(){return x},Be:function(){return p},Vq:function(){return o},cN:function(){return f},cZ:function(){return m},fK:function(){return h},hg:function(){return c}});var s=t(57437),r=t(2265),n=t(49027),i=t(32489),l=t(93448);let o=n.fC,c=n.xz,d=n.h_;n.x8;let u=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.aV,{ref:a,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});u.displayName=n.aV.displayName;let m=r.forwardRef((e,a)=>{let{className:t,children:r,...o}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(n.VY,{ref:a,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...o,children:[r,(0,s.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.VY.displayName;let h=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};h.displayName="DialogHeader";let f=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};f.displayName="DialogFooter";let x=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.Dx,{ref:a,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});x.displayName=n.Dx.displayName;let p=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.dk,{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",t),...r})});p.displayName=n.dk.displayName},40279:function(e,a,t){"use strict";t.d(a,{I:function(){return i}});var s=t(57437),r=t(2265),n=t(93448);let i=r.forwardRef((e,a)=>{let{className:t,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...i})});i.displayName="Input"},75060:function(e,a,t){"use strict";t.d(a,{_:function(){return c}});var s=t(57437),r=t(2265),n=t(6394),i=t(90535),l=t(93448);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.f,{ref:a,className:(0,l.cn)(o(),t),...r})});c.displayName=n.f.displayName},71455:function(e,a,t){"use strict";t.d(a,{V:function(){return i}});var s=t(57437),r=t(2265),n=t(15291);function i(e){let{value:a,onValueChange:t,placeholder:i="Select an option...",searchPlaceholder:l="Search options...",options:o,className:c,disabled:d,id:u}=e,[m,h]=r.useState(""),[f,x]=r.useState(!1),p=r.useMemo(()=>{let e=o;return m&&(e=o.filter(e=>e.label.toLowerCase().includes(m.toLowerCase())||e.value.toLowerCase().includes(m.toLowerCase()))),e.sort((e,a)=>e.label.localeCompare(a.label))},[o,m]);return(0,s.jsxs)(n.Ph,{value:a,onValueChange:e=>{console.log("SearchableSelect ".concat(u||"unknown"," value changed to:"),e),h(""),x(!1),null==t||t(e)},disabled:d,open:f,onOpenChange:e=>{x(e),e||h("")},children:[(0,s.jsx)(n.i4,{className:c,children:(0,s.jsx)(n.ki,{placeholder:i})}),(0,s.jsx)(n.Bw,{searchable:!0,searchPlaceholder:l,onSearchChange:e=>{h(e)},children:0===p.length?(0,s.jsx)("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"No options found."}):p.map(e=>(0,s.jsx)(n.Ql,{value:e.value,disabled:e.disabled,children:e.label},e.value))})]})}},15291:function(e,a,t){"use strict";t.d(a,{Bw:function(){return p},Ph:function(){return u},Ql:function(){return j},i4:function(){return h},ki:function(){return m}});var s=t(57437),r=t(2265),n=t(93402),i=t(40875),l=t(22135),o=t(73247),c=t(30401),d=t(93448);t(71455);let u=n.fC;n.ZA;let m=n.B4,h=r.forwardRef((e,a)=>{let{className:t,children:r,...l}=e;return(0,s.jsxs)(n.xz,{ref:a,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...l,children:[r,(0,s.jsx)(n.JO,{asChild:!0,children:(0,s.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=n.xz.displayName;let f=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.u_,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,s.jsx)(l.Z,{className:"h-4 w-4"})})});f.displayName=n.u_.displayName;let x=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.$G,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})})});x.displayName=n.$G.displayName;let p=r.forwardRef((e,a)=>{let{className:t,children:i,position:l="popper",searchable:c=!1,searchPlaceholder:u="Search...",onSearchChange:m,...h}=e,[p,j]=r.useState("");return(0,s.jsx)(n.h_,{children:(0,s.jsxs)(n.VY,{ref:a,className:(0,d.cn)("relative z-[999999] max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...h,children:[(0,s.jsx)(f,{}),c&&(0,s.jsxs)("div",{className:"flex items-center border-b px-3 py-2",children:[(0,s.jsx)(o.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,s.jsx)("input",{className:"flex h-8 w-full rounded-md bg-transparent py-1 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",placeholder:u,value:p,onChange:e=>{let a=e.target.value;j(a),null==m||m(a)},onClick:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation()})]}),(0,s.jsx)(n.l_,{className:(0,d.cn)("p-1",c&&"overflow-y-auto max-h-[200px]","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),(0,s.jsx)(x,{})]})})});p.displayName=n.VY.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.__,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=n.__.displayName;let j=r.forwardRef((e,a)=>{let{className:t,children:r,...i}=e;return(0,s.jsxs)(n.ck,{ref:a,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.wU,{children:(0,s.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(n.eT,{children:r})]})});j.displayName=n.ck.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.Z0,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=n.Z0.displayName},31593:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(57437),r=t(2265),n=t(55156),i=t(93448);let l=r.forwardRef((e,a)=>{let{className:t,orientation:r="horizontal",decorative:l=!0,...o}=e;return(0,s.jsx)(n.f,{ref:a,decorative:l,orientation:r,className:(0,i.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...o})});l.displayName=n.f.displayName},17168:function(e,a,t){"use strict";t.d(a,{SP:function(){return c},dr:function(){return o},mQ:function(){return l},nU:function(){return d}});var s=t(57437),r=t(2265),n=t(20271),i=t(93448);let l=n.fC,o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.aV,{ref:a,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r})});o.displayName=n.aV.displayName;let c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.xz,{ref:a,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r})});c.displayName=n.xz.displayName;let d=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.VY,{ref:a,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});d.displayName=n.VY.displayName},23675:function(e,a,t){"use strict";t.d(a,{g:function(){return i}});var s=t(57437),r=t(2265),n=t(93448);let i=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...r})});i.displayName="Textarea"},55156:function(e,a,t){"use strict";t.d(a,{f:function(){return c}});var s=t(2265),r=t(66840),n=t(57437),i="horizontal",l=["horizontal","vertical"],o=s.forwardRef((e,a)=>{let{decorative:t,orientation:s=i,...o}=e,c=l.includes(s)?s:i;return(0,n.jsx)(r.WV.div,{"data-orientation":c,...t?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...o,ref:a})});o.displayName="Separator";var c=o},20271:function(e,a,t){"use strict";t.d(a,{VY:function(){return E},aV:function(){return P},fC:function(){return _},xz:function(){return F}});var s=t(2265),r=t(6741),n=t(73966),i=t(1353),l=t(71599),o=t(66840),c=t(29114),d=t(80886),u=t(99255),m=t(57437),h="Tabs",[f,x]=(0,n.b)(h,[i.Pc]),p=(0,i.Pc)(),[j,g]=f(h),y=s.forwardRef((e,a)=>{let{__scopeTabs:t,value:s,onValueChange:r,defaultValue:n,orientation:i="horizontal",dir:l,activationMode:f="automatic",...x}=e,p=(0,c.gm)(l),[g,y]=(0,d.T)({prop:s,onChange:r,defaultProp:null!=n?n:"",caller:h});return(0,m.jsx)(j,{scope:t,baseId:(0,u.M)(),value:g,onValueChange:y,orientation:i,dir:p,activationMode:f,children:(0,m.jsx)(o.WV.div,{dir:p,"data-orientation":i,...x,ref:a})})});y.displayName=h;var v="TabsList",N=s.forwardRef((e,a)=>{let{__scopeTabs:t,loop:s=!0,...r}=e,n=g(v,t),l=p(t);return(0,m.jsx)(i.fC,{asChild:!0,...l,orientation:n.orientation,dir:n.dir,loop:s,children:(0,m.jsx)(o.WV.div,{role:"tablist","aria-orientation":n.orientation,...r,ref:a})})});N.displayName=v;var b="TabsTrigger",w=s.forwardRef((e,a)=>{let{__scopeTabs:t,value:s,disabled:n=!1,...l}=e,c=g(b,t),d=p(t),u=k(c.baseId,s),h=S(c.baseId,s),f=s===c.value;return(0,m.jsx)(i.ck,{asChild:!0,...d,focusable:!n,active:f,children:(0,m.jsx)(o.WV.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":h,"data-state":f?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:u,...l,ref:a,onMouseDown:(0,r.Mj)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(s)}),onKeyDown:(0,r.Mj)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(s)}),onFocus:(0,r.Mj)(e.onFocus,()=>{let e="manual"!==c.activationMode;f||n||!e||c.onValueChange(s)})})})});w.displayName=b;var C="TabsContent",Z=s.forwardRef((e,a)=>{let{__scopeTabs:t,value:r,forceMount:n,children:i,...c}=e,d=g(C,t),u=k(d.baseId,r),h=S(d.baseId,r),f=r===d.value,x=s.useRef(f);return s.useEffect(()=>{let e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,m.jsx)(l.z,{present:n||f,children:t=>{let{present:s}=t;return(0,m.jsx)(o.WV.div,{"data-state":f?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":u,hidden:!s,id:h,tabIndex:0,...c,ref:a,style:{...e.style,animationDuration:x.current?"0s":void 0},children:s&&i})}})});function k(e,a){return"".concat(e,"-trigger-").concat(a)}function S(e,a){return"".concat(e,"-content-").concat(a)}Z.displayName=C;var _=y,P=N,F=w,E=Z}},function(e){e.O(0,[7697,1770,7203,4360,8269,985,4713,7308,2971,2117,1744],function(){return e(e.s=66303)}),_N_E=e.O()}]);