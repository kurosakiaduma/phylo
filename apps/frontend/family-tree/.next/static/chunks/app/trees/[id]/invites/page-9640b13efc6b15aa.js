(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2342],{95945:function(e,t,n){Promise.resolve().then(n.bind(n,85353))},32660:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(39763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},99397:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(39763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},95805:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(39763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},85353:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(57437),i=n(2265),a=n(99376),o=n(12381),s=n(79820),l=n(86271),c=n(4909),d=n(23340),u=n(37511),f=n(15863),p=n(32660),h=n(99397),v=n(89345),m=n(95805);function x(){let e=(0,a.useParams)(),t=(0,a.useRouter)(),{toast:n}=(0,d.pm)(),[x,g]=(0,i.useState)(null),[j,y]=(0,i.useState)([]),[N,w]=(0,i.useState)(!0),[b,D]=(0,i.useState)(!1),k=e.id,{members:C}=(0,u.r)({treeId:k,autoFetch:!0});(0,i.useEffect)(()=>{E()},[k]);let E=async()=>{try{w(!0);let e=await fetch("".concat("http://localhost:8050/api","/trees/").concat(k),{credentials:"include"});if(!e.ok)throw Error("Failed to fetch tree");let t=await e.json();g(t);let n=await fetch("".concat("http://localhost:8050/api","/trees/").concat(k,"/invites"),{credentials:"include"});if(n.ok){let e=await n.json();y(e)}}catch(e){console.error("Error fetching data:",e),n({title:"Error",description:"Failed to load invites. Please try again.",variant:"destructive"})}finally{w(!1)}},R=async e=>{try{if((await fetch("".concat("http://localhost:8050/api","/invites/").concat(e,"/resend"),{method:"POST",credentials:"include"})).ok)n({title:"Invite Resent",description:"The invitation has been resent successfully."}),E();else throw Error("Failed to resend invite")}catch(e){console.error("Error resending invite:",e),n({title:"Error",description:"Failed to resend invite. Please try again.",variant:"destructive"})}},I=async e=>{try{if((await fetch("".concat("http://localhost:8050/api","/invites/").concat(e),{method:"DELETE",credentials:"include"})).ok)n({title:"Invite Cancelled",description:"The invitation has been cancelled."}),E();else throw Error("Failed to cancel invite")}catch(e){console.error("Error cancelling invite:",e),n({title:"Error",description:"Failed to cancel invite. Please try again.",variant:"destructive"})}};if(N)return(0,r.jsx)(l.c,{children:(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(f.Z,{className:"h-12 w-12 animate-spin text-primary mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Loading invites..."})]})})});if(!x)return null;let M="custodian"===x.role;return(0,r.jsxs)(l.c,{children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)(o.z,{variant:"ghost",onClick:()=>t.back(),children:[(0,r.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Invitations"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:x.name})]})]}),M&&(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsxs)(o.z,{onClick:()=>D(!0),children:[(0,r.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Send Invite"]})}),(0,r.jsxs)(s.Zb,{children:[(0,r.jsx)(s.Ol,{children:(0,r.jsxs)(s.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(v.Z,{className:"h-5 w-5"}),"Pending Invitations"]})}),(0,r.jsx)(s.aY,{children:0===j.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(m.Z,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No Invitations"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:M?"You haven't sent any invitations yet.":"There are no pending invitations for this tree."}),M&&(0,r.jsxs)(o.z,{onClick:()=>D(!0),children:[(0,r.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Send First Invite"]})]}):(0,r.jsx)("div",{className:"space-y-4",children:j.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.email}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Role: ",e.role," â€¢ Expires:"," ",new Date(e.expires_at).toLocaleDateString()]})]}),M&&(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>R(e.token),children:"Resend"}),(0,r.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>I(e.token),children:"Cancel"})]})]},e.id))})})]})]}),(0,r.jsx)(c.y,{open:b,onOpenChange:D,treeId:k,members:C,onInviteSent:()=>{E(),D(!1)}})]})}},49027:function(e,t,n){"use strict";n.d(t,{Dx:function(){return er},VY:function(){return en},aV:function(){return et},dk:function(){return ei},fC:function(){return Q},h_:function(){return ee},jm:function(){return K},p8:function(){return N},x8:function(){return ea},xz:function(){return $}});var r=n(2265),i=n(6741),a=n(98575),o=n(73966),s=n(99255),l=n(80886),c=n(15278),d=n(99103),u=n(83832),f=n(71599),p=n(66840),h=n(86097),v=n(87922),m=n(5478),x=n(37053),g=n(57437),j="Dialog",[y,N]=(0,o.b)(j),[w,b]=y(j),D=e=>{let{__scopeDialog:t,children:n,open:i,defaultOpen:a,onOpenChange:o,modal:c=!0}=e,d=r.useRef(null),u=r.useRef(null),[f,p]=(0,l.T)({prop:i,defaultProp:null!=a&&a,onChange:o,caller:j});return(0,g.jsx)(w,{scope:t,triggerRef:d,contentRef:u,contentId:(0,s.M)(),titleId:(0,s.M)(),descriptionId:(0,s.M)(),open:f,onOpenChange:p,onOpenToggle:r.useCallback(()=>p(e=>!e),[p]),modal:c,children:n})};D.displayName=j;var k="DialogTrigger",C=r.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,o=b(k,n),s=(0,a.e)(t,o.triggerRef);return(0,g.jsx)(p.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":q(o.open),...r,ref:s,onClick:(0,i.Mj)(e.onClick,o.onOpenToggle)})});C.displayName=k;var E="DialogPortal",[R,I]=y(E,{forceMount:void 0}),M=e=>{let{__scopeDialog:t,forceMount:n,children:i,container:a}=e,o=b(E,t);return(0,g.jsx)(R,{scope:t,forceMount:n,children:r.Children.map(i,e=>(0,g.jsx)(f.z,{present:n||o.open,children:(0,g.jsx)(u.h,{asChild:!0,container:a,children:e})}))})};M.displayName=E;var F="DialogOverlay",O=r.forwardRef((e,t)=>{let n=I(F,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,a=b(F,e.__scopeDialog);return a.modal?(0,g.jsx)(f.z,{present:r||a.open,children:(0,g.jsx)(P,{...i,ref:t})}):null});O.displayName=F;var _=(0,x.Z8)("DialogOverlay.RemoveScroll"),P=r.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,i=b(F,n);return(0,g.jsx)(v.Z,{as:_,allowPinchZoom:!0,shards:[i.contentRef],children:(0,g.jsx)(p.WV.div,{"data-state":q(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Z="DialogContent",z=r.forwardRef((e,t)=>{let n=I(Z,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,a=b(Z,e.__scopeDialog);return(0,g.jsx)(f.z,{present:r||a.open,children:a.modal?(0,g.jsx)(S,{...i,ref:t}):(0,g.jsx)(T,{...i,ref:t})})});z.displayName=Z;var S=r.forwardRef((e,t)=>{let n=b(Z,e.__scopeDialog),o=r.useRef(null),s=(0,a.e)(t,n.contentRef,o);return r.useEffect(()=>{let e=o.current;if(e)return(0,m.Ry)(e)},[]),(0,g.jsx)(W,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,i.Mj)(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null===(t=n.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:(0,i.Mj)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:(0,i.Mj)(e.onFocusOutside,e=>e.preventDefault())})}),T=r.forwardRef((e,t)=>{let n=b(Z,e.__scopeDialog),i=r.useRef(!1),a=r.useRef(!1);return(0,g.jsx)(W,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var r,o;null===(r=e.onCloseAutoFocus)||void 0===r||r.call(e,t),t.defaultPrevented||(i.current||null===(o=n.triggerRef.current)||void 0===o||o.focus(),t.preventDefault()),i.current=!1,a.current=!1},onInteractOutside:t=>{var r,o;null===(r=e.onInteractOutside)||void 0===r||r.call(e,t),t.defaultPrevented||(i.current=!0,"pointerdown"!==t.detail.originalEvent.type||(a.current=!0));let s=t.target;(null===(o=n.triggerRef.current)||void 0===o?void 0:o.contains(s))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&a.current&&t.preventDefault()}})}),W=r.forwardRef((e,t)=>{let{__scopeDialog:n,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:s,...l}=e,u=b(Z,n),f=r.useRef(null),p=(0,a.e)(t,f);return(0,h.EW)(),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.M,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:o,onUnmountAutoFocus:s,children:(0,g.jsx)(c.XB,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":q(u.open),...l,ref:p,onDismiss:()=>u.onOpenChange(!1)})}),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(G,{titleId:u.titleId}),(0,g.jsx)(J,{contentRef:f,descriptionId:u.descriptionId})]})]})}),V="DialogTitle",A=r.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,i=b(V,n);return(0,g.jsx)(p.WV.h2,{id:i.titleId,...r,ref:t})});A.displayName=V;var L="DialogDescription",B=r.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,i=b(L,n);return(0,g.jsx)(p.WV.p,{id:i.descriptionId,...r,ref:t})});B.displayName=L;var H="DialogClose",Y=r.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,a=b(H,n);return(0,g.jsx)(p.WV.button,{type:"button",...r,ref:t,onClick:(0,i.Mj)(e.onClick,()=>a.onOpenChange(!1))})});function q(e){return e?"open":"closed"}Y.displayName=H;var U="DialogTitleWarning",[K,X]=(0,o.k)(U,{contentName:Z,titleName:V,docsSlug:"dialog"}),G=e=>{let{titleId:t}=e,n=X(U),i="`".concat(n.contentName,"` requires a `").concat(n.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(n.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(n.docsSlug);return r.useEffect(()=>{t&&!document.getElementById(t)&&console.error(i)},[i,t]),null},J=e=>{let{contentRef:t,descriptionId:n}=e,i=X("DialogDescriptionWarning"),a="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(i.contentName,"}.");return r.useEffect(()=>{var e;let r=null===(e=t.current)||void 0===e?void 0:e.getAttribute("aria-describedby");n&&r&&!document.getElementById(n)&&console.warn(a)},[a,t,n]),null},Q=D,$=C,ee=M,et=O,en=z,er=A,ei=B,ea=Y},6394:function(e,t,n){"use strict";n.d(t,{f:function(){return s}});var r=n(2265),i=n(66840),a=n(57437),o=r.forwardRef((e,t)=>(0,a.jsx)(i.WV.label,{...e,ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null===(n=e.onMouseDown)||void 0===n||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));o.displayName="Label";var s=o}},function(e){e.O(0,[7697,1770,7203,4360,8269,4713,7308,623,2971,2117,1744],function(){return e(e.s=95945)}),_N_E=e.O()}]);