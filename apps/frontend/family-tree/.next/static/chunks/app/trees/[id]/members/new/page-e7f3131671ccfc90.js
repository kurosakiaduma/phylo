(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[469],{46458:function(e,a,t){Promise.resolve().then(t.bind(t,87924))},32660:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(39763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},37806:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(39763).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},87924:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return g}});var r=t(57437),s=t(2265),n=t(99376),l=t(86271),i=t(12381),o=t(79820),d=t(40279),c=t(75060),u=t(23675),h=t(15291),m=t(68245),p=t(23340),f=t(32660),x=t(15863),b=t(37806);function g(){let e=(0,n.useParams)(),a=(0,n.useRouter)(),{toast:t}=(0,p.pm)(),g=e.id,[j,y]=(0,s.useState)(!1),[v,N]=(0,s.useState)({name:"",email:"",gender:"",dob:"",dod:"",deceased:!1,birth_place:"",death_place:"",occupation:"",pronouns:"",bio:"",notes:""}),w=async e=>{if(e.preventDefault(),!v.name.trim()){t({title:"Validation Error",description:"Please enter a name",variant:"destructive"});return}y(!0);try{let e={name:v.name.trim()};v.email&&(e.email=v.email),v.gender&&(e.gender=v.gender),v.dob&&(e.dob=v.dob),v.dod&&(e.dod=v.dod),v.deceased&&(e.deceased=v.deceased),v.birth_place&&(e.birth_place=v.birth_place),v.death_place&&(e.death_place=v.death_place),v.occupation&&(e.occupation=v.occupation),v.pronouns&&(e.pronouns=v.pronouns),v.bio&&(e.bio=v.bio),v.notes&&(e.notes=v.notes);let r=await fetch("".concat("http://localhost:8050/api","/trees/").concat(g,"/members"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!r.ok){let e=await r.json();throw Error(e.detail||"Failed to create member")}await r.json(),t({title:"Success",description:"".concat(v.name," has been added to your family tree")}),a.push("/trees/".concat(g))}catch(e){console.error("Error creating member:",e),t({title:"Error",description:e instanceof Error?e.message:"Failed to create member",variant:"destructive"})}finally{y(!1)}},k=(e,a)=>{N(t=>({...t,[e]:a}))};return(0,r.jsx)(l.c,{children:(0,r.jsxs)("div",{className:"mx-auto max-w-3xl space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(i.z,{variant:"ghost",onClick:()=>a.back(),className:"mb-4",children:[(0,r.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Add Family Member"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Add a new person to your family tree"})]}),(0,r.jsx)("form",{onSubmit:w,children:(0,r.jsxs)(o.Zb,{children:[(0,r.jsxs)(o.Ol,{children:[(0,r.jsx)(o.ll,{children:"Member Information"}),(0,r.jsx)(o.SZ,{children:"Enter the details of the family member. Only name is required."})]}),(0,r.jsxs)(o.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"font-medium",children:"Basic Information"}),(0,r.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(c._,{htmlFor:"name",children:["Name ",(0,r.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,r.jsx)(d.I,{id:"name",value:v.name,onChange:e=>k("name",e.target.value),placeholder:"John Doe",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"email",children:"Email"}),(0,r.jsx)(d.I,{id:"email",type:"email",value:v.email,onChange:e=>k("email",e.target.value),placeholder:"john@example.com"})]})]}),(0,r.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"gender",children:"Gender"}),(0,r.jsxs)(h.Ph,{value:v.gender,onValueChange:e=>k("gender",e),children:[(0,r.jsx)(h.i4,{children:(0,r.jsx)(h.ki,{placeholder:"Select gender"})}),(0,r.jsxs)(h.Bw,{children:[(0,r.jsx)(h.Ql,{value:"male",children:"Male"}),(0,r.jsx)(h.Ql,{value:"female",children:"Female"}),(0,r.jsx)(h.Ql,{value:"unspecified",children:"Unspecified"}),(0,r.jsx)(h.Ql,{value:"other",children:"Other"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"pronouns",children:"Pronouns"}),(0,r.jsx)(d.I,{id:"pronouns",value:v.pronouns,onChange:e=>k("pronouns",e.target.value),placeholder:"they/them, he/him, she/her"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"font-medium",children:"Dates"}),(0,r.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"dob",children:"Date of Birth"}),(0,r.jsx)(d.I,{id:"dob",type:"date",value:v.dob,onChange:e=>k("dob",e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"birth_place",children:"Birth Place"}),(0,r.jsx)(d.I,{id:"birth_place",value:v.birth_place,onChange:e=>k("birth_place",e.target.value),placeholder:"City, Country"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(m.X,{id:"deceased",checked:v.deceased,onCheckedChange:e=>k("deceased",!!e)}),(0,r.jsx)(c._,{htmlFor:"deceased",className:"cursor-pointer",children:"This person is deceased"})]}),v.deceased&&(0,r.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"dod",children:"Date of Death"}),(0,r.jsx)(d.I,{id:"dod",type:"date",value:v.dod,onChange:e=>k("dod",e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"death_place",children:"Death Place"}),(0,r.jsx)(d.I,{id:"death_place",value:v.death_place,onChange:e=>k("death_place",e.target.value),placeholder:"City, Country"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"font-medium",children:"Additional Information"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"occupation",children:"Occupation"}),(0,r.jsx)(d.I,{id:"occupation",value:v.occupation,onChange:e=>k("occupation",e.target.value),placeholder:"Software Engineer"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"bio",children:"Biography"}),(0,r.jsx)(u.g,{id:"bio",value:v.bio,onChange:e=>k("bio",e.target.value),placeholder:"Brief biography or description...",rows:4})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"notes",children:"Private Notes"}),(0,r.jsx)(u.g,{id:"notes",value:v.notes,onChange:e=>k("notes",e.target.value),placeholder:"Private notes (only visible to custodians)...",rows:3}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"These notes are private and only visible to tree custodians"})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 border-t pt-6",children:[(0,r.jsx)(i.z,{type:"button",variant:"outline",onClick:()=>a.back(),disabled:j,children:"Cancel"}),(0,r.jsx)(i.z,{type:"submit",disabled:j,children:j?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),"Add Member"]})})]})]})]})})]})})}},68245:function(e,a,t){"use strict";t.d(a,{X:function(){return o}});var r=t(57437),s=t(2265),n=t(9270),l=t(30401),i=t(93448);let o=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.fC,{ref:a,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:(0,r.jsx)(n.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})})});o.displayName=n.fC.displayName},40279:function(e,a,t){"use strict";t.d(a,{I:function(){return l}});var r=t(57437),s=t(2265),n=t(93448);let l=s.forwardRef((e,a)=>{let{className:t,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...l})});l.displayName="Input"},75060:function(e,a,t){"use strict";t.d(a,{_:function(){return d}});var r=t(57437),s=t(2265),n=t(6394),l=t(90535),i=t(93448);let o=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.f,{ref:a,className:(0,i.cn)(o(),t),...s})});d.displayName=n.f.displayName},71455:function(e,a,t){"use strict";t.d(a,{V:function(){return l}});var r=t(57437),s=t(2265),n=t(15291);function l(e){let{value:a,onValueChange:t,placeholder:l="Select an option...",searchPlaceholder:i="Search options...",options:o,className:d,disabled:c,id:u}=e,[h,m]=s.useState(""),[p,f]=s.useState(!1),x=s.useMemo(()=>{let e=o;return h&&(e=o.filter(e=>e.label.toLowerCase().includes(h.toLowerCase())||e.value.toLowerCase().includes(h.toLowerCase()))),e.sort((e,a)=>e.label.localeCompare(a.label))},[o,h]);return(0,r.jsxs)(n.Ph,{value:a,onValueChange:e=>{console.log("SearchableSelect ".concat(u||"unknown"," value changed to:"),e),m(""),f(!1),null==t||t(e)},disabled:c,open:p,onOpenChange:e=>{f(e),e||m("")},children:[(0,r.jsx)(n.i4,{className:d,children:(0,r.jsx)(n.ki,{placeholder:l})}),(0,r.jsx)(n.Bw,{searchable:!0,searchPlaceholder:i,onSearchChange:e=>{m(e)},children:0===x.length?(0,r.jsx)("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"No options found."}):x.map(e=>(0,r.jsx)(n.Ql,{value:e.value,disabled:e.disabled,children:e.label},e.value))})]})}},15291:function(e,a,t){"use strict";t.d(a,{Bw:function(){return x},Ph:function(){return u},Ql:function(){return b},i4:function(){return m},ki:function(){return h}});var r=t(57437),s=t(2265),n=t(93402),l=t(40875),i=t(22135),o=t(73247),d=t(30401),c=t(93448);t(71455);let u=n.fC;n.ZA;let h=n.B4,m=s.forwardRef((e,a)=>{let{className:t,children:s,...i}=e;return(0,r.jsxs)(n.xz,{ref:a,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[s,(0,r.jsx)(n.JO,{asChild:!0,children:(0,r.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.xz.displayName;let p=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.u_,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})});p.displayName=n.u_.displayName;let f=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.$G,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})});f.displayName=n.$G.displayName;let x=s.forwardRef((e,a)=>{let{className:t,children:l,position:i="popper",searchable:d=!1,searchPlaceholder:u="Search...",onSearchChange:h,...m}=e,[x,b]=s.useState("");return(0,r.jsx)(n.h_,{children:(0,r.jsxs)(n.VY,{ref:a,className:(0,c.cn)("relative z-[999999] max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...m,children:[(0,r.jsx)(p,{}),d&&(0,r.jsxs)("div",{className:"flex items-center border-b px-3 py-2",children:[(0,r.jsx)(o.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,r.jsx)("input",{className:"flex h-8 w-full rounded-md bg-transparent py-1 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",placeholder:u,value:x,onChange:e=>{let a=e.target.value;b(a),null==h||h(a)},onClick:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation()})]}),(0,r.jsx)(n.l_,{className:(0,c.cn)("p-1",d&&"overflow-y-auto max-h-[200px]","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,r.jsx)(f,{})]})})});x.displayName=n.VY.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.__,{ref:a,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s})}).displayName=n.__.displayName;let b=s.forwardRef((e,a)=>{let{className:t,children:s,...l}=e;return(0,r.jsxs)(n.ck,{ref:a,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(n.eT,{children:s})]})});b.displayName=n.ck.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.Z0,{ref:a,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...s})}).displayName=n.Z0.displayName},23675:function(e,a,t){"use strict";t.d(a,{g:function(){return l}});var r=t(57437),s=t(2265),n=t(93448);let l=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...s})});l.displayName="Textarea"},9270:function(e,a,t){"use strict";t.d(a,{fC:function(){return v},z$:function(){return w}});var r=t(2265),s=t(98575),n=t(73966),l=t(6741),i=t(80886),o=t(6718),d=t(90420),c=t(71599),u=t(66840),h=t(57437),m="Checkbox",[p,f]=(0,n.b)(m),[x,b]=p(m);function g(e){let{__scopeCheckbox:a,checked:t,children:s,defaultChecked:n,disabled:l,form:o,name:d,onCheckedChange:c,required:u,value:p="on",internal_do_not_use_render:f}=e,[b,g]=(0,i.T)({prop:t,defaultProp:null!=n&&n,onChange:c,caller:m}),[j,y]=r.useState(null),[v,N]=r.useState(null),w=r.useRef(!1),k=!j||!!o||!!j.closest("form"),C={checked:b,disabled:l,setChecked:g,control:j,setControl:y,name:d,form:o,value:p,hasConsumerStoppedPropagationRef:w,required:u,defaultChecked:!_(n)&&n,isFormControl:k,bubbleInput:v,setBubbleInput:N};return(0,h.jsx)(x,{scope:a,...C,children:"function"==typeof f?f(C):s})}var j="CheckboxTrigger",y=r.forwardRef((e,a)=>{let{__scopeCheckbox:t,onKeyDown:n,onClick:i,...o}=e,{control:d,value:c,disabled:m,checked:p,required:f,setControl:x,setChecked:g,hasConsumerStoppedPropagationRef:y,isFormControl:v,bubbleInput:N}=b(j,t),w=(0,s.e)(a,x),k=r.useRef(p);return r.useEffect(()=>{let e=null==d?void 0:d.form;if(e){let a=()=>g(k.current);return e.addEventListener("reset",a),()=>e.removeEventListener("reset",a)}},[d,g]),(0,h.jsx)(u.WV.button,{type:"button",role:"checkbox","aria-checked":_(p)?"mixed":p,"aria-required":f,"data-state":E(p),"data-disabled":m?"":void 0,disabled:m,value:c,...o,ref:w,onKeyDown:(0,l.Mj)(n,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,l.Mj)(i,e=>{g(e=>!!_(e)||!e),N&&v&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})})});y.displayName=j;var v=r.forwardRef((e,a)=>{let{__scopeCheckbox:t,name:r,checked:s,defaultChecked:n,required:l,disabled:i,value:o,onCheckedChange:d,form:c,...u}=e;return(0,h.jsx)(g,{__scopeCheckbox:t,checked:s,defaultChecked:n,disabled:i,required:l,onCheckedChange:d,name:r,form:c,value:o,internal_do_not_use_render:e=>{let{isFormControl:r}=e;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(y,{...u,ref:a,__scopeCheckbox:t}),r&&(0,h.jsx)(C,{__scopeCheckbox:t})]})}})});v.displayName=m;var N="CheckboxIndicator",w=r.forwardRef((e,a)=>{let{__scopeCheckbox:t,forceMount:r,...s}=e,n=b(N,t);return(0,h.jsx)(c.z,{present:r||_(n.checked)||!0===n.checked,children:(0,h.jsx)(u.WV.span,{"data-state":E(n.checked),"data-disabled":n.disabled?"":void 0,...s,ref:a,style:{pointerEvents:"none",...e.style}})})});w.displayName=N;var k="CheckboxBubbleInput",C=r.forwardRef((e,a)=>{let{__scopeCheckbox:t,...n}=e,{control:l,hasConsumerStoppedPropagationRef:i,checked:c,defaultChecked:m,required:p,disabled:f,name:x,value:g,form:j,bubbleInput:y,setBubbleInput:v}=b(k,t),N=(0,s.e)(a,v),w=(0,o.D)(c),C=(0,d.t)(l);r.useEffect(()=>{if(!y)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,a=!i.current;if(w!==c&&e){let t=new Event("click",{bubbles:a});y.indeterminate=_(c),e.call(y,!_(c)&&c),y.dispatchEvent(t)}},[y,w,c,i]);let E=r.useRef(!_(c)&&c);return(0,h.jsx)(u.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:null!=m?m:E.current,required:p,disabled:f,name:x,value:g,form:j,...n,tabIndex:-1,ref:N,style:{...n.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function _(e){return"indeterminate"===e}function E(e){return _(e)?"indeterminate":e?"checked":"unchecked"}C.displayName=k},6394:function(e,a,t){"use strict";t.d(a,{f:function(){return i}});var r=t(2265),s=t(66840),n=t(57437),l=r.forwardRef((e,a)=>(0,n.jsx)(s.WV.label,{...e,ref:a,onMouseDown:a=>{var t;a.target.closest("button, input, select, textarea")||(null===(t=e.onMouseDown)||void 0===t||t.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));l.displayName="Label";var i=l}},function(e){e.O(0,[7697,1770,7203,4360,8269,4713,7308,2971,2117,1744],function(){return e(e.s=46458)}),_N_E=e.O()}]);