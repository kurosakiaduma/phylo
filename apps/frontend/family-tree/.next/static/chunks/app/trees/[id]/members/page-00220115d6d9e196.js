(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5842],{16828:function(e,s,a){Promise.resolve().then(a.bind(a,5271))},5271:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return S}});var l=a(57437),r=a(2265),t=a(99376),n=a(12381),c=a(79820),d=a(40279),i=a(69174),m=a(96246),o=a(17168),x=a(86271),h=a(70882),u=a(37511),j=a(10407),g=a(15863),f=a(95805),p=a(32660),N=a(13420),b=a(37806),v=a(73247),w=a(41473),y=a(7586);let C=e=>e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2),k=e=>{if(!e)return"bg-gray-400";let s=e.toLowerCase();return"male"===s?"bg-blue-400":"female"===s?"bg-pink-400":"bg-purple-400"};function Z(e){let{member:s,onClick:a,viewMode:r="grid"}=e;return"list"===r?(0,l.jsx)(c.Zb,{className:"cursor-pointer transition-all hover:shadow-md hover:border-primary/50",onClick:a,children:(0,l.jsx)(c.aY,{className:"p-4",children:(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)(m.qE,{className:"h-12 w-12",children:[(0,l.jsx)(m.F$,{src:s.avatar_url,alt:s.name}),(0,l.jsx)(m.Q5,{className:k(s.gender),children:C(s.name)})]}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h3",{className:"font-medium",children:s.name}),(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.dob&&(0,l.jsxs)("span",{children:["b. ",new Date(s.dob).getFullYear()]}),s.deceased&&s.dod&&(0,l.jsxs)("span",{children:["d. ",new Date(s.dod).getFullYear()]}),s.gender&&(0,l.jsx)(i.C,{variant:"outline",className:"text-xs",children:s.gender})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[s.deceased&&(0,l.jsx)(i.C,{variant:"secondary",children:"Deceased"}),(0,l.jsx)(j.Z,{className:"h-5 w-5 text-muted-foreground"})]})]})})}):(0,l.jsx)(c.Zb,{className:"cursor-pointer transition-all hover:shadow-md hover:border-primary/50",onClick:a,children:(0,l.jsxs)(c.aY,{className:"flex flex-col items-center gap-3 p-4",children:[(0,l.jsxs)(m.qE,{className:"h-20 w-20",children:[(0,l.jsx)(m.F$,{src:s.avatar_url,alt:s.name}),(0,l.jsx)(m.Q5,{className:k(s.gender),children:C(s.name)})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("h3",{className:"font-medium line-clamp-1",children:s.name}),(0,l.jsxs)("div",{className:"mt-1 space-y-1",children:[s.dob&&(0,l.jsxs)("p",{className:"text-xs text-muted-foreground",children:["b. ",new Date(s.dob).getFullYear()]}),s.deceased&&s.dod&&(0,l.jsxs)("p",{className:"text-xs text-muted-foreground",children:["d. ",new Date(s.dod).getFullYear()]})]}),(0,l.jsxs)("div",{className:"mt-2 flex flex-wrap justify-center gap-1",children:[s.gender&&(0,l.jsx)(i.C,{variant:"outline",className:"text-xs",children:s.gender}),s.deceased&&(0,l.jsx)(i.C,{variant:"secondary",className:"text-xs",children:"Deceased"})]})]})]})})}function S(){let e=(0,t.useParams)(),s=(0,t.useRouter)(),a=e.id,[i,m]=(0,r.useState)(""),[j,C]=(0,r.useState)("all"),[k,S]=(0,r.useState)("grid"),[z,F]=(0,r.useState)(null),[M,Y]=(0,r.useState)(!1),{members:_,loading:A,error:D,refetch:E}=(0,u.r)({treeId:a,autoFetch:!0}),L=(0,r.useMemo)(()=>_.filter(e=>{let s=e.name.toLowerCase().includes(i.toLowerCase()),a="all"===j||("alive"===j?!e.deceased:e.deceased);return s&&a}),[_,i,j]),P=e=>{F(e),Y(!0)};return A?(0,l.jsx)(x.c,{children:(0,l.jsx)("div",{className:"flex h-full items-center justify-center py-12",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(g.Z,{className:"mx-auto mb-4 h-12 w-12 animate-spin text-primary"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"Loading members..."})]})})}):D?(0,l.jsx)(x.c,{children:(0,l.jsx)("div",{className:"flex h-full items-center justify-center py-12",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(f.Z,{className:"mx-auto mb-4 h-16 w-16 text-destructive"}),(0,l.jsx)("h3",{className:"mb-2 text-xl font-semibold",children:"Error Loading Members"}),(0,l.jsx)("p",{className:"mb-6 text-muted-foreground",children:D.message}),(0,l.jsx)(n.z,{onClick:()=>E(),children:"Try Again"})]})})}):(0,l.jsxs)(x.c,{children:[(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,l.jsxs)(n.z,{variant:"ghost",onClick:()=>s.push("/trees/".concat(a)),className:"w-fit",children:[(0,l.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"Back to Tree"]}),(0,l.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Family Members"}),(0,l.jsxs)("p",{className:"text-muted-foreground",children:[L.length," of ",_.length," members"]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[_.length>=2&&(0,l.jsxs)(n.z,{variant:"outline",onClick:()=>s.push("/trees/".concat(a,"/relationships")),children:[(0,l.jsx)(N.Z,{className:"mr-2 h-4 w-4"}),"Analyze Relationships"]}),(0,l.jsxs)(n.z,{onClick:()=>s.push("/trees/".concat(a,"/members/new")),children:[(0,l.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),"Add Member"]})]})]})]}),(0,l.jsx)(c.Zb,{children:(0,l.jsx)(c.aY,{className:"p-4",children:(0,l.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[(0,l.jsxs)("div",{className:"relative flex-1",children:[(0,l.jsx)(v.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,l.jsx)(d.I,{placeholder:"Search members by name...",value:i,onChange:e=>m(e.target.value),className:"pl-9"})]}),(0,l.jsx)(o.mQ,{value:j,onValueChange:e=>C(e),children:(0,l.jsxs)(o.dr,{children:[(0,l.jsx)(o.SP,{value:"all",children:"All"}),(0,l.jsx)(o.SP,{value:"alive",children:"Living"}),(0,l.jsx)(o.SP,{value:"deceased",children:"Deceased"})]})}),(0,l.jsxs)("div",{className:"flex gap-1 rounded-md border p-1",children:[(0,l.jsx)(n.z,{variant:"grid"===k?"secondary":"ghost",size:"sm",onClick:()=>S("grid"),children:(0,l.jsx)(w.Z,{className:"h-4 w-4"})}),(0,l.jsx)(n.z,{variant:"list"===k?"secondary":"ghost",size:"sm",onClick:()=>S("list"),children:(0,l.jsx)(y.Z,{className:"h-4 w-4"})})]})]})})}),0===L.length?(0,l.jsx)(c.Zb,{children:(0,l.jsxs)(c.aY,{className:"flex flex-col items-center justify-center py-12",children:[(0,l.jsx)(f.Z,{className:"mb-4 h-16 w-16 text-muted-foreground"}),(0,l.jsx)("h3",{className:"mb-2 text-xl font-semibold",children:0===_.length?"No Members Yet":"No Members Found"}),(0,l.jsx)("p",{className:"mb-6 text-center text-muted-foreground",children:0===_.length?"Start building your family tree by adding your first member":"Try adjusting your search or filters"}),0===_.length&&(0,l.jsxs)(n.z,{onClick:()=>s.push("/trees/".concat(a,"/members/new")),children:[(0,l.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),"Add First Member"]})]})}):(0,l.jsx)("div",{className:"grid"===k?"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5":"space-y-2",children:L.map(e=>(0,l.jsx)(Z,{member:e,onClick:()=>P(e),viewMode:k},e.id))})]}),(0,l.jsx)(h.d,{member:z,open:M,onOpenChange:Y,allMembers:_,treeId:a,isTreeCanvasPage:!1,onMemberNavigate:e=>{F(e)},onEditClick:()=>{z&&s.push("/trees/".concat(a,"/members/").concat(z.id,"/edit"))},onAddSpouseClick:()=>{z&&s.push("/trees/".concat(a,"/members/").concat(z.id,"/add-spouse"))},onAddChildClick:()=>{z&&s.push("/trees/".concat(a,"/members/").concat(z.id,"/add-child"))}})]})}}},function(e){e.O(0,[7697,1770,7203,4360,8269,7053,4713,7308,7117,6951,2971,2117,1744],function(){return e(e.s=16828)}),_N_E=e.O()}]);