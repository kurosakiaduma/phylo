(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3727],{10833:function(e,s,t){Promise.resolve().then(t.bind(t,4985))},4985:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var l=t(57437),a=t(2265),n=t(99376),r=t(12381),i=t(79820),c=t(86271),d=t(85040),o=t(23340),h=t(37511),m=t(15863),x=t(32660),j=t(13420),u=t(95805);function p(){let e=(0,n.useParams)(),s=(0,n.useRouter)(),{toast:t}=(0,o.pm)(),[p,f]=(0,a.useState)(null),[N,g]=(0,a.useState)(!0),[b,v]=(0,a.useState)(!1),y=e.id,{members:k,loading:w,error:z,refetch:Z}=(0,h.r)({treeId:y,autoFetch:!0});(0,a.useEffect)(()=>{C()},[y]);let C=async()=>{try{g(!0);let e=await fetch("".concat("http://localhost:8050/api","/trees/").concat(y),{credentials:"include"});if(!e.ok){if(404===e.status){t({title:"Tree Not Found",description:"The requested tree does not exist or you do not have access to it.",variant:"destructive"}),s.push("/trees");return}throw Error("Failed to fetch tree")}let l=await e.json();f(l)}catch(e){console.error("Error fetching tree:",e),t({title:"Error",description:"Failed to load tree details. Please try again.",variant:"destructive"})}finally{g(!1)}};return N||w?(0,l.jsx)(c.c,{children:(0,l.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(m.Z,{className:"h-12 w-12 animate-spin text-primary mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"Loading relationship analyzer..."})]})})}):p?z?(0,l.jsx)(c.c,{children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)(r.z,{variant:"ghost",onClick:()=>s.back(),children:[(0,l.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Relationship Analyzer"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:p.name})]})]}),(0,l.jsx)(i.Zb,{children:(0,l.jsx)(i.aY,{className:"flex h-[400px] items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(j.Z,{className:"mx-auto mb-4 h-16 w-16 text-destructive"}),(0,l.jsx)("h3",{className:"mb-2 text-xl font-semibold",children:"Error Loading Members"}),(0,l.jsx)("p",{className:"mb-6 text-muted-foreground",children:z.message}),(0,l.jsx)(r.z,{onClick:()=>Z(),children:"Try Again"})]})})})]})}):k.length<2?(0,l.jsx)(c.c,{children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)(r.z,{variant:"ghost",onClick:()=>s.back(),children:[(0,l.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Relationship Analyzer"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:p.name})]})]}),(0,l.jsx)(i.Zb,{children:(0,l.jsx)(i.aY,{className:"flex h-[400px] items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(u.Z,{className:"mx-auto mb-4 h-16 w-16 text-muted-foreground"}),(0,l.jsx)("h3",{className:"mb-2 text-xl font-semibold",children:"Not Enough Members"}),(0,l.jsx)("p",{className:"mb-6 text-muted-foreground",children:"You need at least 2 family members to analyze relationships."}),(0,l.jsx)(r.z,{onClick:()=>s.push("/trees/".concat(y)),children:"Add More Members"})]})})})]})}):(0,l.jsx)(c.c,{children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)(r.z,{variant:"ghost",onClick:()=>s.push("/trees/".concat(y)),children:[(0,l.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Back to Tree"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Relationship Analyzer"}),(0,l.jsxs)("p",{className:"text-muted-foreground",children:[p.name," â€¢ ",k.length," members"]})]})]}),(0,l.jsxs)(i.Zb,{children:[(0,l.jsxs)(i.Ol,{children:[(0,l.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)(j.Z,{className:"h-5 w-5"}),"Analyze Family Relationships"]}),(0,l.jsx)(i.SZ,{children:"Discover how any two family members are related, including complex relationships like cousins, in-laws, and degrees of removal. The analyzer considers both maternal and paternal lines to provide accurate relationship descriptions."})]}),(0,l.jsx)(i.aY,{children:(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)(j.Z,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Ready to Analyze"}),(0,l.jsx)("p",{className:"text-muted-foreground mb-6",children:"Click the button below to open the relationship analyzer and discover connections between family members."}),(0,l.jsxs)(r.z,{onClick:()=>v(!0),children:[(0,l.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Open Analyzer"]})]})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsxs)(i.Zb,{children:[(0,l.jsx)(i.Ol,{className:"pb-2",children:(0,l.jsx)(i.ll,{className:"text-sm font-medium",children:"Total Members"})}),(0,l.jsxs)(i.aY,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:k.length}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Family members in this tree"})]})]}),(0,l.jsxs)(i.Zb,{children:[(0,l.jsx)(i.Ol,{className:"pb-2",children:(0,l.jsx)(i.ll,{className:"text-sm font-medium",children:"Possible Relationships"})}),(0,l.jsxs)(i.aY,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:k.length>1?k.length*(k.length-1):0}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Unique relationship pairs to analyze"})]})]}),(0,l.jsxs)(i.Zb,{children:[(0,l.jsx)(i.Ol,{className:"pb-2",children:(0,l.jsx)(i.ll,{className:"text-sm font-medium",children:"Generations"})}),(0,l.jsxs)(i.aY,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:0===k.length?0:0===k.filter(e=>0===e.parentIds.length).length?1:Math.min(Math.ceil(k.length/3),6)}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Estimated generations in tree"})]})]})]}),(0,l.jsx)(d.D,{members:k,treeId:y,open:b,onOpenChange:v})]})}):null}}},function(e){e.O(0,[7697,1770,7203,4360,8269,2326,4713,7308,7117,2971,2117,1744],function(){return e(e.s=10833)}),_N_E=e.O()}]);