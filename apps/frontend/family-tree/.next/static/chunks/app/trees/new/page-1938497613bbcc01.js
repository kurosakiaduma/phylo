(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9393],{5842:function(e,s,t){Promise.resolve().then(t.bind(t,26377))},26377:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return y}});var r=t(57437),a=t(2265),n=t(99376),i=t(12381),l=t(40279),c=t(75060),o=t(23675),d=t(79820),m=t(86271),u=t(23340),h=t(30401),x=t(32660),p=t(76858),f=t(15863),g=t(94589),j=t(31593);function y(){let e=(0,n.useRouter)(),{toast:s}=(0,u.pm)(),[t,y]=(0,a.useState)(1),[b,v]=(0,a.useState)(!1),[N,w]=(0,a.useState)(""),[_,k]=(0,a.useState)(""),[C,S]=(0,a.useState)({allow_same_sex:!0,monogamy:!0,allow_polygamy:!1,allow_single_parent:!0,allow_multi_parent_children:!1,max_parents_per_child:2}),[F,T]=(0,a.useState)({}),Z=()=>{let e={};return N.trim()?N.length<3?e.name="Tree name must be at least 3 characters":N.length>100&&(e.name="Tree name must be less than 100 characters"):e.name="Tree name is required",_&&_.length>500&&(e.description="Description must be less than 500 characters"),T(e),0===Object.keys(e).length},P=async()=>{if(!Z()){y(1);return}try{v(!0);let t=await fetch("".concat("http://localhost:8050/api","/trees"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:N.trim(),description:_.trim()||void 0,settings:C})});if(!t.ok){let e=await t.json();throw Error(e.detail||"Failed to create tree")}let r=await t.json();s({title:"Success!",description:"Your family tree has been created."}),e.push("/trees/".concat(r.id))}catch(e){console.error("Error creating tree:",e),s({title:"Error",description:e instanceof Error?e.message:"Failed to create tree. Please try again.",variant:"destructive"})}finally{v(!1)}},E=(e,s)=>{S(t=>({...t,[e]:s}))};return(0,r.jsx)(m.c,{children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Create New Family Tree"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-1",children:"Set up your tree with inclusive options for your family structure"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full ".concat(t>=1?"bg-primary text-primary-foreground":"bg-muted"),children:t>1?(0,r.jsx)(h.Z,{className:"h-4 w-4"}):"1"}),(0,r.jsx)("div",{className:"h-1 w-12 ".concat(t>=2?"bg-primary":"bg-muted")}),(0,r.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full ".concat(t>=2?"bg-primary text-primary-foreground":"bg-muted"),children:"2"})]}),1===t&&(0,r.jsxs)(d.Zb,{children:[(0,r.jsxs)(d.Ol,{children:[(0,r.jsx)(d.ll,{children:"Basic Information"}),(0,r.jsx)(d.SZ,{children:"Give your family tree a name and optional description"})]}),(0,r.jsxs)(d.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(c._,{htmlFor:"name",children:["Tree Name ",(0,r.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,r.jsx)(l.I,{id:"name",placeholder:"e.g., Smith Family Tree",value:N,onChange:e=>{w(e.target.value),F.name&&T(e=>({...e,name:""}))},className:F.name?"border-destructive":""}),F.name&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:F.name})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"description",children:"Description (Optional)"}),(0,r.jsx)(o.g,{id:"description",placeholder:"Tell us about your family tree...",value:_,onChange:e=>{k(e.target.value),F.description&&T(e=>({...e,description:""}))},rows:4,className:F.description?"border-destructive":""}),F.description&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:F.description}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[_.length,"/500 characters"]})]})]})]}),2===t&&(0,r.jsxs)(d.Zb,{children:[(0,r.jsxs)(d.Ol,{children:[(0,r.jsx)(d.ll,{children:"Inclusive Settings"}),(0,r.jsx)(d.SZ,{children:"Configure your tree to reflect your family's unique structure"})]}),(0,r.jsxs)(d.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium mb-4",children:"Relationship Types"}),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(c._,{htmlFor:"same-sex",children:"Allow Same-Sex Relationships"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Enable relationships between partners of the same gender"})]}),(0,r.jsx)(g.r,{id:"same-sex",checked:C.allow_same_sex,onCheckedChange:e=>E("allow_same_sex",e)})]})})]}),(0,r.jsx)(j.Z,{}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium mb-4",children:"Marriage & Partnership"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(c._,{htmlFor:"polygamy",children:"Allow Polygamy"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Allow members to have multiple simultaneous spouses"})]}),(0,r.jsx)(g.r,{id:"polygamy",checked:C.allow_polygamy,onCheckedChange:e=>{E("allow_polygamy",e),e&&E("monogamy",!1)}})]}),!C.allow_polygamy&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(c._,{htmlFor:"monogamy",children:"Enforce Monogamy"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Members can only have one spouse at a time"})]}),(0,r.jsx)(g.r,{id:"monogamy",checked:C.monogamy,onCheckedChange:e=>E("monogamy",e)})]})]})]}),(0,r.jsx)(j.Z,{}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium mb-4",children:"Parenting & Children"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(c._,{htmlFor:"single-parent",children:"Allow Single Parents"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Children can have one parent listed"})]}),(0,r.jsx)(g.r,{id:"single-parent",checked:C.allow_single_parent,onCheckedChange:e=>E("allow_single_parent",e)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(c._,{htmlFor:"multi-parent",children:"Allow Multi-Parent Children"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Children can have more than two parents"})]}),(0,r.jsx)(g.r,{id:"multi-parent",checked:C.allow_multi_parent_children,onCheckedChange:e=>{E("allow_multi_parent_children",e),e||E("max_parents_per_child",2)}})]}),C.allow_multi_parent_children&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"max-parents",children:"Maximum Parents Per Child"}),(0,r.jsx)(l.I,{id:"max-parents",type:"number",min:"2",max:"10",value:C.max_parents_per_child||2,onChange:e=>E("max_parents_per_child",parseInt(e.target.value)||2)}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Set how many parents a child can have (useful for adoption, surrogacy, etc.)"})]})]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(i.z,{variant:"outline",onClick:()=>{t>1?y(t-1):e.push("/trees")},disabled:b,children:[(0,r.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),1===t?"Cancel":"Back"]}),1===t?(0,r.jsxs)(i.z,{onClick:()=>{1===t&&Z()&&y(2)},children:["Next",(0,r.jsx)(p.Z,{className:"h-4 w-4 ml-2"})]}):(0,r.jsx)(i.z,{onClick:P,disabled:b,children:b?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Create Tree"]})})]})]})})}},40279:function(e,s,t){"use strict";t.d(s,{I:function(){return i}});var r=t(57437),a=t(2265),n=t(93448);let i=a.forwardRef((e,s)=>{let{className:t,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...i})});i.displayName="Input"},75060:function(e,s,t){"use strict";t.d(s,{_:function(){return o}});var r=t(57437),a=t(2265),n=t(6394),i=t(90535),l=t(93448);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.f,{ref:s,className:(0,l.cn)(c(),t),...a})});o.displayName=n.f.displayName},31593:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var r=t(57437),a=t(2265),n=t(55156),i=t(93448);let l=a.forwardRef((e,s)=>{let{className:t,orientation:a="horizontal",decorative:l=!0,...c}=e;return(0,r.jsx)(n.f,{ref:s,decorative:l,orientation:a,className:(0,i.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",t),...c})});l.displayName=n.f.displayName},94589:function(e,s,t){"use strict";t.d(s,{r:function(){return l}});var r=t(57437),a=t(2265),n=t(50721),i=t(93448);let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.fC,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...a,ref:s,children:(0,r.jsx)(n.bU,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});l.displayName=n.fC.displayName},23675:function(e,s,t){"use strict";t.d(s,{g:function(){return i}});var r=t(57437),a=t(2265),n=t(93448);let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...a})});i.displayName="Textarea"}},function(e){e.O(0,[7697,1770,7203,4360,1868,4713,7308,2971,2117,1744],function(){return e(e.s=5842)}),_N_E=e.O()}]);